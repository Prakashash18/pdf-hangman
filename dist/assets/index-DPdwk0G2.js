var gA=Object.defineProperty;var Ey=n=>{throw TypeError(n)};var yA=(n,e,t)=>e in n?gA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var G=(n,e,t)=>yA(n,typeof e!="symbol"?e+"":e,t),Sp=(n,e,t)=>e.has(n)||Ey("Cannot "+t);var a=(n,e,t)=>(Sp(n,e,"read from private field"),t?t.call(n):e.get(n)),x=(n,e,t)=>e.has(n)?Ey("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),m=(n,e,t,s)=>(Sp(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),A=(n,e,t)=>(Sp(n,e,"access private method"),t);var Rt=(n,e,t,s)=>({set _(i){m(n,e,i,t)},get _(){return a(n,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();var sw={exports:{}},Jf={},iw={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jh=Symbol.for("react.element"),vA=Symbol.for("react.portal"),wA=Symbol.for("react.fragment"),xA=Symbol.for("react.strict_mode"),bA=Symbol.for("react.profiler"),AA=Symbol.for("react.provider"),SA=Symbol.for("react.context"),EA=Symbol.for("react.forward_ref"),_A=Symbol.for("react.suspense"),CA=Symbol.for("react.memo"),kA=Symbol.for("react.lazy"),_y=Symbol.iterator;function TA(n){return n===null||typeof n!="object"?null:(n=_y&&n[_y]||n["@@iterator"],typeof n=="function"?n:null)}var rw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ow=Object.assign,aw={};function tc(n,e,t){this.props=n,this.context=e,this.refs=aw,this.updater=t||rw}tc.prototype.isReactComponent={};tc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};tc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function lw(){}lw.prototype=tc.prototype;function f0(n,e,t){this.props=n,this.context=e,this.refs=aw,this.updater=t||rw}var p0=f0.prototype=new lw;p0.constructor=f0;ow(p0,tc.prototype);p0.isPureReactComponent=!0;var Cy=Array.isArray,cw=Object.prototype.hasOwnProperty,m0={current:null},uw={key:!0,ref:!0,__self:!0,__source:!0};function hw(n,e,t){var s,i={},r=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)cw.call(e,s)&&!uw.hasOwnProperty(s)&&(i[s]=e[s]);var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(n&&n.defaultProps)for(s in l=n.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:jh,type:n,key:r,ref:o,props:i,_owner:m0.current}}function NA(n,e){return{$$typeof:jh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function g0(n){return typeof n=="object"&&n!==null&&n.$$typeof===jh}function PA(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var ky=/\/+/g;function Ep(n,e){return typeof n=="object"&&n!==null&&n.key!=null?PA(""+n.key):e.toString(36)}function fd(n,e,t,s,i){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case jh:case vA:o=!0}}if(o)return o=n,i=i(o),n=s===""?"."+Ep(o,0):s,Cy(i)?(t="",n!=null&&(t=n.replace(ky,"$&/")+"/"),fd(i,e,t,"",function(u){return u})):i!=null&&(g0(i)&&(i=NA(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ky,"$&/")+"/")+n)),e.push(i)),1;if(o=0,s=s===""?".":s+":",Cy(n))for(var l=0;l<n.length;l++){r=n[l];var c=s+Ep(r,l);o+=fd(r,e,t,c,i)}else if(c=TA(n),typeof c=="function")for(n=c.call(n),l=0;!(r=n.next()).done;)r=r.value,c=s+Ep(r,l++),o+=fd(r,e,t,c,i);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vh(n,e,t){if(n==null)return n;var s=[],i=0;return fd(n,s,"","",function(r){return e.call(t,r,i++)}),s}function MA(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ut={current:null},pd={transition:null},RA={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:pd,ReactCurrentOwner:m0};function dw(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Vh,forEach:function(n,e,t){Vh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Vh(n,function(){e++}),e},toArray:function(n){return Vh(n,function(e){return e})||[]},only:function(n){if(!g0(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};te.Component=tc;te.Fragment=wA;te.Profiler=bA;te.PureComponent=f0;te.StrictMode=xA;te.Suspense=_A;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RA;te.act=dw;te.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=ow({},n.props),i=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=m0.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)cw.call(e,c)&&!uw.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=t;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:jh,type:n.type,key:i,ref:r,props:s,_owner:o}};te.createContext=function(n){return n={$$typeof:SA,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:AA,_context:n},n.Consumer=n};te.createElement=hw;te.createFactory=function(n){var e=hw.bind(null,n);return e.type=n,e};te.createRef=function(){return{current:null}};te.forwardRef=function(n){return{$$typeof:EA,render:n}};te.isValidElement=g0;te.lazy=function(n){return{$$typeof:kA,_payload:{_status:-1,_result:n},_init:MA}};te.memo=function(n,e){return{$$typeof:CA,type:n,compare:e===void 0?null:e}};te.startTransition=function(n){var e=pd.transition;pd.transition={};try{n()}finally{pd.transition=e}};te.unstable_act=dw;te.useCallback=function(n,e){return Ut.current.useCallback(n,e)};te.useContext=function(n){return Ut.current.useContext(n)};te.useDebugValue=function(){};te.useDeferredValue=function(n){return Ut.current.useDeferredValue(n)};te.useEffect=function(n,e){return Ut.current.useEffect(n,e)};te.useId=function(){return Ut.current.useId()};te.useImperativeHandle=function(n,e,t){return Ut.current.useImperativeHandle(n,e,t)};te.useInsertionEffect=function(n,e){return Ut.current.useInsertionEffect(n,e)};te.useLayoutEffect=function(n,e){return Ut.current.useLayoutEffect(n,e)};te.useMemo=function(n,e){return Ut.current.useMemo(n,e)};te.useReducer=function(n,e,t){return Ut.current.useReducer(n,e,t)};te.useRef=function(n){return Ut.current.useRef(n)};te.useState=function(n){return Ut.current.useState(n)};te.useSyncExternalStore=function(n,e,t){return Ut.current.useSyncExternalStore(n,e,t)};te.useTransition=function(){return Ut.current.useTransition()};te.version="18.3.1";iw.exports=te;var Se=iw.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LA=Se,IA=Symbol.for("react.element"),DA=Symbol.for("react.fragment"),FA=Object.prototype.hasOwnProperty,OA=LA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jA={key:!0,ref:!0,__self:!0,__source:!0};function fw(n,e,t){var s,i={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)FA.call(e,s)&&!jA.hasOwnProperty(s)&&(i[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:IA,type:n,key:r,ref:o,props:i,_owner:OA.current}}Jf.Fragment=DA;Jf.jsx=fw;Jf.jsxs=fw;sw.exports=Jf;var w=sw.exports,pw={exports:{}},Cn={},mw={exports:{}},gw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(I,U){var q=I.length;I.push(U);e:for(;0<q;){var re=q-1>>>1,se=I[re];if(0<i(se,U))I[re]=U,I[q]=se,q=re;else break e}}function t(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var U=I[0],q=I.pop();if(q!==U){I[0]=q;e:for(var re=0,se=I.length,_e=se>>>1;re<_e;){var Vt=2*(re+1)-1,Bs=I[Vt],Fe=Vt+1,he=I[Fe];if(0>i(Bs,q))Fe<se&&0>i(he,Bs)?(I[re]=he,I[Fe]=q,re=Fe):(I[re]=Bs,I[Vt]=q,re=Vt);else if(Fe<se&&0>i(he,q))I[re]=he,I[Fe]=q,re=Fe;else break e}}return U}function i(I,U){var q=I.sortIndex-U.sortIndex;return q!==0?q:I.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(I){for(var U=t(u);U!==null;){if(U.callback===null)s(u);else if(U.startTime<=I)s(u),U.sortIndex=U.expirationTime,e(c,U);else break;U=t(u)}}function _(I){if(b=!1,S(I),!g)if(t(c)!==null)g=!0,R(C);else{var U=t(u);U!==null&&W(_,U.startTime-I)}}function C(I,U){g=!1,b&&(b=!1,y(N),N=-1),p=!0;var q=f;try{for(S(U),d=t(c);d!==null&&(!(d.expirationTime>U)||I&&!z());){var re=d.callback;if(typeof re=="function"){d.callback=null,f=d.priorityLevel;var se=re(d.expirationTime<=U);U=n.unstable_now(),typeof se=="function"?d.callback=se:d===t(c)&&s(c),S(U)}else s(c);d=t(c)}if(d!==null)var _e=!0;else{var Vt=t(u);Vt!==null&&W(_,Vt.startTime-U),_e=!1}return _e}finally{d=null,f=q,p=!1}}var T=!1,k=null,N=-1,P=5,L=-1;function z(){return!(n.unstable_now()-L<P)}function oe(){if(k!==null){var I=n.unstable_now();L=I;var U=!0;try{U=k(!0,I)}finally{U?me():(T=!1,k=null)}}else T=!1}var me;if(typeof v=="function")me=function(){v(oe)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,He=ne.port2;ne.port1.onmessage=oe,me=function(){He.postMessage(null)}}else me=function(){E(oe,0)};function R(I){k=I,T||(T=!0,me())}function W(I,U){N=E(function(){I(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,R(C))},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(I){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var q=f;f=U;try{return I()}finally{f=q}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(I,U){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var q=f;f=I;try{return U()}finally{f=q}},n.unstable_scheduleCallback=function(I,U,q){var re=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?re+q:re):q=re,I){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=q+se,I={id:h++,callback:U,priorityLevel:I,startTime:q,expirationTime:se,sortIndex:-1},q>re?(I.sortIndex=q,e(u,I),t(c)===null&&I===t(u)&&(b?(y(N),N=-1):b=!0,W(_,q-re))):(I.sortIndex=se,e(c,I),g||p||(g=!0,R(C))),I},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(I){var U=f;return function(){var q=f;f=U;try{return I.apply(this,arguments)}finally{f=q}}}})(gw);mw.exports=gw;var HA=mw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zA=Se,_n=HA;function M(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yw=new Set,qc={};function ca(n,e){Xl(n,e),Xl(n+"Capture",e)}function Xl(n,e){for(qc[n]=e,n=0;n<e.length;n++)yw.add(e[n])}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),im=Object.prototype.hasOwnProperty,BA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ty={},Ny={};function $A(n){return im.call(Ny,n)?!0:im.call(Ty,n)?!1:BA.test(n)?Ny[n]=!0:(Ty[n]=!0,!1)}function WA(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function UA(n,e,t,s){if(e===null||typeof e>"u"||WA(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gt(n,e,t,s,i,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){vt[n]=new Gt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];vt[e]=new Gt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){vt[n]=new Gt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){vt[n]=new Gt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){vt[n]=new Gt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){vt[n]=new Gt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){vt[n]=new Gt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){vt[n]=new Gt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){vt[n]=new Gt(n,5,!1,n.toLowerCase(),null,!1,!1)});var y0=/[\-:]([a-z])/g;function v0(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(y0,v0);vt[e]=new Gt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(y0,v0);vt[e]=new Gt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(y0,v0);vt[e]=new Gt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){vt[n]=new Gt(n,1,!1,n.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){vt[n]=new Gt(n,1,!1,n.toLowerCase(),null,!0,!0)});function w0(n,e,t,s){var i=vt.hasOwnProperty(e)?vt[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(UA(e,t,i,s)&&(t=null),s||i===null?$A(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,s=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Li=zA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qh=Symbol.for("react.element"),ba=Symbol.for("react.portal"),Aa=Symbol.for("react.fragment"),x0=Symbol.for("react.strict_mode"),rm=Symbol.for("react.profiler"),vw=Symbol.for("react.provider"),ww=Symbol.for("react.context"),b0=Symbol.for("react.forward_ref"),om=Symbol.for("react.suspense"),am=Symbol.for("react.suspense_list"),A0=Symbol.for("react.memo"),Fi=Symbol.for("react.lazy"),xw=Symbol.for("react.offscreen"),Py=Symbol.iterator;function ic(n){return n===null||typeof n!="object"?null:(n=Py&&n[Py]||n["@@iterator"],typeof n=="function"?n:null)}var De=Object.assign,_p;function gc(n){if(_p===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);_p=e&&e[1]||""}return`
`+_p+n}var Cp=!1;function kp(n,e){if(!n||Cp)return"";Cp=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=s.stack.split(`
`),o=i.length-1,l=r.length-1;1<=o&&0<=l&&i[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==r[l]){var c=`
`+i[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=l);break}}}finally{Cp=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?gc(n):""}function GA(n){switch(n.tag){case 5:return gc(n.type);case 16:return gc("Lazy");case 13:return gc("Suspense");case 19:return gc("SuspenseList");case 0:case 2:case 15:return n=kp(n.type,!1),n;case 11:return n=kp(n.type.render,!1),n;case 1:return n=kp(n.type,!0),n;default:return""}}function lm(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Aa:return"Fragment";case ba:return"Portal";case rm:return"Profiler";case x0:return"StrictMode";case om:return"Suspense";case am:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ww:return(n.displayName||"Context")+".Consumer";case vw:return(n._context.displayName||"Context")+".Provider";case b0:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case A0:return e=n.displayName||null,e!==null?e:lm(n.type)||"Memo";case Fi:e=n._payload,n=n._init;try{return lm(n(e))}catch{}}return null}function VA(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lm(e);case 8:return e===x0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tr(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function bw(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qA(n){var e=bw(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Xh(n){n._valueTracker||(n._valueTracker=qA(n))}function Aw(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=bw(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function tf(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function cm(n,e){var t=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function My(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=Tr(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sw(n,e){e=e.checked,e!=null&&w0(n,"checked",e,!1)}function um(n,e){Sw(n,e);var t=Tr(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?hm(n,e.type,t):e.hasOwnProperty("defaultValue")&&hm(n,e.type,Tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Ry(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function hm(n,e,t){(e!=="number"||tf(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var yc=Array.isArray;function Da(n,e,t,s){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&s&&(n[t].defaultSelected=!0)}else{for(t=""+Tr(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function dm(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ly(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(M(92));if(yc(t)){if(1<t.length)throw Error(M(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Tr(t)}}function Ew(n,e){var t=Tr(e.value),s=Tr(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function Iy(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function _w(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fm(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?_w(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Yh,Cw=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Yh=Yh||document.createElement("div"),Yh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yh.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Xc(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Fc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XA=["Webkit","ms","Moz","O"];Object.keys(Fc).forEach(function(n){XA.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Fc[e]=Fc[n]})});function kw(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Fc.hasOwnProperty(n)&&Fc[n]?(""+e).trim():e+"px"}function Tw(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,i=kw(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,i):n[t]=i}}var YA=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pm(n,e){if(e){if(YA[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function mm(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gm=null;function S0(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ym=null,Fa=null,Oa=null;function Dy(n){if(n=Bh(n)){if(typeof ym!="function")throw Error(M(280));var e=n.stateNode;e&&(e=ip(e),ym(n.stateNode,n.type,e))}}function Nw(n){Fa?Oa?Oa.push(n):Oa=[n]:Fa=n}function Pw(){if(Fa){var n=Fa,e=Oa;if(Oa=Fa=null,Dy(n),e)for(n=0;n<e.length;n++)Dy(e[n])}}function Mw(n,e){return n(e)}function Rw(){}var Tp=!1;function Lw(n,e,t){if(Tp)return n(e,t);Tp=!0;try{return Mw(n,e,t)}finally{Tp=!1,(Fa!==null||Oa!==null)&&(Rw(),Pw())}}function Yc(n,e){var t=n.stateNode;if(t===null)return null;var s=ip(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(M(231,e,typeof t));return t}var vm=!1;if(ki)try{var rc={};Object.defineProperty(rc,"passive",{get:function(){vm=!0}}),window.addEventListener("test",rc,rc),window.removeEventListener("test",rc,rc)}catch{vm=!1}function KA(n,e,t,s,i,r,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Oc=!1,nf=null,sf=!1,wm=null,QA={onError:function(n){Oc=!0,nf=n}};function ZA(n,e,t,s,i,r,o,l,c){Oc=!1,nf=null,KA.apply(QA,arguments)}function JA(n,e,t,s,i,r,o,l,c){if(ZA.apply(this,arguments),Oc){if(Oc){var u=nf;Oc=!1,nf=null}else throw Error(M(198));sf||(sf=!0,wm=u)}}function ua(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Iw(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Fy(n){if(ua(n)!==n)throw Error(M(188))}function eS(n){var e=n.alternate;if(!e){if(e=ua(n),e===null)throw Error(M(188));return e!==n?null:n}for(var t=n,s=e;;){var i=t.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){t=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===t)return Fy(i),n;if(r===s)return Fy(i),e;r=r.sibling}throw Error(M(188))}if(t.return!==s.return)t=i,s=r;else{for(var o=!1,l=i.child;l;){if(l===t){o=!0,t=i,s=r;break}if(l===s){o=!0,s=i,t=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===t){o=!0,t=r,s=i;break}if(l===s){o=!0,s=r,t=i;break}l=l.sibling}if(!o)throw Error(M(189))}}if(t.alternate!==s)throw Error(M(190))}if(t.tag!==3)throw Error(M(188));return t.stateNode.current===t?n:e}function Dw(n){return n=eS(n),n!==null?Fw(n):null}function Fw(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=Fw(n);if(e!==null)return e;n=n.sibling}return null}var Ow=_n.unstable_scheduleCallback,Oy=_n.unstable_cancelCallback,tS=_n.unstable_shouldYield,nS=_n.unstable_requestPaint,$e=_n.unstable_now,sS=_n.unstable_getCurrentPriorityLevel,E0=_n.unstable_ImmediatePriority,jw=_n.unstable_UserBlockingPriority,rf=_n.unstable_NormalPriority,iS=_n.unstable_LowPriority,Hw=_n.unstable_IdlePriority,ep=null,js=null;function rS(n){if(js&&typeof js.onCommitFiberRoot=="function")try{js.onCommitFiberRoot(ep,n,void 0,(n.current.flags&128)===128)}catch{}}var us=Math.clz32?Math.clz32:lS,oS=Math.log,aS=Math.LN2;function lS(n){return n>>>=0,n===0?32:31-(oS(n)/aS|0)|0}var Kh=64,Qh=4194304;function vc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function of(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,i=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var l=o&~i;l!==0?s=vc(l):(r&=o,r!==0&&(s=vc(r)))}else o=t&~i,o!==0?s=vc(o):r!==0&&(s=vc(r));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-us(e),i=1<<t,s|=n[t],e&=~i;return s}function cS(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uS(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-us(r),l=1<<o,c=i[o];c===-1?(!(l&t)||l&s)&&(i[o]=cS(l,e)):c<=e&&(n.expiredLanes|=l),r&=~l}}function xm(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function zw(){var n=Kh;return Kh<<=1,!(Kh&4194240)&&(Kh=64),n}function Np(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Hh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-us(e),n[e]=t}function hS(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-us(t),r=1<<i;e[i]=0,s[i]=-1,n[i]=-1,t&=~r}}function _0(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-us(t),i=1<<s;i&e|n[s]&e&&(n[s]|=e),t&=~i}}var pe=0;function Bw(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var $w,C0,Ww,Uw,Gw,bm=!1,Zh=[],wr=null,xr=null,br=null,Kc=new Map,Qc=new Map,ji=[],dS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jy(n,e){switch(n){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":Kc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qc.delete(e.pointerId)}}function oc(n,e,t,s,i,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=Bh(e),e!==null&&C0(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function fS(n,e,t,s,i){switch(e){case"focusin":return wr=oc(wr,n,e,t,s,i),!0;case"dragenter":return xr=oc(xr,n,e,t,s,i),!0;case"mouseover":return br=oc(br,n,e,t,s,i),!0;case"pointerover":var r=i.pointerId;return Kc.set(r,oc(Kc.get(r)||null,n,e,t,s,i)),!0;case"gotpointercapture":return r=i.pointerId,Qc.set(r,oc(Qc.get(r)||null,n,e,t,s,i)),!0}return!1}function Vw(n){var e=Ur(n.target);if(e!==null){var t=ua(e);if(t!==null){if(e=t.tag,e===13){if(e=Iw(t),e!==null){n.blockedOn=e,Gw(n.priority,function(){Ww(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function md(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Am(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);gm=s,t.target.dispatchEvent(s),gm=null}else return e=Bh(t),e!==null&&C0(e),n.blockedOn=t,!1;e.shift()}return!0}function Hy(n,e,t){md(n)&&t.delete(e)}function pS(){bm=!1,wr!==null&&md(wr)&&(wr=null),xr!==null&&md(xr)&&(xr=null),br!==null&&md(br)&&(br=null),Kc.forEach(Hy),Qc.forEach(Hy)}function ac(n,e){n.blockedOn===e&&(n.blockedOn=null,bm||(bm=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,pS)))}function Zc(n){function e(i){return ac(i,n)}if(0<Zh.length){ac(Zh[0],n);for(var t=1;t<Zh.length;t++){var s=Zh[t];s.blockedOn===n&&(s.blockedOn=null)}}for(wr!==null&&ac(wr,n),xr!==null&&ac(xr,n),br!==null&&ac(br,n),Kc.forEach(e),Qc.forEach(e),t=0;t<ji.length;t++)s=ji[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<ji.length&&(t=ji[0],t.blockedOn===null);)Vw(t),t.blockedOn===null&&ji.shift()}var ja=Li.ReactCurrentBatchConfig,af=!0;function mS(n,e,t,s){var i=pe,r=ja.transition;ja.transition=null;try{pe=1,k0(n,e,t,s)}finally{pe=i,ja.transition=r}}function gS(n,e,t,s){var i=pe,r=ja.transition;ja.transition=null;try{pe=4,k0(n,e,t,s)}finally{pe=i,ja.transition=r}}function k0(n,e,t,s){if(af){var i=Am(n,e,t,s);if(i===null)Hp(n,e,s,lf,t),jy(n,s);else if(fS(i,n,e,t,s))s.stopPropagation();else if(jy(n,s),e&4&&-1<dS.indexOf(n)){for(;i!==null;){var r=Bh(i);if(r!==null&&$w(r),r=Am(n,e,t,s),r===null&&Hp(n,e,s,lf,t),r===i)break;i=r}i!==null&&s.stopPropagation()}else Hp(n,e,s,null,t)}}var lf=null;function Am(n,e,t,s){if(lf=null,n=S0(s),n=Ur(n),n!==null)if(e=ua(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Iw(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return lf=n,null}function qw(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sS()){case E0:return 1;case jw:return 4;case rf:case iS:return 16;case Hw:return 536870912;default:return 16}default:return 16}}var yr=null,T0=null,gd=null;function Xw(){if(gd)return gd;var n,e=T0,t=e.length,s,i="value"in yr?yr.value:yr.textContent,r=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(s=1;s<=o&&e[t-s]===i[r-s];s++);return gd=i.slice(n,1<s?1-s:void 0)}function yd(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Jh(){return!0}function zy(){return!1}function kn(n){function e(t,s,i,r,o){this._reactName=t,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Jh:zy,this.isPropagationStopped=zy,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Jh)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Jh)},persist:function(){},isPersistent:Jh}),e}var nc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N0=kn(nc),zh=De({},nc,{view:0,detail:0}),yS=kn(zh),Pp,Mp,lc,tp=De({},zh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:P0,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==lc&&(lc&&n.type==="mousemove"?(Pp=n.screenX-lc.screenX,Mp=n.screenY-lc.screenY):Mp=Pp=0,lc=n),Pp)},movementY:function(n){return"movementY"in n?n.movementY:Mp}}),By=kn(tp),vS=De({},tp,{dataTransfer:0}),wS=kn(vS),xS=De({},zh,{relatedTarget:0}),Rp=kn(xS),bS=De({},nc,{animationName:0,elapsedTime:0,pseudoElement:0}),AS=kn(bS),SS=De({},nc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ES=kn(SS),_S=De({},nc,{data:0}),$y=kn(_S),CS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NS(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=TS[n])?!!e[n]:!1}function P0(){return NS}var PS=De({},zh,{key:function(n){if(n.key){var e=CS[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=yd(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?kS[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:P0,charCode:function(n){return n.type==="keypress"?yd(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?yd(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),MS=kn(PS),RS=De({},tp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wy=kn(RS),LS=De({},zh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:P0}),IS=kn(LS),DS=De({},nc,{propertyName:0,elapsedTime:0,pseudoElement:0}),FS=kn(DS),OS=De({},tp,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),jS=kn(OS),HS=[9,13,27,32],M0=ki&&"CompositionEvent"in window,jc=null;ki&&"documentMode"in document&&(jc=document.documentMode);var zS=ki&&"TextEvent"in window&&!jc,Yw=ki&&(!M0||jc&&8<jc&&11>=jc),Uy=" ",Gy=!1;function Kw(n,e){switch(n){case"keyup":return HS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qw(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Sa=!1;function BS(n,e){switch(n){case"compositionend":return Qw(e);case"keypress":return e.which!==32?null:(Gy=!0,Uy);case"textInput":return n=e.data,n===Uy&&Gy?null:n;default:return null}}function $S(n,e){if(Sa)return n==="compositionend"||!M0&&Kw(n,e)?(n=Xw(),gd=T0=yr=null,Sa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Yw&&e.locale!=="ko"?null:e.data;default:return null}}var WS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vy(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!WS[n.type]:e==="textarea"}function Zw(n,e,t,s){Nw(s),e=cf(e,"onChange"),0<e.length&&(t=new N0("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var Hc=null,Jc=null;function US(n){cx(n,0)}function np(n){var e=Ca(n);if(Aw(e))return n}function GS(n,e){if(n==="change")return e}var Jw=!1;if(ki){var Lp;if(ki){var Ip="oninput"in document;if(!Ip){var qy=document.createElement("div");qy.setAttribute("oninput","return;"),Ip=typeof qy.oninput=="function"}Lp=Ip}else Lp=!1;Jw=Lp&&(!document.documentMode||9<document.documentMode)}function Xy(){Hc&&(Hc.detachEvent("onpropertychange",ex),Jc=Hc=null)}function ex(n){if(n.propertyName==="value"&&np(Jc)){var e=[];Zw(e,Jc,n,S0(n)),Lw(US,e)}}function VS(n,e,t){n==="focusin"?(Xy(),Hc=e,Jc=t,Hc.attachEvent("onpropertychange",ex)):n==="focusout"&&Xy()}function qS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return np(Jc)}function XS(n,e){if(n==="click")return np(e)}function YS(n,e){if(n==="input"||n==="change")return np(e)}function KS(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ds=typeof Object.is=="function"?Object.is:KS;function eu(n,e){if(ds(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var i=t[s];if(!im.call(e,i)||!ds(n[i],e[i]))return!1}return!0}function Yy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ky(n,e){var t=Yy(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Yy(t)}}function tx(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?tx(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function nx(){for(var n=window,e=tf();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=tf(n.document)}return e}function R0(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function QS(n){var e=nx(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&tx(t.ownerDocument.documentElement,t)){if(s!==null&&R0(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!n.extend&&r>s&&(i=s,s=r,r=i),i=Ky(t,r);var o=Ky(t,s);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),r>s?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ZS=ki&&"documentMode"in document&&11>=document.documentMode,Ea=null,Sm=null,zc=null,Em=!1;function Qy(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Em||Ea==null||Ea!==tf(s)||(s=Ea,"selectionStart"in s&&R0(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),zc&&eu(zc,s)||(zc=s,s=cf(Sm,"onSelect"),0<s.length&&(e=new N0("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=Ea)))}function ed(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var _a={animationend:ed("Animation","AnimationEnd"),animationiteration:ed("Animation","AnimationIteration"),animationstart:ed("Animation","AnimationStart"),transitionend:ed("Transition","TransitionEnd")},Dp={},sx={};ki&&(sx=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function sp(n){if(Dp[n])return Dp[n];if(!_a[n])return n;var e=_a[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in sx)return Dp[n]=e[t];return n}var ix=sp("animationend"),rx=sp("animationiteration"),ox=sp("animationstart"),ax=sp("transitionend"),lx=new Map,Zy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(n,e){lx.set(n,e),ca(e,[n])}for(var Fp=0;Fp<Zy.length;Fp++){var Op=Zy[Fp],JS=Op.toLowerCase(),eE=Op[0].toUpperCase()+Op.slice(1);Lr(JS,"on"+eE)}Lr(ix,"onAnimationEnd");Lr(rx,"onAnimationIteration");Lr(ox,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(ax,"onTransitionEnd");Xl("onMouseEnter",["mouseout","mouseover"]);Xl("onMouseLeave",["mouseout","mouseover"]);Xl("onPointerEnter",["pointerout","pointerover"]);Xl("onPointerLeave",["pointerout","pointerover"]);ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ca("onBeforeInput",["compositionend","keypress","textInput","paste"]);ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tE=new Set("cancel close invalid load scroll toggle".split(" ").concat(wc));function Jy(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,JA(s,e,void 0,n),n.currentTarget=null}function cx(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==r&&i.isPropagationStopped())break e;Jy(i,l,u),r=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==r&&i.isPropagationStopped())break e;Jy(i,l,u),r=c}}}if(sf)throw n=wm,sf=!1,wm=null,n}function be(n,e){var t=e[Nm];t===void 0&&(t=e[Nm]=new Set);var s=n+"__bubble";t.has(s)||(ux(e,n,2,!1),t.add(s))}function jp(n,e,t){var s=0;e&&(s|=4),ux(t,n,s,e)}var td="_reactListening"+Math.random().toString(36).slice(2);function tu(n){if(!n[td]){n[td]=!0,yw.forEach(function(t){t!=="selectionchange"&&(tE.has(t)||jp(t,!1,n),jp(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[td]||(e[td]=!0,jp("selectionchange",!1,e))}}function ux(n,e,t,s){switch(qw(e)){case 1:var i=mS;break;case 4:i=gS;break;default:i=k0}t=i.bind(null,e,t,n),i=void 0,!vm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function Hp(n,e,t,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Ur(l),o===null)return;if(c=o.tag,c===5||c===6){s=r=o;continue e}l=l.parentNode}}s=s.return}Lw(function(){var u=r,h=S0(t),d=[];e:{var f=lx.get(n);if(f!==void 0){var p=N0,g=n;switch(n){case"keypress":if(yd(t)===0)break e;case"keydown":case"keyup":p=MS;break;case"focusin":g="focus",p=Rp;break;case"focusout":g="blur",p=Rp;break;case"beforeblur":case"afterblur":p=Rp;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=By;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=wS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=IS;break;case ix:case rx:case ox:p=AS;break;case ax:p=FS;break;case"scroll":p=yS;break;case"wheel":p=jS;break;case"copy":case"cut":case"paste":p=ES;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Wy}var b=(e&4)!==0,E=!b&&n==="scroll",y=b?f!==null?f+"Capture":null:f;b=[];for(var v=u,S;v!==null;){S=v;var _=S.stateNode;if(S.tag===5&&_!==null&&(S=_,y!==null&&(_=Yc(v,y),_!=null&&b.push(nu(v,_,S)))),E)break;v=v.return}0<b.length&&(f=new p(f,g,null,t,h),d.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==gm&&(g=t.relatedTarget||t.fromElement)&&(Ur(g)||g[Ti]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=t.relatedTarget||t.toElement,p=u,g=g?Ur(g):null,g!==null&&(E=ua(g),g!==E||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(b=By,_="onMouseLeave",y="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(b=Wy,_="onPointerLeave",y="onPointerEnter",v="pointer"),E=p==null?f:Ca(p),S=g==null?f:Ca(g),f=new b(_,v+"leave",p,t,h),f.target=E,f.relatedTarget=S,_=null,Ur(h)===u&&(b=new b(y,v+"enter",g,t,h),b.target=S,b.relatedTarget=E,_=b),E=_,p&&g)t:{for(b=p,y=g,v=0,S=b;S;S=fa(S))v++;for(S=0,_=y;_;_=fa(_))S++;for(;0<v-S;)b=fa(b),v--;for(;0<S-v;)y=fa(y),S--;for(;v--;){if(b===y||y!==null&&b===y.alternate)break t;b=fa(b),y=fa(y)}b=null}else b=null;p!==null&&ev(d,f,p,b,!1),g!==null&&E!==null&&ev(d,E,g,b,!0)}}e:{if(f=u?Ca(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=GS;else if(Vy(f))if(Jw)C=YS;else{C=qS;var T=VS}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=XS);if(C&&(C=C(n,u))){Zw(d,C,t,h);break e}T&&T(n,f,u),n==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&hm(f,"number",f.value)}switch(T=u?Ca(u):window,n){case"focusin":(Vy(T)||T.contentEditable==="true")&&(Ea=T,Sm=u,zc=null);break;case"focusout":zc=Sm=Ea=null;break;case"mousedown":Em=!0;break;case"contextmenu":case"mouseup":case"dragend":Em=!1,Qy(d,t,h);break;case"selectionchange":if(ZS)break;case"keydown":case"keyup":Qy(d,t,h)}var k;if(M0)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Sa?Kw(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(Yw&&t.locale!=="ko"&&(Sa||N!=="onCompositionStart"?N==="onCompositionEnd"&&Sa&&(k=Xw()):(yr=h,T0="value"in yr?yr.value:yr.textContent,Sa=!0)),T=cf(u,N),0<T.length&&(N=new $y(N,n,null,t,h),d.push({event:N,listeners:T}),k?N.data=k:(k=Qw(t),k!==null&&(N.data=k)))),(k=zS?BS(n,t):$S(n,t))&&(u=cf(u,"onBeforeInput"),0<u.length&&(h=new $y("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=k))}cx(d,e)})}function nu(n,e,t){return{instance:n,listener:e,currentTarget:t}}function cf(n,e){for(var t=e+"Capture",s=[];n!==null;){var i=n,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=Yc(n,t),r!=null&&s.unshift(nu(n,r,i)),r=Yc(n,e),r!=null&&s.push(nu(n,r,i))),n=n.return}return s}function fa(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ev(n,e,t,s,i){for(var r=e._reactName,o=[];t!==null&&t!==s;){var l=t,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,i?(c=Yc(t,r),c!=null&&o.unshift(nu(t,c,l))):i||(c=Yc(t,r),c!=null&&o.push(nu(t,c,l)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var nE=/\r\n?/g,sE=/\u0000|\uFFFD/g;function tv(n){return(typeof n=="string"?n:""+n).replace(nE,`
`).replace(sE,"")}function nd(n,e,t){if(e=tv(e),tv(n)!==e&&t)throw Error(M(425))}function uf(){}var _m=null,Cm=null;function km(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tm=typeof setTimeout=="function"?setTimeout:void 0,iE=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,rE=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(n){return nv.resolve(null).then(n).catch(oE)}:Tm;function oE(n){setTimeout(function(){throw n})}function zp(n,e){var t=e,s=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(s===0){n.removeChild(i),Zc(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=i}while(t);Zc(e)}function Ar(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function sv(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var sc=Math.random().toString(36).slice(2),Os="__reactFiber$"+sc,su="__reactProps$"+sc,Ti="__reactContainer$"+sc,Nm="__reactEvents$"+sc,aE="__reactListeners$"+sc,lE="__reactHandles$"+sc;function Ur(n){var e=n[Os];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ti]||t[Os]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=sv(n);n!==null;){if(t=n[Os])return t;n=sv(n)}return e}n=t,t=n.parentNode}return null}function Bh(n){return n=n[Os]||n[Ti],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ca(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(M(33))}function ip(n){return n[su]||null}var Pm=[],ka=-1;function Ir(n){return{current:n}}function Ee(n){0>ka||(n.current=Pm[ka],Pm[ka]=null,ka--)}function xe(n,e){ka++,Pm[ka]=n.current,n.current=e}var Nr={},Mt=Ir(Nr),nn=Ir(!1),ea=Nr;function Yl(n,e){var t=n.type.contextTypes;if(!t)return Nr;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in t)i[r]=e[r];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function sn(n){return n=n.childContextTypes,n!=null}function hf(){Ee(nn),Ee(Mt)}function iv(n,e,t){if(Mt.current!==Nr)throw Error(M(168));xe(Mt,e),xe(nn,t)}function hx(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(M(108,VA(n)||"Unknown",i));return De({},t,s)}function df(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Nr,ea=Mt.current,xe(Mt,n),xe(nn,nn.current),!0}function rv(n,e,t){var s=n.stateNode;if(!s)throw Error(M(169));t?(n=hx(n,e,ea),s.__reactInternalMemoizedMergedChildContext=n,Ee(nn),Ee(Mt),xe(Mt,n)):Ee(nn),xe(nn,t)}var Ys=null,rp=!1,Bp=!1;function dx(n){Ys===null?Ys=[n]:Ys.push(n)}function cE(n){rp=!0,dx(n)}function Dr(){if(!Bp&&Ys!==null){Bp=!0;var n=0,e=pe;try{var t=Ys;for(pe=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}Ys=null,rp=!1}catch(i){throw Ys!==null&&(Ys=Ys.slice(n+1)),Ow(E0,Dr),i}finally{pe=e,Bp=!1}}return null}var Ta=[],Na=0,ff=null,pf=0,Fn=[],On=0,ta=null,Ai=1,Si="";function Or(n,e){Ta[Na++]=pf,Ta[Na++]=ff,ff=n,pf=e}function fx(n,e,t){Fn[On++]=Ai,Fn[On++]=Si,Fn[On++]=ta,ta=n;var s=Ai;n=Si;var i=32-us(s)-1;s&=~(1<<i),t+=1;var r=32-us(e)+i;if(30<r){var o=i-i%5;r=(s&(1<<o)-1).toString(32),s>>=o,i-=o,Ai=1<<32-us(e)+i|t<<i|s,Si=r+n}else Ai=1<<r|t<<i|s,Si=n}function L0(n){n.return!==null&&(Or(n,1),fx(n,1,0))}function I0(n){for(;n===ff;)ff=Ta[--Na],Ta[Na]=null,pf=Ta[--Na],Ta[Na]=null;for(;n===ta;)ta=Fn[--On],Fn[On]=null,Si=Fn[--On],Fn[On]=null,Ai=Fn[--On],Fn[On]=null}var Sn=null,An=null,Ne=!1,ls=null;function px(n,e){var t=zn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function ov(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Sn=n,An=Ar(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Sn=n,An=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ta!==null?{id:Ai,overflow:Si}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=zn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Sn=n,An=null,!0):!1;default:return!1}}function Mm(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Rm(n){if(Ne){var e=An;if(e){var t=e;if(!ov(n,e)){if(Mm(n))throw Error(M(418));e=Ar(t.nextSibling);var s=Sn;e&&ov(n,e)?px(s,t):(n.flags=n.flags&-4097|2,Ne=!1,Sn=n)}}else{if(Mm(n))throw Error(M(418));n.flags=n.flags&-4097|2,Ne=!1,Sn=n}}}function av(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Sn=n}function sd(n){if(n!==Sn)return!1;if(!Ne)return av(n),Ne=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!km(n.type,n.memoizedProps)),e&&(e=An)){if(Mm(n))throw mx(),Error(M(418));for(;e;)px(n,e),e=Ar(e.nextSibling)}if(av(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(M(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){An=Ar(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}An=null}}else An=Sn?Ar(n.stateNode.nextSibling):null;return!0}function mx(){for(var n=An;n;)n=Ar(n.nextSibling)}function Kl(){An=Sn=null,Ne=!1}function D0(n){ls===null?ls=[n]:ls.push(n)}var uE=Li.ReactCurrentBatchConfig;function cc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(M(309));var s=t.stateNode}if(!s)throw Error(M(147,n));var i=s,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var l=i.refs;o===null?delete l[r]:l[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(M(284));if(!t._owner)throw Error(M(290,n))}return n}function id(n,e){throw n=Object.prototype.toString.call(e),Error(M(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function lv(n){var e=n._init;return e(n._payload)}function gx(n){function e(y,v){if(n){var S=y.deletions;S===null?(y.deletions=[v],y.flags|=16):S.push(v)}}function t(y,v){if(!n)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function s(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Cr(y,v),y.index=0,y.sibling=null,y}function r(y,v,S){return y.index=S,n?(S=y.alternate,S!==null?(S=S.index,S<v?(y.flags|=2,v):S):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function l(y,v,S,_){return v===null||v.tag!==6?(v=Xp(S,y.mode,_),v.return=y,v):(v=i(v,S),v.return=y,v)}function c(y,v,S,_){var C=S.type;return C===Aa?h(y,v,S.props.children,_,S.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Fi&&lv(C)===v.type)?(_=i(v,S.props),_.ref=cc(y,v,S),_.return=y,_):(_=Ed(S.type,S.key,S.props,null,y.mode,_),_.ref=cc(y,v,S),_.return=y,_)}function u(y,v,S,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=Yp(S,y.mode,_),v.return=y,v):(v=i(v,S.children||[]),v.return=y,v)}function h(y,v,S,_,C){return v===null||v.tag!==7?(v=Jo(S,y.mode,_,C),v.return=y,v):(v=i(v,S),v.return=y,v)}function d(y,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Xp(""+v,y.mode,S),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case qh:return S=Ed(v.type,v.key,v.props,null,y.mode,S),S.ref=cc(y,null,v),S.return=y,S;case ba:return v=Yp(v,y.mode,S),v.return=y,v;case Fi:var _=v._init;return d(y,_(v._payload),S)}if(yc(v)||ic(v))return v=Jo(v,y.mode,S,null),v.return=y,v;id(y,v)}return null}function f(y,v,S,_){var C=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return C!==null?null:l(y,v,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case qh:return S.key===C?c(y,v,S,_):null;case ba:return S.key===C?u(y,v,S,_):null;case Fi:return C=S._init,f(y,v,C(S._payload),_)}if(yc(S)||ic(S))return C!==null?null:h(y,v,S,_,null);id(y,S)}return null}function p(y,v,S,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(S)||null,l(v,y,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case qh:return y=y.get(_.key===null?S:_.key)||null,c(v,y,_,C);case ba:return y=y.get(_.key===null?S:_.key)||null,u(v,y,_,C);case Fi:var T=_._init;return p(y,v,S,T(_._payload),C)}if(yc(_)||ic(_))return y=y.get(S)||null,h(v,y,_,C,null);id(v,_)}return null}function g(y,v,S,_){for(var C=null,T=null,k=v,N=v=0,P=null;k!==null&&N<S.length;N++){k.index>N?(P=k,k=null):P=k.sibling;var L=f(y,k,S[N],_);if(L===null){k===null&&(k=P);break}n&&k&&L.alternate===null&&e(y,k),v=r(L,v,N),T===null?C=L:T.sibling=L,T=L,k=P}if(N===S.length)return t(y,k),Ne&&Or(y,N),C;if(k===null){for(;N<S.length;N++)k=d(y,S[N],_),k!==null&&(v=r(k,v,N),T===null?C=k:T.sibling=k,T=k);return Ne&&Or(y,N),C}for(k=s(y,k);N<S.length;N++)P=p(k,y,N,S[N],_),P!==null&&(n&&P.alternate!==null&&k.delete(P.key===null?N:P.key),v=r(P,v,N),T===null?C=P:T.sibling=P,T=P);return n&&k.forEach(function(z){return e(y,z)}),Ne&&Or(y,N),C}function b(y,v,S,_){var C=ic(S);if(typeof C!="function")throw Error(M(150));if(S=C.call(S),S==null)throw Error(M(151));for(var T=C=null,k=v,N=v=0,P=null,L=S.next();k!==null&&!L.done;N++,L=S.next()){k.index>N?(P=k,k=null):P=k.sibling;var z=f(y,k,L.value,_);if(z===null){k===null&&(k=P);break}n&&k&&z.alternate===null&&e(y,k),v=r(z,v,N),T===null?C=z:T.sibling=z,T=z,k=P}if(L.done)return t(y,k),Ne&&Or(y,N),C;if(k===null){for(;!L.done;N++,L=S.next())L=d(y,L.value,_),L!==null&&(v=r(L,v,N),T===null?C=L:T.sibling=L,T=L);return Ne&&Or(y,N),C}for(k=s(y,k);!L.done;N++,L=S.next())L=p(k,y,N,L.value,_),L!==null&&(n&&L.alternate!==null&&k.delete(L.key===null?N:L.key),v=r(L,v,N),T===null?C=L:T.sibling=L,T=L);return n&&k.forEach(function(oe){return e(y,oe)}),Ne&&Or(y,N),C}function E(y,v,S,_){if(typeof S=="object"&&S!==null&&S.type===Aa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case qh:e:{for(var C=S.key,T=v;T!==null;){if(T.key===C){if(C=S.type,C===Aa){if(T.tag===7){t(y,T.sibling),v=i(T,S.props.children),v.return=y,y=v;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Fi&&lv(C)===T.type){t(y,T.sibling),v=i(T,S.props),v.ref=cc(y,T,S),v.return=y,y=v;break e}t(y,T);break}else e(y,T);T=T.sibling}S.type===Aa?(v=Jo(S.props.children,y.mode,_,S.key),v.return=y,y=v):(_=Ed(S.type,S.key,S.props,null,y.mode,_),_.ref=cc(y,v,S),_.return=y,y=_)}return o(y);case ba:e:{for(T=S.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){t(y,v.sibling),v=i(v,S.children||[]),v.return=y,y=v;break e}else{t(y,v);break}else e(y,v);v=v.sibling}v=Yp(S,y.mode,_),v.return=y,y=v}return o(y);case Fi:return T=S._init,E(y,v,T(S._payload),_)}if(yc(S))return g(y,v,S,_);if(ic(S))return b(y,v,S,_);id(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(t(y,v.sibling),v=i(v,S),v.return=y,y=v):(t(y,v),v=Xp(S,y.mode,_),v.return=y,y=v),o(y)):t(y,v)}return E}var Ql=gx(!0),yx=gx(!1),mf=Ir(null),gf=null,Pa=null,F0=null;function O0(){F0=Pa=gf=null}function j0(n){var e=mf.current;Ee(mf),n._currentValue=e}function Lm(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function Ha(n,e){gf=n,F0=Pa=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(tn=!0),n.firstContext=null)}function Wn(n){var e=n._currentValue;if(F0!==n)if(n={context:n,memoizedValue:e,next:null},Pa===null){if(gf===null)throw Error(M(308));Pa=n,gf.dependencies={lanes:0,firstContext:n}}else Pa=Pa.next=n;return e}var Gr=null;function H0(n){Gr===null?Gr=[n]:Gr.push(n)}function vx(n,e,t,s){var i=e.interleaved;return i===null?(t.next=t,H0(e)):(t.next=i.next,i.next=t),e.interleaved=t,Ni(n,s)}function Ni(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Oi=!1;function z0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wx(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ei(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Sr(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,ae&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,Ni(n,t)}return i=s.interleaved,i===null?(e.next=e,H0(s)):(e.next=i.next,i.next=e),s.interleaved=e,Ni(n,t)}function vd(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,_0(n,t)}}function cv(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var i=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?i=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?i=r=e:r=r.next=e}else i=r=e;t={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function yf(n,e,t,s){var i=n.updateQueue;Oi=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=i.baseState;o=0,h=u=c=null,l=r;do{var f=l.lane,p=l.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=n,b=l;switch(f=e,p=t,b.tag){case 1:if(g=b.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=b.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=De({},d,f);break e;case 2:Oi=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);sa|=o,n.lanes=o,n.memoizedState=d}}function uv(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],i=s.callback;if(i!==null){if(s.callback=null,s=t,typeof i!="function")throw Error(M(191,i));i.call(s)}}}var $h={},Hs=Ir($h),iu=Ir($h),ru=Ir($h);function Vr(n){if(n===$h)throw Error(M(174));return n}function B0(n,e){switch(xe(ru,e),xe(iu,n),xe(Hs,$h),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fm(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=fm(e,n)}Ee(Hs),xe(Hs,e)}function Zl(){Ee(Hs),Ee(iu),Ee(ru)}function xx(n){Vr(ru.current);var e=Vr(Hs.current),t=fm(e,n.type);e!==t&&(xe(iu,n),xe(Hs,t))}function $0(n){iu.current===n&&(Ee(Hs),Ee(iu))}var Re=Ir(0);function vf(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $p=[];function W0(){for(var n=0;n<$p.length;n++)$p[n]._workInProgressVersionPrimary=null;$p.length=0}var wd=Li.ReactCurrentDispatcher,Wp=Li.ReactCurrentBatchConfig,na=0,Ie=null,Ze=null,lt=null,wf=!1,Bc=!1,ou=0,hE=0;function wt(){throw Error(M(321))}function U0(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ds(n[t],e[t]))return!1;return!0}function G0(n,e,t,s,i,r){if(na=r,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wd.current=n===null||n.memoizedState===null?mE:gE,n=t(s,i),Bc){r=0;do{if(Bc=!1,ou=0,25<=r)throw Error(M(301));r+=1,lt=Ze=null,e.updateQueue=null,wd.current=yE,n=t(s,i)}while(Bc)}if(wd.current=xf,e=Ze!==null&&Ze.next!==null,na=0,lt=Ze=Ie=null,wf=!1,e)throw Error(M(300));return n}function V0(){var n=ou!==0;return ou=0,n}function ws(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Ie.memoizedState=lt=n:lt=lt.next=n,lt}function Un(){if(Ze===null){var n=Ie.alternate;n=n!==null?n.memoizedState:null}else n=Ze.next;var e=lt===null?Ie.memoizedState:lt.next;if(e!==null)lt=e,Ze=n;else{if(n===null)throw Error(M(310));Ze=n,n={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},lt===null?Ie.memoizedState=lt=n:lt=lt.next=n}return lt}function au(n,e){return typeof e=="function"?e(n):e}function Up(n){var e=Un(),t=e.queue;if(t===null)throw Error(M(311));t.lastRenderedReducer=n;var s=Ze,i=s.baseQueue,r=t.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}s.baseQueue=i=r,t.pending=null}if(i!==null){r=i.next,s=s.baseState;var l=o=null,c=null,u=r;do{var h=u.lane;if((na&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=s):c=c.next=d,Ie.lanes|=h,sa|=h}u=u.next}while(u!==null&&u!==r);c===null?o=s:c.next=l,ds(s,e.memoizedState)||(tn=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,t.lastRenderedState=s}if(n=t.interleaved,n!==null){i=n;do r=i.lane,Ie.lanes|=r,sa|=r,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Gp(n){var e=Un(),t=e.queue;if(t===null)throw Error(M(311));t.lastRenderedReducer=n;var s=t.dispatch,i=t.pending,r=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do r=n(r,o.action),o=o.next;while(o!==i);ds(r,e.memoizedState)||(tn=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,s]}function bx(){}function Ax(n,e){var t=Ie,s=Un(),i=e(),r=!ds(s.memoizedState,i);if(r&&(s.memoizedState=i,tn=!0),s=s.queue,q0(_x.bind(null,t,s,n),[n]),s.getSnapshot!==e||r||lt!==null&&lt.memoizedState.tag&1){if(t.flags|=2048,lu(9,Ex.bind(null,t,s,i,e),void 0,null),ct===null)throw Error(M(349));na&30||Sx(t,e,i)}return i}function Sx(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Ex(n,e,t,s){e.value=t,e.getSnapshot=s,Cx(e)&&kx(n)}function _x(n,e,t){return t(function(){Cx(e)&&kx(n)})}function Cx(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ds(n,t)}catch{return!0}}function kx(n){var e=Ni(n,1);e!==null&&hs(e,n,1,-1)}function hv(n){var e=ws();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:au,lastRenderedState:n},e.queue=n,n=n.dispatch=pE.bind(null,Ie,n),[e.memoizedState,n]}function lu(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function Tx(){return Un().memoizedState}function xd(n,e,t,s){var i=ws();Ie.flags|=n,i.memoizedState=lu(1|e,t,void 0,s===void 0?null:s)}function op(n,e,t,s){var i=Un();s=s===void 0?null:s;var r=void 0;if(Ze!==null){var o=Ze.memoizedState;if(r=o.destroy,s!==null&&U0(s,o.deps)){i.memoizedState=lu(e,t,r,s);return}}Ie.flags|=n,i.memoizedState=lu(1|e,t,r,s)}function dv(n,e){return xd(8390656,8,n,e)}function q0(n,e){return op(2048,8,n,e)}function Nx(n,e){return op(4,2,n,e)}function Px(n,e){return op(4,4,n,e)}function Mx(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Rx(n,e,t){return t=t!=null?t.concat([n]):null,op(4,4,Mx.bind(null,e,n),t)}function X0(){}function Lx(n,e){var t=Un();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&U0(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function Ix(n,e){var t=Un();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&U0(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function Dx(n,e,t){return na&21?(ds(t,e)||(t=zw(),Ie.lanes|=t,sa|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,tn=!0),n.memoizedState=t)}function dE(n,e){var t=pe;pe=t!==0&&4>t?t:4,n(!0);var s=Wp.transition;Wp.transition={};try{n(!1),e()}finally{pe=t,Wp.transition=s}}function Fx(){return Un().memoizedState}function fE(n,e,t){var s=_r(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},Ox(n))jx(e,t);else if(t=vx(n,e,t,s),t!==null){var i=zt();hs(t,n,s,i),Hx(t,e,s)}}function pE(n,e,t){var s=_r(n),i={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(Ox(n))jx(e,i);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,l=r(o,t);if(i.hasEagerState=!0,i.eagerState=l,ds(l,o)){var c=e.interleaved;c===null?(i.next=i,H0(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}t=vx(n,e,i,s),t!==null&&(i=zt(),hs(t,n,s,i),Hx(t,e,s))}}function Ox(n){var e=n.alternate;return n===Ie||e!==null&&e===Ie}function jx(n,e){Bc=wf=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Hx(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,_0(n,t)}}var xf={readContext:Wn,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useInsertionEffect:wt,useLayoutEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useMutableSource:wt,useSyncExternalStore:wt,useId:wt,unstable_isNewReconciler:!1},mE={readContext:Wn,useCallback:function(n,e){return ws().memoizedState=[n,e===void 0?null:e],n},useContext:Wn,useEffect:dv,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,xd(4194308,4,Mx.bind(null,e,n),t)},useLayoutEffect:function(n,e){return xd(4194308,4,n,e)},useInsertionEffect:function(n,e){return xd(4,2,n,e)},useMemo:function(n,e){var t=ws();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=ws();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=fE.bind(null,Ie,n),[s.memoizedState,n]},useRef:function(n){var e=ws();return n={current:n},e.memoizedState=n},useState:hv,useDebugValue:X0,useDeferredValue:function(n){return ws().memoizedState=n},useTransition:function(){var n=hv(!1),e=n[0];return n=dE.bind(null,n[1]),ws().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=Ie,i=ws();if(Ne){if(t===void 0)throw Error(M(407));t=t()}else{if(t=e(),ct===null)throw Error(M(349));na&30||Sx(s,e,t)}i.memoizedState=t;var r={value:t,getSnapshot:e};return i.queue=r,dv(_x.bind(null,s,r,n),[n]),s.flags|=2048,lu(9,Ex.bind(null,s,r,t,e),void 0,null),t},useId:function(){var n=ws(),e=ct.identifierPrefix;if(Ne){var t=Si,s=Ai;t=(s&~(1<<32-us(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=ou++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=hE++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},gE={readContext:Wn,useCallback:Lx,useContext:Wn,useEffect:q0,useImperativeHandle:Rx,useInsertionEffect:Nx,useLayoutEffect:Px,useMemo:Ix,useReducer:Up,useRef:Tx,useState:function(){return Up(au)},useDebugValue:X0,useDeferredValue:function(n){var e=Un();return Dx(e,Ze.memoizedState,n)},useTransition:function(){var n=Up(au)[0],e=Un().memoizedState;return[n,e]},useMutableSource:bx,useSyncExternalStore:Ax,useId:Fx,unstable_isNewReconciler:!1},yE={readContext:Wn,useCallback:Lx,useContext:Wn,useEffect:q0,useImperativeHandle:Rx,useInsertionEffect:Nx,useLayoutEffect:Px,useMemo:Ix,useReducer:Gp,useRef:Tx,useState:function(){return Gp(au)},useDebugValue:X0,useDeferredValue:function(n){var e=Un();return Ze===null?e.memoizedState=n:Dx(e,Ze.memoizedState,n)},useTransition:function(){var n=Gp(au)[0],e=Un().memoizedState;return[n,e]},useMutableSource:bx,useSyncExternalStore:Ax,useId:Fx,unstable_isNewReconciler:!1};function qn(n,e){if(n&&n.defaultProps){e=De({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Im(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:De({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var ap={isMounted:function(n){return(n=n._reactInternals)?ua(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=zt(),i=_r(n),r=Ei(s,i);r.payload=e,t!=null&&(r.callback=t),e=Sr(n,r,i),e!==null&&(hs(e,n,i,s),vd(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=zt(),i=_r(n),r=Ei(s,i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Sr(n,r,i),e!==null&&(hs(e,n,i,s),vd(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=zt(),s=_r(n),i=Ei(t,s);i.tag=2,e!=null&&(i.callback=e),e=Sr(n,i,s),e!==null&&(hs(e,n,s,t),vd(e,n,s))}};function fv(n,e,t,s,i,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,r,o):e.prototype&&e.prototype.isPureReactComponent?!eu(t,s)||!eu(i,r):!0}function zx(n,e,t){var s=!1,i=Nr,r=e.contextType;return typeof r=="object"&&r!==null?r=Wn(r):(i=sn(e)?ea:Mt.current,s=e.contextTypes,r=(s=s!=null)?Yl(n,i):Nr),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ap,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=r),e}function pv(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&ap.enqueueReplaceState(e,e.state,null)}function Dm(n,e,t,s){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},z0(n);var r=e.contextType;typeof r=="object"&&r!==null?i.context=Wn(r):(r=sn(e)?ea:Mt.current,i.context=Yl(n,r)),i.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(Im(n,e,r,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ap.enqueueReplaceState(i,i.state,null),yf(n,t,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Jl(n,e){try{var t="",s=e;do t+=GA(s),s=s.return;while(s);var i=t}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:i,digest:null}}function Vp(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Fm(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var vE=typeof WeakMap=="function"?WeakMap:Map;function Bx(n,e,t){t=Ei(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){Af||(Af=!0,Vm=s),Fm(n,e)},t}function $x(n,e,t){t=Ei(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;t.payload=function(){return s(i)},t.callback=function(){Fm(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){Fm(n,e),typeof s!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function mv(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new vE;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(t)||(i.add(t),n=RE.bind(null,n,e,t),e.then(n,n))}function gv(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function yv(n,e,t,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ei(-1,1),e.tag=2,Sr(t,e,1))),t.lanes|=1),n)}var wE=Li.ReactCurrentOwner,tn=!1;function Ht(n,e,t,s){e.child=n===null?yx(e,null,t,s):Ql(e,n.child,t,s)}function vv(n,e,t,s,i){t=t.render;var r=e.ref;return Ha(e,i),s=G0(n,e,t,s,r,i),t=V0(),n!==null&&!tn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Pi(n,e,i)):(Ne&&t&&L0(e),e.flags|=1,Ht(n,e,s,i),e.child)}function wv(n,e,t,s,i){if(n===null){var r=t.type;return typeof r=="function"&&!ny(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,Wx(n,e,r,s,i)):(n=Ed(t.type,null,s,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&i)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:eu,t(o,s)&&n.ref===e.ref)return Pi(n,e,i)}return e.flags|=1,n=Cr(r,s),n.ref=e.ref,n.return=e,e.child=n}function Wx(n,e,t,s,i){if(n!==null){var r=n.memoizedProps;if(eu(r,s)&&n.ref===e.ref)if(tn=!1,e.pendingProps=s=r,(n.lanes&i)!==0)n.flags&131072&&(tn=!0);else return e.lanes=n.lanes,Pi(n,e,i)}return Om(n,e,t,s,i)}function Ux(n,e,t){var s=e.pendingProps,i=s.children,r=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(Ra,wn),wn|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,xe(Ra,wn),wn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:t,xe(Ra,wn),wn|=s}else r!==null?(s=r.baseLanes|t,e.memoizedState=null):s=t,xe(Ra,wn),wn|=s;return Ht(n,e,i,t),e.child}function Gx(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Om(n,e,t,s,i){var r=sn(t)?ea:Mt.current;return r=Yl(e,r),Ha(e,i),t=G0(n,e,t,s,r,i),s=V0(),n!==null&&!tn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Pi(n,e,i)):(Ne&&s&&L0(e),e.flags|=1,Ht(n,e,t,i),e.child)}function xv(n,e,t,s,i){if(sn(t)){var r=!0;df(e)}else r=!1;if(Ha(e,i),e.stateNode===null)bd(n,e),zx(e,t,s),Dm(e,t,s,i),s=!0;else if(n===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Wn(u):(u=sn(t)?ea:Mt.current,u=Yl(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&pv(e,o,s,u),Oi=!1;var f=e.memoizedState;o.state=f,yf(e,s,o,i),c=e.memoizedState,l!==s||f!==c||nn.current||Oi?(typeof h=="function"&&(Im(e,t,h,s),c=e.memoizedState),(l=Oi||fv(e,t,l,s,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,wx(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:qn(e.type,l),o.props=u,d=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=Wn(c):(c=sn(t)?ea:Mt.current,c=Yl(e,c));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&pv(e,o,s,c),Oi=!1,f=e.memoizedState,o.state=f,yf(e,s,o,i);var g=e.memoizedState;l!==d||f!==g||nn.current||Oi?(typeof p=="function"&&(Im(e,t,p,s),g=e.memoizedState),(u=Oi||fv(e,t,u,s,f,g,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,g,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=g),o.props=s,o.state=g,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),s=!1)}return jm(n,e,t,s,r,i)}function jm(n,e,t,s,i,r){Gx(n,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&rv(e,t,!1),Pi(n,e,r);s=e.stateNode,wE.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&o?(e.child=Ql(e,n.child,null,r),e.child=Ql(e,null,l,r)):Ht(n,e,l,r),e.memoizedState=s.state,i&&rv(e,t,!0),e.child}function Vx(n){var e=n.stateNode;e.pendingContext?iv(n,e.pendingContext,e.pendingContext!==e.context):e.context&&iv(n,e.context,!1),B0(n,e.containerInfo)}function bv(n,e,t,s,i){return Kl(),D0(i),e.flags|=256,Ht(n,e,t,s),e.child}var Hm={dehydrated:null,treeContext:null,retryLane:0};function zm(n){return{baseLanes:n,cachePool:null,transitions:null}}function qx(n,e,t){var s=e.pendingProps,i=Re.current,r=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(i&2)!==0),l?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),xe(Re,i&1),n===null)return Rm(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,n=s.fallback,r?(s=e.mode,r=e.child,o={mode:"hidden",children:o},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=up(o,s,0,null),n=Jo(n,s,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=zm(t),e.memoizedState=Hm,n):Y0(e,o));if(i=n.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return xE(n,e,o,s,l,i,t);if(r){r=s.fallback,o=e.mode,i=n.child,l=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Cr(i,c),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?r=Cr(l,r):(r=Jo(r,o,t,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,o=n.child.memoizedState,o=o===null?zm(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=Hm,s}return r=n.child,n=r.sibling,s=Cr(r,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function Y0(n,e){return e=up({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function rd(n,e,t,s){return s!==null&&D0(s),Ql(e,n.child,null,t),n=Y0(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function xE(n,e,t,s,i,r,o){if(t)return e.flags&256?(e.flags&=-257,s=Vp(Error(M(422))),rd(n,e,o,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=s.fallback,i=e.mode,s=up({mode:"visible",children:s.children},i,0,null),r=Jo(r,i,o,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,e.mode&1&&Ql(e,n.child,null,o),e.child.memoizedState=zm(o),e.memoizedState=Hm,r);if(!(e.mode&1))return rd(n,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,r=Error(M(419)),s=Vp(r,s,void 0),rd(n,e,o,s)}if(l=(o&n.childLanes)!==0,tn||l){if(s=ct,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Ni(n,i),hs(s,n,i,-1))}return ty(),s=Vp(Error(M(421))),rd(n,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=LE.bind(null,n),i._reactRetry=e,null):(n=r.treeContext,An=Ar(i.nextSibling),Sn=e,Ne=!0,ls=null,n!==null&&(Fn[On++]=Ai,Fn[On++]=Si,Fn[On++]=ta,Ai=n.id,Si=n.overflow,ta=e),e=Y0(e,s.children),e.flags|=4096,e)}function Av(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),Lm(n.return,e,t)}function qp(n,e,t,s,i){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=t,r.tailMode=i)}function Xx(n,e,t){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if(Ht(n,e,s.children,t),s=Re.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Av(n,t,e);else if(n.tag===19)Av(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(xe(Re,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&vf(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),qp(e,!1,i,t,r);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&vf(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}qp(e,!0,t,null,r);break;case"together":qp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bd(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Pi(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),sa|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(M(153));if(e.child!==null){for(n=e.child,t=Cr(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Cr(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function bE(n,e,t){switch(e.tag){case 3:Vx(e),Kl();break;case 5:xx(e);break;case 1:sn(e.type)&&df(e);break;case 4:B0(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;xe(mf,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(xe(Re,Re.current&1),e.flags|=128,null):t&e.child.childLanes?qx(n,e,t):(xe(Re,Re.current&1),n=Pi(n,e,t),n!==null?n.sibling:null);xe(Re,Re.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return Xx(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xe(Re,Re.current),s)break;return null;case 22:case 23:return e.lanes=0,Ux(n,e,t)}return Pi(n,e,t)}var Yx,Bm,Kx,Qx;Yx=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Bm=function(){};Kx=function(n,e,t,s){var i=n.memoizedProps;if(i!==s){n=e.stateNode,Vr(Hs.current);var r=null;switch(t){case"input":i=cm(n,i),s=cm(n,s),r=[];break;case"select":i=De({},i,{value:void 0}),s=De({},s,{value:void 0}),r=[];break;case"textarea":i=dm(n,i),s=dm(n,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=uf)}pm(t,s);var o;t=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(qc.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in s){var c=s[u];if(l=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(r||(r=[]),r.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(qc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&be("scroll",n),r||l===c||(r=[])):(r=r||[]).push(u,c))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};Qx=function(n,e,t,s){t!==s&&(e.flags|=4)};function uc(n,e){if(!Ne)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function xt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function AE(n,e,t){var s=e.pendingProps;switch(I0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return sn(e.type)&&hf(),xt(e),null;case 3:return s=e.stateNode,Zl(),Ee(nn),Ee(Mt),W0(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(sd(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ls!==null&&(Ym(ls),ls=null))),Bm(n,e),xt(e),null;case 5:$0(e);var i=Vr(ru.current);if(t=e.type,n!==null&&e.stateNode!=null)Kx(n,e,t,s,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(M(166));return xt(e),null}if(n=Vr(Hs.current),sd(e)){s=e.stateNode,t=e.type;var r=e.memoizedProps;switch(s[Os]=e,s[su]=r,n=(e.mode&1)!==0,t){case"dialog":be("cancel",s),be("close",s);break;case"iframe":case"object":case"embed":be("load",s);break;case"video":case"audio":for(i=0;i<wc.length;i++)be(wc[i],s);break;case"source":be("error",s);break;case"img":case"image":case"link":be("error",s),be("load",s);break;case"details":be("toggle",s);break;case"input":My(s,r),be("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},be("invalid",s);break;case"textarea":Ly(s,r),be("invalid",s)}pm(t,r),i=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?s.textContent!==l&&(r.suppressHydrationWarning!==!0&&nd(s.textContent,l,n),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&nd(s.textContent,l,n),i=["children",""+l]):qc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&be("scroll",s)}switch(t){case"input":Xh(s),Ry(s,r,!0);break;case"textarea":Xh(s),Iy(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=uf)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=_w(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(t,{is:s.is}):(n=o.createElement(t),t==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,t),n[Os]=e,n[su]=s,Yx(n,e,!1,!1),e.stateNode=n;e:{switch(o=mm(t,s),t){case"dialog":be("cancel",n),be("close",n),i=s;break;case"iframe":case"object":case"embed":be("load",n),i=s;break;case"video":case"audio":for(i=0;i<wc.length;i++)be(wc[i],n);i=s;break;case"source":be("error",n),i=s;break;case"img":case"image":case"link":be("error",n),be("load",n),i=s;break;case"details":be("toggle",n),i=s;break;case"input":My(n,s),i=cm(n,s),be("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=De({},s,{value:void 0}),be("invalid",n);break;case"textarea":Ly(n,s),i=dm(n,s),be("invalid",n);break;default:i=s}pm(t,i),l=i;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?Tw(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Cw(n,c)):r==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&Xc(n,c):typeof c=="number"&&Xc(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(qc.hasOwnProperty(r)?c!=null&&r==="onScroll"&&be("scroll",n):c!=null&&w0(n,r,c,o))}switch(t){case"input":Xh(n),Ry(n,s,!1);break;case"textarea":Xh(n),Iy(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Tr(s.value));break;case"select":n.multiple=!!s.multiple,r=s.value,r!=null?Da(n,!!s.multiple,r,!1):s.defaultValue!=null&&Da(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=uf)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(n&&e.stateNode!=null)Qx(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(M(166));if(t=Vr(ru.current),Vr(Hs.current),sd(e)){if(s=e.stateNode,t=e.memoizedProps,s[Os]=e,(r=s.nodeValue!==t)&&(n=Sn,n!==null))switch(n.tag){case 3:nd(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&nd(s.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[Os]=e,e.stateNode=s}return xt(e),null;case 13:if(Ee(Re),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ne&&An!==null&&e.mode&1&&!(e.flags&128))mx(),Kl(),e.flags|=98560,r=!1;else if(r=sd(e),s!==null&&s.dehydrated!==null){if(n===null){if(!r)throw Error(M(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(M(317));r[Os]=e}else Kl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),r=!1}else ls!==null&&(Ym(ls),ls=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||Re.current&1?Je===0&&(Je=3):ty())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return Zl(),Bm(n,e),n===null&&tu(e.stateNode.containerInfo),xt(e),null;case 10:return j0(e.type._context),xt(e),null;case 17:return sn(e.type)&&hf(),xt(e),null;case 19:if(Ee(Re),r=e.memoizedState,r===null)return xt(e),null;if(s=(e.flags&128)!==0,o=r.rendering,o===null)if(s)uc(r,!1);else{if(Je!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=vf(n),o!==null){for(e.flags|=128,uc(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)r=t,n=s,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return xe(Re,Re.current&1|2),e.child}n=n.sibling}r.tail!==null&&$e()>ec&&(e.flags|=128,s=!0,uc(r,!1),e.lanes=4194304)}else{if(!s)if(n=vf(o),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),uc(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Ne)return xt(e),null}else 2*$e()-r.renderingStartTime>ec&&t!==1073741824&&(e.flags|=128,s=!0,uc(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=$e(),e.sibling=null,t=Re.current,xe(Re,s?t&1|2:t&1),e):(xt(e),null);case 22:case 23:return ey(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?wn&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function SE(n,e){switch(I0(e),e.tag){case 1:return sn(e.type)&&hf(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Zl(),Ee(nn),Ee(Mt),W0(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return $0(e),null;case 13:if(Ee(Re),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Kl()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ee(Re),null;case 4:return Zl(),null;case 10:return j0(e.type._context),null;case 22:case 23:return ey(),null;case 24:return null;default:return null}}var od=!1,Nt=!1,EE=typeof WeakSet=="function"?WeakSet:Set,j=null;function Ma(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){je(n,e,s)}else t.current=null}function $m(n,e,t){try{t()}catch(s){je(n,e,s)}}var Sv=!1;function _E(n,e){if(_m=af,n=nx(),R0(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var p;d!==t||i!==0&&d.nodeType!==3||(l=o+i),d!==r||s!==0&&d.nodeType!==3||(c=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break t;if(f===t&&++u===i&&(l=o),f===r&&++h===s&&(c=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(Cm={focusedElem:n,selectionRange:t},af=!1,j=e;j!==null;)if(e=j,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,j=n;else for(;j!==null;){e=j;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var b=g.memoizedProps,E=g.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?b:qn(e.type,b),E);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(_){je(e,e.return,_)}if(n=e.sibling,n!==null){n.return=e.return,j=n;break}j=e.return}return g=Sv,Sv=!1,g}function $c(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var r=i.destroy;i.destroy=void 0,r!==void 0&&$m(e,t,r)}i=i.next}while(i!==s)}}function lp(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function Wm(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Zx(n){var e=n.alternate;e!==null&&(n.alternate=null,Zx(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Os],delete e[su],delete e[Nm],delete e[aE],delete e[lE])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Jx(n){return n.tag===5||n.tag===3||n.tag===4}function Ev(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Jx(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Um(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=uf));else if(s!==4&&(n=n.child,n!==null))for(Um(n,e,t),n=n.sibling;n!==null;)Um(n,e,t),n=n.sibling}function Gm(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(Gm(n,e,t),n=n.sibling;n!==null;)Gm(n,e,t),n=n.sibling}var mt=null,as=!1;function Ii(n,e,t){for(t=t.child;t!==null;)e1(n,e,t),t=t.sibling}function e1(n,e,t){if(js&&typeof js.onCommitFiberUnmount=="function")try{js.onCommitFiberUnmount(ep,t)}catch{}switch(t.tag){case 5:Nt||Ma(t,e);case 6:var s=mt,i=as;mt=null,Ii(n,e,t),mt=s,as=i,mt!==null&&(as?(n=mt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):mt.removeChild(t.stateNode));break;case 18:mt!==null&&(as?(n=mt,t=t.stateNode,n.nodeType===8?zp(n.parentNode,t):n.nodeType===1&&zp(n,t),Zc(n)):zp(mt,t.stateNode));break;case 4:s=mt,i=as,mt=t.stateNode.containerInfo,as=!0,Ii(n,e,t),mt=s,as=i;break;case 0:case 11:case 14:case 15:if(!Nt&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&$m(t,e,o),i=i.next}while(i!==s)}Ii(n,e,t);break;case 1:if(!Nt&&(Ma(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(l){je(t,e,l)}Ii(n,e,t);break;case 21:Ii(n,e,t);break;case 22:t.mode&1?(Nt=(s=Nt)||t.memoizedState!==null,Ii(n,e,t),Nt=s):Ii(n,e,t);break;default:Ii(n,e,t)}}function _v(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new EE),e.forEach(function(s){var i=IE.bind(null,n,s);t.has(s)||(t.add(s),s.then(i,i))})}}function Gn(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];try{var r=n,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:mt=l.stateNode,as=!1;break e;case 3:mt=l.stateNode.containerInfo,as=!0;break e;case 4:mt=l.stateNode.containerInfo,as=!0;break e}l=l.return}if(mt===null)throw Error(M(160));e1(r,o,i),mt=null,as=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){je(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)t1(e,n),e=e.sibling}function t1(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Gn(e,n),ms(n),s&4){try{$c(3,n,n.return),lp(3,n)}catch(b){je(n,n.return,b)}try{$c(5,n,n.return)}catch(b){je(n,n.return,b)}}break;case 1:Gn(e,n),ms(n),s&512&&t!==null&&Ma(t,t.return);break;case 5:if(Gn(e,n),ms(n),s&512&&t!==null&&Ma(t,t.return),n.flags&32){var i=n.stateNode;try{Xc(i,"")}catch(b){je(n,n.return,b)}}if(s&4&&(i=n.stateNode,i!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&Sw(i,r),mm(l,o);var u=mm(l,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Tw(i,d):h==="dangerouslySetInnerHTML"?Cw(i,d):h==="children"?Xc(i,d):w0(i,h,d,u)}switch(l){case"input":um(i,r);break;case"textarea":Ew(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?Da(i,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?Da(i,!!r.multiple,r.defaultValue,!0):Da(i,!!r.multiple,r.multiple?[]:"",!1))}i[su]=r}catch(b){je(n,n.return,b)}}break;case 6:if(Gn(e,n),ms(n),s&4){if(n.stateNode===null)throw Error(M(162));i=n.stateNode,r=n.memoizedProps;try{i.nodeValue=r}catch(b){je(n,n.return,b)}}break;case 3:if(Gn(e,n),ms(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{Zc(e.containerInfo)}catch(b){je(n,n.return,b)}break;case 4:Gn(e,n),ms(n);break;case 13:Gn(e,n),ms(n),i=n.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(Z0=$e())),s&4&&_v(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Nt=(u=Nt)||h,Gn(e,n),Nt=u):Gn(e,n),ms(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(j=n,h=n.child;h!==null;){for(d=j=h;j!==null;){switch(f=j,p=f.child,f.tag){case 0:case 11:case 14:case 15:$c(4,f,f.return);break;case 1:Ma(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){s=f,t=f.return;try{e=s,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(b){je(s,t,b)}}break;case 5:Ma(f,f.return);break;case 22:if(f.memoizedState!==null){kv(d);continue}}p!==null?(p.return=f,j=p):kv(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=kw("display",o))}catch(b){je(n,n.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){je(n,n.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Gn(e,n),ms(n),s&4&&_v(n);break;case 21:break;default:Gn(e,n),ms(n)}}function ms(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Jx(t)){var s=t;break e}t=t.return}throw Error(M(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Xc(i,""),s.flags&=-33);var r=Ev(n);Gm(n,r,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Ev(n);Um(n,l,o);break;default:throw Error(M(161))}}catch(c){je(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function CE(n,e,t){j=n,n1(n)}function n1(n,e,t){for(var s=(n.mode&1)!==0;j!==null;){var i=j,r=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||od;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Nt;l=od;var u=Nt;if(od=o,(Nt=c)&&!u)for(j=i;j!==null;)o=j,c=o.child,o.tag===22&&o.memoizedState!==null?Tv(i):c!==null?(c.return=o,j=c):Tv(i);for(;r!==null;)j=r,n1(r),r=r.sibling;j=i,od=l,Nt=u}Cv(n)}else i.subtreeFlags&8772&&r!==null?(r.return=i,j=r):Cv(n)}}function Cv(n){for(;j!==null;){var e=j;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||lp(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Nt)if(t===null)s.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:qn(e.type,t.memoizedProps);s.componentDidUpdate(i,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&uv(e,r,s);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}uv(e,o,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Zc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Nt||e.flags&512&&Wm(e)}catch(f){je(e,e.return,f)}}if(e===n){j=null;break}if(t=e.sibling,t!==null){t.return=e.return,j=t;break}j=e.return}}function kv(n){for(;j!==null;){var e=j;if(e===n){j=null;break}var t=e.sibling;if(t!==null){t.return=e.return,j=t;break}j=e.return}}function Tv(n){for(;j!==null;){var e=j;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{lp(4,e)}catch(c){je(e,t,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(c){je(e,i,c)}}var r=e.return;try{Wm(e)}catch(c){je(e,r,c)}break;case 5:var o=e.return;try{Wm(e)}catch(c){je(e,o,c)}}}catch(c){je(e,e.return,c)}if(e===n){j=null;break}var l=e.sibling;if(l!==null){l.return=e.return,j=l;break}j=e.return}}var kE=Math.ceil,bf=Li.ReactCurrentDispatcher,K0=Li.ReactCurrentOwner,Bn=Li.ReactCurrentBatchConfig,ae=0,ct=null,Ge=null,yt=0,wn=0,Ra=Ir(0),Je=0,cu=null,sa=0,cp=0,Q0=0,Wc=null,en=null,Z0=0,ec=1/0,Vs=null,Af=!1,Vm=null,Er=null,ad=!1,vr=null,Sf=0,Uc=0,qm=null,Ad=-1,Sd=0;function zt(){return ae&6?$e():Ad!==-1?Ad:Ad=$e()}function _r(n){return n.mode&1?ae&2&&yt!==0?yt&-yt:uE.transition!==null?(Sd===0&&(Sd=zw()),Sd):(n=pe,n!==0||(n=window.event,n=n===void 0?16:qw(n.type)),n):1}function hs(n,e,t,s){if(50<Uc)throw Uc=0,qm=null,Error(M(185));Hh(n,t,s),(!(ae&2)||n!==ct)&&(n===ct&&(!(ae&2)&&(cp|=t),Je===4&&Hi(n,yt)),rn(n,s),t===1&&ae===0&&!(e.mode&1)&&(ec=$e()+500,rp&&Dr()))}function rn(n,e){var t=n.callbackNode;uS(n,e);var s=of(n,n===ct?yt:0);if(s===0)t!==null&&Oy(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&Oy(t),e===1)n.tag===0?cE(Nv.bind(null,n)):dx(Nv.bind(null,n)),rE(function(){!(ae&6)&&Dr()}),t=null;else{switch(Bw(s)){case 1:t=E0;break;case 4:t=jw;break;case 16:t=rf;break;case 536870912:t=Hw;break;default:t=rf}t=u1(t,s1.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function s1(n,e){if(Ad=-1,Sd=0,ae&6)throw Error(M(327));var t=n.callbackNode;if(za()&&n.callbackNode!==t)return null;var s=of(n,n===ct?yt:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=Ef(n,s);else{e=s;var i=ae;ae|=2;var r=r1();(ct!==n||yt!==e)&&(Vs=null,ec=$e()+500,Zo(n,e));do try{PE();break}catch(l){i1(n,l)}while(!0);O0(),bf.current=r,ae=i,Ge!==null?e=0:(ct=null,yt=0,e=Je)}if(e!==0){if(e===2&&(i=xm(n),i!==0&&(s=i,e=Xm(n,i))),e===1)throw t=cu,Zo(n,0),Hi(n,s),rn(n,$e()),t;if(e===6)Hi(n,s);else{if(i=n.current.alternate,!(s&30)&&!TE(i)&&(e=Ef(n,s),e===2&&(r=xm(n),r!==0&&(s=r,e=Xm(n,r))),e===1))throw t=cu,Zo(n,0),Hi(n,s),rn(n,$e()),t;switch(n.finishedWork=i,n.finishedLanes=s,e){case 0:case 1:throw Error(M(345));case 2:jr(n,en,Vs);break;case 3:if(Hi(n,s),(s&130023424)===s&&(e=Z0+500-$e(),10<e)){if(of(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){zt(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=Tm(jr.bind(null,n,en,Vs),e);break}jr(n,en,Vs);break;case 4:if(Hi(n,s),(s&4194240)===s)break;for(e=n.eventTimes,i=-1;0<s;){var o=31-us(s);r=1<<o,o=e[o],o>i&&(i=o),s&=~r}if(s=i,s=$e()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*kE(s/1960))-s,10<s){n.timeoutHandle=Tm(jr.bind(null,n,en,Vs),s);break}jr(n,en,Vs);break;case 5:jr(n,en,Vs);break;default:throw Error(M(329))}}}return rn(n,$e()),n.callbackNode===t?s1.bind(null,n):null}function Xm(n,e){var t=Wc;return n.current.memoizedState.isDehydrated&&(Zo(n,e).flags|=256),n=Ef(n,e),n!==2&&(e=en,en=t,e!==null&&Ym(e)),n}function Ym(n){en===null?en=n:en.push.apply(en,n)}function TE(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var i=t[s],r=i.getSnapshot;i=i.value;try{if(!ds(r(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hi(n,e){for(e&=~Q0,e&=~cp,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-us(e),s=1<<t;n[t]=-1,e&=~s}}function Nv(n){if(ae&6)throw Error(M(327));za();var e=of(n,0);if(!(e&1))return rn(n,$e()),null;var t=Ef(n,e);if(n.tag!==0&&t===2){var s=xm(n);s!==0&&(e=s,t=Xm(n,s))}if(t===1)throw t=cu,Zo(n,0),Hi(n,e),rn(n,$e()),t;if(t===6)throw Error(M(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,jr(n,en,Vs),rn(n,$e()),null}function J0(n,e){var t=ae;ae|=1;try{return n(e)}finally{ae=t,ae===0&&(ec=$e()+500,rp&&Dr())}}function ia(n){vr!==null&&vr.tag===0&&!(ae&6)&&za();var e=ae;ae|=1;var t=Bn.transition,s=pe;try{if(Bn.transition=null,pe=1,n)return n()}finally{pe=s,Bn.transition=t,ae=e,!(ae&6)&&Dr()}}function ey(){wn=Ra.current,Ee(Ra)}function Zo(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,iE(t)),Ge!==null)for(t=Ge.return;t!==null;){var s=t;switch(I0(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&hf();break;case 3:Zl(),Ee(nn),Ee(Mt),W0();break;case 5:$0(s);break;case 4:Zl();break;case 13:Ee(Re);break;case 19:Ee(Re);break;case 10:j0(s.type._context);break;case 22:case 23:ey()}t=t.return}if(ct=n,Ge=n=Cr(n.current,null),yt=wn=e,Je=0,cu=null,Q0=cp=sa=0,en=Wc=null,Gr!==null){for(e=0;e<Gr.length;e++)if(t=Gr[e],s=t.interleaved,s!==null){t.interleaved=null;var i=s.next,r=t.pending;if(r!==null){var o=r.next;r.next=i,s.next=o}t.pending=s}Gr=null}return n}function i1(n,e){do{var t=Ge;try{if(O0(),wd.current=xf,wf){for(var s=Ie.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}wf=!1}if(na=0,lt=Ze=Ie=null,Bc=!1,ou=0,K0.current=null,t===null||t.return===null){Je=1,cu=e,Ge=null;break}e:{var r=n,o=t.return,l=t,c=e;if(e=yt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gv(o);if(p!==null){p.flags&=-257,yv(p,o,l,r,e),p.mode&1&&mv(r,u,e),e=p,c=u;var g=e.updateQueue;if(g===null){var b=new Set;b.add(c),e.updateQueue=b}else g.add(c);break e}else{if(!(e&1)){mv(r,u,e),ty();break e}c=Error(M(426))}}else if(Ne&&l.mode&1){var E=gv(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),yv(E,o,l,r,e),D0(Jl(c,l));break e}}r=c=Jl(c,l),Je!==4&&(Je=2),Wc===null?Wc=[r]:Wc.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var y=Bx(r,c,e);cv(r,y);break e;case 1:l=c;var v=r.type,S=r.stateNode;if(!(r.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Er===null||!Er.has(S)))){r.flags|=65536,e&=-e,r.lanes|=e;var _=$x(r,l,e);cv(r,_);break e}}r=r.return}while(r!==null)}a1(t)}catch(C){e=C,Ge===t&&t!==null&&(Ge=t=t.return);continue}break}while(!0)}function r1(){var n=bf.current;return bf.current=xf,n===null?xf:n}function ty(){(Je===0||Je===3||Je===2)&&(Je=4),ct===null||!(sa&268435455)&&!(cp&268435455)||Hi(ct,yt)}function Ef(n,e){var t=ae;ae|=2;var s=r1();(ct!==n||yt!==e)&&(Vs=null,Zo(n,e));do try{NE();break}catch(i){i1(n,i)}while(!0);if(O0(),ae=t,bf.current=s,Ge!==null)throw Error(M(261));return ct=null,yt=0,Je}function NE(){for(;Ge!==null;)o1(Ge)}function PE(){for(;Ge!==null&&!tS();)o1(Ge)}function o1(n){var e=c1(n.alternate,n,wn);n.memoizedProps=n.pendingProps,e===null?a1(n):Ge=e,K0.current=null}function a1(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=SE(t,e),t!==null){t.flags&=32767,Ge=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Je=6,Ge=null;return}}else if(t=AE(t,e,wn),t!==null){Ge=t;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=n}while(e!==null);Je===0&&(Je=5)}function jr(n,e,t){var s=pe,i=Bn.transition;try{Bn.transition=null,pe=1,ME(n,e,t,s)}finally{Bn.transition=i,pe=s}return null}function ME(n,e,t,s){do za();while(vr!==null);if(ae&6)throw Error(M(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(M(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(hS(n,r),n===ct&&(Ge=ct=null,yt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||ad||(ad=!0,u1(rf,function(){return za(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=Bn.transition,Bn.transition=null;var o=pe;pe=1;var l=ae;ae|=4,K0.current=null,_E(n,t),t1(t,n),QS(Cm),af=!!_m,Cm=_m=null,n.current=t,CE(t),nS(),ae=l,pe=o,Bn.transition=r}else n.current=t;if(ad&&(ad=!1,vr=n,Sf=i),r=n.pendingLanes,r===0&&(Er=null),rS(t.stateNode),rn(n,$e()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],s(i.value,{componentStack:i.stack,digest:i.digest});if(Af)throw Af=!1,n=Vm,Vm=null,n;return Sf&1&&n.tag!==0&&za(),r=n.pendingLanes,r&1?n===qm?Uc++:(Uc=0,qm=n):Uc=0,Dr(),null}function za(){if(vr!==null){var n=Bw(Sf),e=Bn.transition,t=pe;try{if(Bn.transition=null,pe=16>n?16:n,vr===null)var s=!1;else{if(n=vr,vr=null,Sf=0,ae&6)throw Error(M(331));var i=ae;for(ae|=4,j=n.current;j!==null;){var r=j,o=r.child;if(j.flags&16){var l=r.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(j=u;j!==null;){var h=j;switch(h.tag){case 0:case 11:case 15:$c(8,h,r)}var d=h.child;if(d!==null)d.return=h,j=d;else for(;j!==null;){h=j;var f=h.sibling,p=h.return;if(Zx(h),h===u){j=null;break}if(f!==null){f.return=p,j=f;break}j=p}}}var g=r.alternate;if(g!==null){var b=g.child;if(b!==null){g.child=null;do{var E=b.sibling;b.sibling=null,b=E}while(b!==null)}}j=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,j=o;else e:for(;j!==null;){if(r=j,r.flags&2048)switch(r.tag){case 0:case 11:case 15:$c(9,r,r.return)}var y=r.sibling;if(y!==null){y.return=r.return,j=y;break e}j=r.return}}var v=n.current;for(j=v;j!==null;){o=j;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,j=S;else e:for(o=v;j!==null;){if(l=j,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lp(9,l)}}catch(C){je(l,l.return,C)}if(l===o){j=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,j=_;break e}j=l.return}}if(ae=i,Dr(),js&&typeof js.onPostCommitFiberRoot=="function")try{js.onPostCommitFiberRoot(ep,n)}catch{}s=!0}return s}finally{pe=t,Bn.transition=e}}return!1}function Pv(n,e,t){e=Jl(t,e),e=Bx(n,e,1),n=Sr(n,e,1),e=zt(),n!==null&&(Hh(n,1,e),rn(n,e))}function je(n,e,t){if(n.tag===3)Pv(n,n,t);else for(;e!==null;){if(e.tag===3){Pv(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Er===null||!Er.has(s))){n=Jl(t,n),n=$x(e,n,1),e=Sr(e,n,1),n=zt(),e!==null&&(Hh(e,1,n),rn(e,n));break}}e=e.return}}function RE(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=zt(),n.pingedLanes|=n.suspendedLanes&t,ct===n&&(yt&t)===t&&(Je===4||Je===3&&(yt&130023424)===yt&&500>$e()-Z0?Zo(n,0):Q0|=t),rn(n,e)}function l1(n,e){e===0&&(n.mode&1?(e=Qh,Qh<<=1,!(Qh&130023424)&&(Qh=4194304)):e=1);var t=zt();n=Ni(n,e),n!==null&&(Hh(n,e,t),rn(n,t))}function LE(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),l1(n,t)}function IE(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(M(314))}s!==null&&s.delete(e),l1(n,t)}var c1;c1=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||nn.current)tn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return tn=!1,bE(n,e,t);tn=!!(n.flags&131072)}else tn=!1,Ne&&e.flags&1048576&&fx(e,pf,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;bd(n,e),n=e.pendingProps;var i=Yl(e,Mt.current);Ha(e,t),i=G0(null,e,s,n,i,t);var r=V0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sn(s)?(r=!0,df(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,z0(e),i.updater=ap,e.stateNode=i,i._reactInternals=e,Dm(e,s,n,t),e=jm(null,e,s,!0,r,t)):(e.tag=0,Ne&&r&&L0(e),Ht(null,e,i,t),e=e.child),e;case 16:s=e.elementType;e:{switch(bd(n,e),n=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=FE(s),n=qn(s,n),i){case 0:e=Om(null,e,s,n,t);break e;case 1:e=xv(null,e,s,n,t);break e;case 11:e=vv(null,e,s,n,t);break e;case 14:e=wv(null,e,s,qn(s.type,n),t);break e}throw Error(M(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:qn(s,i),Om(n,e,s,i,t);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:qn(s,i),xv(n,e,s,i,t);case 3:e:{if(Vx(e),n===null)throw Error(M(387));s=e.pendingProps,r=e.memoizedState,i=r.element,wx(n,e),yf(e,s,null,t);var o=e.memoizedState;if(s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=Jl(Error(M(423)),e),e=bv(n,e,s,t,i);break e}else if(s!==i){i=Jl(Error(M(424)),e),e=bv(n,e,s,t,i);break e}else for(An=Ar(e.stateNode.containerInfo.firstChild),Sn=e,Ne=!0,ls=null,t=yx(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Kl(),s===i){e=Pi(n,e,t);break e}Ht(n,e,s,t)}e=e.child}return e;case 5:return xx(e),n===null&&Rm(e),s=e.type,i=e.pendingProps,r=n!==null?n.memoizedProps:null,o=i.children,km(s,i)?o=null:r!==null&&km(s,r)&&(e.flags|=32),Gx(n,e),Ht(n,e,o,t),e.child;case 6:return n===null&&Rm(e),null;case 13:return qx(n,e,t);case 4:return B0(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=Ql(e,null,s,t):Ht(n,e,s,t),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:qn(s,i),vv(n,e,s,i,t);case 7:return Ht(n,e,e.pendingProps,t),e.child;case 8:return Ht(n,e,e.pendingProps.children,t),e.child;case 12:return Ht(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,r=e.memoizedProps,o=i.value,xe(mf,s._currentValue),s._currentValue=o,r!==null)if(ds(r.value,o)){if(r.children===i.children&&!nn.current){e=Pi(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(r.tag===1){c=Ei(-1,t&-t),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=t,c=r.alternate,c!==null&&(c.lanes|=t),Lm(r.return,t,e),l.lanes|=t;break}c=c.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(M(341));o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),Lm(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Ht(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Ha(e,t),i=Wn(i),s=s(i),e.flags|=1,Ht(n,e,s,t),e.child;case 14:return s=e.type,i=qn(s,e.pendingProps),i=qn(s.type,i),wv(n,e,s,i,t);case 15:return Wx(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:qn(s,i),bd(n,e),e.tag=1,sn(s)?(n=!0,df(e)):n=!1,Ha(e,t),zx(e,s,i),Dm(e,s,i,t),jm(null,e,s,!0,n,t);case 19:return Xx(n,e,t);case 22:return Ux(n,e,t)}throw Error(M(156,e.tag))};function u1(n,e){return Ow(n,e)}function DE(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(n,e,t,s){return new DE(n,e,t,s)}function ny(n){return n=n.prototype,!(!n||!n.isReactComponent)}function FE(n){if(typeof n=="function")return ny(n)?1:0;if(n!=null){if(n=n.$$typeof,n===b0)return 11;if(n===A0)return 14}return 2}function Cr(n,e){var t=n.alternate;return t===null?(t=zn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Ed(n,e,t,s,i,r){var o=2;if(s=n,typeof n=="function")ny(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Aa:return Jo(t.children,i,r,e);case x0:o=8,i|=8;break;case rm:return n=zn(12,t,e,i|2),n.elementType=rm,n.lanes=r,n;case om:return n=zn(13,t,e,i),n.elementType=om,n.lanes=r,n;case am:return n=zn(19,t,e,i),n.elementType=am,n.lanes=r,n;case xw:return up(t,i,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case vw:o=10;break e;case ww:o=9;break e;case b0:o=11;break e;case A0:o=14;break e;case Fi:o=16,s=null;break e}throw Error(M(130,n==null?n:typeof n,""))}return e=zn(o,t,e,i),e.elementType=n,e.type=s,e.lanes=r,e}function Jo(n,e,t,s){return n=zn(7,n,s,e),n.lanes=t,n}function up(n,e,t,s){return n=zn(22,n,s,e),n.elementType=xw,n.lanes=t,n.stateNode={isHidden:!1},n}function Xp(n,e,t){return n=zn(6,n,null,e),n.lanes=t,n}function Yp(n,e,t){return e=zn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function OE(n,e,t,s,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Np(0),this.expirationTimes=Np(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Np(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sy(n,e,t,s,i,r,o,l,c){return n=new OE(n,e,t,l,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=zn(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},z0(r),n}function jE(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ba,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function h1(n){if(!n)return Nr;n=n._reactInternals;e:{if(ua(n)!==n||n.tag!==1)throw Error(M(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(n.tag===1){var t=n.type;if(sn(t))return hx(n,t,e)}return e}function d1(n,e,t,s,i,r,o,l,c){return n=sy(t,s,!0,n,i,r,o,l,c),n.context=h1(null),t=n.current,s=zt(),i=_r(t),r=Ei(s,i),r.callback=e??null,Sr(t,r,i),n.current.lanes=i,Hh(n,i,s),rn(n,s),n}function hp(n,e,t,s){var i=e.current,r=zt(),o=_r(i);return t=h1(t),e.context===null?e.context=t:e.pendingContext=t,e=Ei(r,o),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=Sr(i,e,o),n!==null&&(hs(n,i,o,r),vd(n,i,o)),o}function _f(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Mv(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function iy(n,e){Mv(n,e),(n=n.alternate)&&Mv(n,e)}function HE(){return null}var f1=typeof reportError=="function"?reportError:function(n){console.error(n)};function ry(n){this._internalRoot=n}dp.prototype.render=ry.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(M(409));hp(n,e,null,null)};dp.prototype.unmount=ry.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ia(function(){hp(null,n,null,null)}),e[Ti]=null}};function dp(n){this._internalRoot=n}dp.prototype.unstable_scheduleHydration=function(n){if(n){var e=Uw();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ji.length&&e!==0&&e<ji[t].priority;t++);ji.splice(t,0,n),t===0&&Vw(n)}};function oy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function fp(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Rv(){}function zE(n,e,t,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var u=_f(o);r.call(u)}}var o=d1(e,s,n,0,null,!1,!1,"",Rv);return n._reactRootContainer=o,n[Ti]=o.current,tu(n.nodeType===8?n.parentNode:n),ia(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var u=_f(c);l.call(u)}}var c=sy(n,0,!1,null,null,!1,!1,"",Rv);return n._reactRootContainer=c,n[Ti]=c.current,tu(n.nodeType===8?n.parentNode:n),ia(function(){hp(e,c,t,s)}),c}function pp(n,e,t,s,i){var r=t._reactRootContainer;if(r){var o=r;if(typeof i=="function"){var l=i;i=function(){var c=_f(o);l.call(c)}}hp(e,o,n,i)}else o=zE(t,e,n,i,s);return _f(o)}$w=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=vc(e.pendingLanes);t!==0&&(_0(e,t|1),rn(e,$e()),!(ae&6)&&(ec=$e()+500,Dr()))}break;case 13:ia(function(){var s=Ni(n,1);if(s!==null){var i=zt();hs(s,n,1,i)}}),iy(n,1)}};C0=function(n){if(n.tag===13){var e=Ni(n,134217728);if(e!==null){var t=zt();hs(e,n,134217728,t)}iy(n,134217728)}};Ww=function(n){if(n.tag===13){var e=_r(n),t=Ni(n,e);if(t!==null){var s=zt();hs(t,n,e,s)}iy(n,e)}};Uw=function(){return pe};Gw=function(n,e){var t=pe;try{return pe=n,e()}finally{pe=t}};ym=function(n,e,t){switch(e){case"input":if(um(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var i=ip(s);if(!i)throw Error(M(90));Aw(s),um(s,i)}}}break;case"textarea":Ew(n,t);break;case"select":e=t.value,e!=null&&Da(n,!!t.multiple,e,!1)}};Mw=J0;Rw=ia;var BE={usingClientEntryPoint:!1,Events:[Bh,Ca,ip,Nw,Pw,J0]},hc={findFiberByHostInstance:Ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$E={bundleType:hc.bundleType,version:hc.version,rendererPackageName:hc.rendererPackageName,rendererConfig:hc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Li.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Dw(n),n===null?null:n.stateNode},findFiberByHostInstance:hc.findFiberByHostInstance||HE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{ep=ld.inject($E),js=ld}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BE;Cn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oy(e))throw Error(M(200));return jE(n,e,null,t)};Cn.createRoot=function(n,e){if(!oy(n))throw Error(M(299));var t=!1,s="",i=f1;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=sy(n,1,!1,null,null,t,!1,s,i),n[Ti]=e.current,tu(n.nodeType===8?n.parentNode:n),new ry(e)};Cn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(M(188)):(n=Object.keys(n).join(","),Error(M(268,n)));return n=Dw(e),n=n===null?null:n.stateNode,n};Cn.flushSync=function(n){return ia(n)};Cn.hydrate=function(n,e,t){if(!fp(e))throw Error(M(200));return pp(null,n,e,!0,t)};Cn.hydrateRoot=function(n,e,t){if(!oy(n))throw Error(M(405));var s=t!=null&&t.hydratedSources||null,i=!1,r="",o=f1;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=d1(e,null,n,1,t??null,i,!1,r,o),n[Ti]=e.current,tu(n),s)for(n=0;n<s.length;n++)t=s[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new dp(e)};Cn.render=function(n,e,t){if(!fp(e))throw Error(M(200));return pp(null,n,e,!1,t)};Cn.unmountComponentAtNode=function(n){if(!fp(n))throw Error(M(40));return n._reactRootContainer?(ia(function(){pp(null,null,n,!1,function(){n._reactRootContainer=null,n[Ti]=null})}),!0):!1};Cn.unstable_batchedUpdates=J0;Cn.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!fp(t))throw Error(M(200));if(n==null||n._reactInternals===void 0)throw Error(M(38));return pp(n,e,t,!1,s)};Cn.version="18.3.1-next-f1338f8080-20240426";function p1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p1)}catch(n){console.error(n)}}p1(),pw.exports=Cn;var WE=pw.exports,m1,Lv=WE;m1=Lv.createRoot,Lv.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),tt=(n,e)=>{const t=Se.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>Se.createElement("svg",{ref:h,...UE,width:i,height:i,stroke:s,strokeWidth:o?Number(r)*24/Number(i):r,className:["lucide",`lucide-${GE(n)}`,l].join(" "),...u},[...e.map(([d,f])=>Se.createElement(d,f)),...Array.isArray(c)?c:[c]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=tt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=tt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=tt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=tt("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=tt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=tt("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=tt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=tt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=tt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=tt("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=tt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=tt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=tt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=tt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=tt("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=tt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=tt("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=tt("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=tt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var Gc={};Gc.d=(n,e)=>{for(var t in e)Gc.o(e,t)&&!Gc.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Gc.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var X=globalThis.pdfjsLib={};Gc.d(X,{AbortException:()=>Pr,AnnotationEditorLayer:()=>o0,AnnotationEditorParamsType:()=>ie,AnnotationEditorType:()=>K,AnnotationEditorUIManager:()=>oa,AnnotationLayer:()=>ZC,AnnotationMode:()=>zi,ColorPicker:()=>Mf,DOMSVGFactory:()=>my,DrawLayer:()=>c0,FeatureTest:()=>Bt,GlobalWorkerOptions:()=>bi,ImageKind:()=>_d,InvalidPDFException:()=>Jm,MissingPDFException:()=>uu,OPS:()=>Xn,OutputScale:()=>tg,PDFDataRangeTransport:()=>vb,PDFDateString:()=>hy,PDFWorker:()=>$a,PasswordResponses:()=>a_,PermissionFlag:()=>o_,PixelsPerInch:()=>Mr,RenderingCancelledException:()=>cy,TextLayer:()=>hu,TouchManager:()=>Nf,UnexpectedResponseException:()=>Cf,Util:()=>$,VerbosityLevel:()=>mp,XfaLayer:()=>xb,build:()=>RC,createValidAbsoluteUrl:()=>h_,fetchData:()=>wp,getDocument:()=>SC,getFilenameFromUrl:()=>x_,getPdfFilenameFromUrl:()=>b_,getXfaPageViewport:()=>A_,isDataScheme:()=>xp,isPdfFile:()=>uy,noContextMenu:()=>fs,normalizeUnicode:()=>y_,setLayerDimensions:()=>ra,shadow:()=>ee,stopEvent:()=>bn,version:()=>MC});const Pt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),y1=[1,0,0,1,0,0],Zm=[.001,0,0,.001,0,0],i_=1e7,Qp=1.35,vn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},zi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},r_="pdfjs_internal_editor_",K={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ie={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},o_={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},bt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},_d={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Xe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},dc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},mp={ERRORS:0,WARNINGS:1,INFOS:5},Xn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},a_={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let gp=mp.WARNINGS;function l_(n){Number.isInteger(n)&&(gp=n)}function c_(){return gp}function yp(n){gp>=mp.INFOS&&console.log(`Info: ${n}`)}function Q(n){gp>=mp.WARNINGS&&console.log(`Warning: ${n}`)}function ve(n){throw new Error(n)}function Ve(n,e){n||ve(e)}function u_(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function h_(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=g_(n)}catch{}}const s=e?new URL(n,e):new URL(n);if(u_(s))return s}catch{}return null}function ee(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Fr=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class Ov extends Fr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Zp extends Fr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Jm extends Fr{constructor(e){super(e,"InvalidPDFException")}}class uu extends Fr{constructor(e){super(e,"MissingPDFException")}}class Cf extends Fr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class d_ extends Fr{constructor(e){super(e,"FormatError")}}class Pr extends Fr{constructor(e){super(e,"AbortException")}}function v1(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&ve("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const r=Math.min(i+t,e),o=n.subarray(i,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function vp(n){typeof n!="string"&&ve("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function f_(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function ay(n){const e=Object.create(null);for(const[t,s]of n)e[t]=s;return e}function p_(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function m_(){try{return new Function(""),!0}catch{return!1}}class Bt{static get isLittleEndian(){return ee(this,"isLittleEndian",p_())}static get isEvalSupported(){return ee(this,"isEvalSupported",m_())}static get isOffscreenCanvasSupported(){return ee(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ee(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ee(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ee(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return ee(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Jp=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var _i,Cd,eg;class ${static makeHexColor(e,t,s){return`#${Jp[e]}${Jp[t]}${Jp[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const s=e[0]*t[0]+e[1]*t[2]+t[4],i=e[0]*t[1]+e[1]*t[3]+t[5];return[s,i]}static applyInverseTransform(e,t){const s=t[0]*t[3]-t[1]*t[2],i=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/s,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/s;return[i,r]}static getAxialAlignedBoundingBox(e,t){const s=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(s[0],i[0],r[0],o[0]),Math.min(s[1],i[1],r[1],o[1]),Math.max(s[0],i[0],r[0],o[0]),Math.max(s[1],i[1],r[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],s=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],l=(s+o)/2,c=Math.sqrt((s+o)**2-4*(s*o-r*i))/2,u=l+c||1,h=l-c||1;return[Math.sqrt(u),Math.sqrt(h)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[s,r,i,o]}static bezierBoundingBox(e,t,s,i,r,o,l,c,u){return u?(u[0]=Math.min(u[0],e,l),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,l),u[3]=Math.max(u[3],t,c)):u=[Math.min(e,l),Math.min(t,c),Math.max(e,l),Math.max(t,c)],A(this,_i,eg).call(this,e,s,r,l,t,i,o,c,3*(-e+3*(s-r)+l),6*(e-2*s+r),3*(s-e),u),A(this,_i,eg).call(this,e,s,r,l,t,i,o,c,3*(-t+3*(i-o)+c),6*(t-2*i+o),3*(i-t),u),u}}_i=new WeakSet,Cd=function(e,t,s,i,r,o,l,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,g=d*(d*(d*e+3*u*t)+3*f*s)+p*i,b=d*(d*(d*r+3*u*o)+3*f*l)+p*c;h[0]=Math.min(h[0],g),h[1]=Math.min(h[1],b),h[2]=Math.max(h[2],g),h[3]=Math.max(h[3],b)},eg=function(e,t,s,i,r,o,l,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&A(this,_i,Cd).call(this,e,t,s,i,r,o,l,c,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const g=Math.sqrt(p),b=2*u;A(this,_i,Cd).call(this,e,t,s,i,r,o,l,c,(-h+g)/b,f),A(this,_i,Cd).call(this,e,t,s,i,r,o,l,c,(-h-g)/b,f)},x($,_i);function g_(n){return decodeURIComponent(escape(n))}let em=null,jv=null;function y_(n){return em||(em=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,jv=new Map([["ﬅ","ſt"]])),n.replaceAll(em,(e,t,s)=>t?t.normalize("NFKC"):jv.get(s))}function v_(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),v1(n)}const ly="pdfjs_internal_id_";function w_(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(v1(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});const Ws="http://www.w3.org/2000/svg",$r=class $r{};G($r,"CSS",96),G($r,"PDF",72),G($r,"PDF_TO_CSS_UNITS",$r.CSS/$r.PDF);let Mr=$r;async function wp(n,e="text"){if(xc(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class Wh{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=o,s*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let h,d,f,p;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,p=-p);let g,b,E,y;h===0?(g=Math.abs(u-e[1])*s+r,b=Math.abs(c-e[0])*s+o,E=(e[3]-e[1])*s,y=(e[2]-e[0])*s):(g=Math.abs(c-e[0])*s+r,b=Math.abs(u-e[1])*s+o,E=(e[2]-e[0])*s,y=(e[3]-e[1])*s),this.transform=[h*s,d*s,f*s,p*s,g-h*s*c-f*s*u,b-d*s*c-p*s*u],this.width=E,this.height=y}get rawDims(){const{userUnit:e,viewBox:t}=this,s=t.map(i=>i*e);return ee(this,"rawDims",{pageWidth:s[2]-s[0],pageHeight:s[3]-s[1],pageX:s[0],pageY:s[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new Wh({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){return $.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=$.applyTransform([e[0],e[1]],this.transform),s=$.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){return $.applyInverseTransform([e,t],this.transform)}}class cy extends Fr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function xp(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function uy(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function x_(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function b_(n,e="document.pdf"){if(typeof n!="string")return e;if(xp(n))return Q('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=t.exec(n);let r=s.exec(i[1])||s.exec(i[2])||s.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||e}class Hv{constructor(){G(this,"started",Object.create(null));G(this,"times",[])}time(e){e in this.started&&Q(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Q(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-i}ms
`);return e.join("")}}function xc(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function fs(n){n.preventDefault()}function bn(n){n.preventDefault(),n.stopPropagation()}var fu;class hy{static toDateObject(e){if(!e||typeof e!="string")return null;a(this,fu)||m(this,fu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=a(this,fu).exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,l+=d):u==="+"&&(o-=h,l-=d),new Date(Date.UTC(s,i,r,o,l,c))}}fu=new WeakMap,x(hy,fu);function A_(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new Wh({viewBox:r,userUnit:1,scale:e,rotation:t})}function dy(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Q(`Not a valid color format: "${n}"`),[0,0,0])}function S_(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,dy(s))}e.remove()}function ke(n){const{a:e,b:t,c:s,d:i,e:r,f:o}=n.getTransform();return[e,t,s,i,r,o]}function gs(n){const{a:e,b:t,c:s,d:i,e:r,f:o}=n.getTransform().invertSelf();return[e,t,s,i,r,o]}function ra(n,e,t=!1,s=!0){if(e instanceof Wh){const{pageWidth:i,pageHeight:r}=e.rawDims,{style:o}=n,l=Bt.isCSSRoundSupported,c=`var(--scale-factor) * ${i}px`,u=`var(--scale-factor) * ${r}px`,h=l?`round(down, ${c}, var(--scale-round-x, 1px))`:`calc(${c})`,d=l?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}s&&n.setAttribute("data-main-rotation",e.rotation)}class tg{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Bi,qr,Yn,Xr,pu,mu,If,w1,$t,x1,b1,kd,A1,sg;const qs=class qs{constructor(e){x(this,$t);x(this,Bi,null);x(this,qr,null);x(this,Yn);x(this,Xr,null);x(this,pu,null);m(this,Yn,e),a(qs,mu)||m(qs,mu,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=m(this,Bi,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=a(this,Yn)._uiManager._signal;e.addEventListener("contextmenu",fs,{signal:t}),e.addEventListener("pointerdown",A(qs,If,w1),{signal:t});const s=m(this,Xr,document.createElement("div"));s.className="buttons",e.append(s);const i=a(this,Yn).toolbarPosition;if(i){const{style:r}=e,o=a(this,Yn)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return A(this,$t,A1).call(this),e}get div(){return a(this,Bi)}hide(){var e;a(this,Bi).classList.add("hidden"),(e=a(this,qr))==null||e.hideDropdown()}show(){var e;a(this,Bi).classList.remove("hidden"),(e=a(this,pu))==null||e.shown()}async addAltText(e){const t=await e.render();A(this,$t,kd).call(this,t),a(this,Xr).prepend(t,a(this,$t,sg)),m(this,pu,e)}addColorPicker(e){m(this,qr,e);const t=e.renderButton();A(this,$t,kd).call(this,t),a(this,Xr).prepend(t,a(this,$t,sg))}remove(){var e;a(this,Bi).remove(),(e=a(this,qr))==null||e.destroy(),m(this,qr,null)}};Bi=new WeakMap,qr=new WeakMap,Yn=new WeakMap,Xr=new WeakMap,pu=new WeakMap,mu=new WeakMap,If=new WeakSet,w1=function(e){e.stopPropagation()},$t=new WeakSet,x1=function(e){a(this,Yn)._focusEventsAllowed=!1,bn(e)},b1=function(e){a(this,Yn)._focusEventsAllowed=!0,bn(e)},kd=function(e){const t=a(this,Yn)._uiManager._signal;e.addEventListener("focusin",A(this,$t,x1).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",A(this,$t,b1).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",fs,{signal:t})},A1=function(){const{editorType:e,_uiManager:t}=a(this,Yn),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",a(qs,mu)[e]),A(this,$t,kd).call(this,s),s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),a(this,Xr).append(s)},sg=function(){const e=document.createElement("div");return e.className="divider",e},x(qs,If),x(qs,mu,null);let ng=qs;var gu,Yr,Kr,Rr,S1,E1,_1;class E_{constructor(e){x(this,Rr);x(this,gu,null);x(this,Yr,null);x(this,Kr);m(this,Kr,e)}show(e,t,s){const[i,r]=A(this,Rr,E1).call(this,t,s),{style:o}=a(this,Yr)||m(this,Yr,A(this,Rr,S1).call(this));e.append(a(this,Yr)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,Yr).remove()}}gu=new WeakMap,Yr=new WeakMap,Kr=new WeakMap,Rr=new WeakSet,S1=function(){const e=m(this,Yr,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",fs,{signal:a(this,Kr)._signal});const t=m(this,gu,document.createElement("div"));return t.className="buttons",e.append(t),A(this,Rr,_1).call(this),e},E1=function(e,t){let s=0,i=0;for(const r of e){const o=r.y+r.height;if(o<s)continue;const l=r.x+(t?r.width:0);if(o>s){i=l,s=o;continue}t?l>i&&(i=l):l<i&&(i=l)}return[t?1-i:i,s]},_1=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=a(this,Kr)._signal;e.addEventListener("contextmenu",fs,{signal:s}),e.addEventListener("click",()=>{a(this,Kr).highlightSelection("floating_button")},{signal:s}),a(this,gu).append(e)};function kf(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var Df;class __{constructor(){x(this,Df,0)}get id(){return`${r_}${Rt(this,Df)._++}`}}Df=new WeakMap;var Wa,yu,Et,Ua,Td;const yy=class yy{constructor(){x(this,Ua);x(this,Wa,v_());x(this,yu,0);x(this,Et,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return ee(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:i,type:r}=e;return A(this,Ua,Td).call(this,`${t}_${s}_${i}_${r}`,e)}async getFromUrl(e){return A(this,Ua,Td).call(this,e,e)}async getFromBlob(e,t){const s=await t;return A(this,Ua,Td).call(this,e,s)}async getFromId(e){a(this,Et)||m(this,Et,new Map);const t=a(this,Et).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){a(this,Et)||m(this,Et,new Map);let s=a(this,Et).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${a(this,Wa)}_${Rt(this,yu)._++}`,refCounter:1,isSvg:!1},a(this,Et).set(e,s),a(this,Et).set(s.id,s),s}getSvgUrl(e){const t=a(this,Et).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;a(this,Et)||m(this,Et,new Map);const t=a(this,Et).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${a(this,Wa)}_`)}};Wa=new WeakMap,yu=new WeakMap,Et=new WeakMap,Ua=new WeakSet,Td=async function(e,t){a(this,Et)||m(this,Et,new Map);let s=a(this,Et).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${a(this,Wa)}_${Rt(this,yu)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(s.url=t,i=await wp(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const r=yy._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((u,h)=>{l.onload=()=>{s.bitmap=l,s.isSvg=!0,u()},o.onload=async()=>{const d=s.svgUrl=o.result;l.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=o.onerror=h});o.readAsDataURL(i),await c}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){Q(i),s=null}return a(this,Et).set(e,s),s&&a(this,Et).set(s.id,s),s};let ig=yy;var ze,$i,vu,Pe;class C_{constructor(e=128){x(this,ze,[]);x(this,$i,!1);x(this,vu);x(this,Pe,-1);m(this,vu,e)}add({cmd:e,undo:t,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(i&&e(),a(this,$i))return;const c={cmd:e,undo:t,post:s,type:r};if(a(this,Pe)===-1){a(this,ze).length>0&&(a(this,ze).length=0),m(this,Pe,0),a(this,ze).push(c);return}if(o&&a(this,ze)[a(this,Pe)].type===r){l&&(c.undo=a(this,ze)[a(this,Pe)].undo),a(this,ze)[a(this,Pe)]=c;return}const u=a(this,Pe)+1;u===a(this,vu)?a(this,ze).splice(0,1):(m(this,Pe,u),u<a(this,ze).length&&a(this,ze).splice(u)),a(this,ze).push(c)}undo(){if(a(this,Pe)===-1)return;m(this,$i,!0);const{undo:e,post:t}=a(this,ze)[a(this,Pe)];e(),t==null||t(),m(this,$i,!1),m(this,Pe,a(this,Pe)-1)}redo(){if(a(this,Pe)<a(this,ze).length-1){m(this,Pe,a(this,Pe)+1),m(this,$i,!0);const{cmd:e,post:t}=a(this,ze)[a(this,Pe)];e(),t==null||t(),m(this,$i,!1)}}hasSomethingToUndo(){return a(this,Pe)!==-1}hasSomethingToRedo(){return a(this,Pe)<a(this,ze).length-1}cleanType(e){if(a(this,Pe)!==-1){for(let t=a(this,Pe);t>=0;t--)if(a(this,ze)[t].type!==e){a(this,ze).splice(t+1,a(this,Pe)-t),m(this,Pe,t);return}a(this,ze).length=0,m(this,Pe,-1)}}destroy(){m(this,ze,null)}}ze=new WeakMap,$i=new WeakMap,vu=new WeakMap,Pe=new WeakMap;var Ff,C1;class Uh{constructor(e){x(this,Ff);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Bt.platform;for(const[s,i,r={}]of e)for(const o of s){const l=o.startsWith("mac+");t&&l?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!l&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(A(this,Ff,C1).call(this,t));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:l=null}}=s;l&&!l(e,t)||(i.bind(e,...o,t)(),r||bn(t))}}Ff=new WeakSet,C1=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Of=class Of{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return S_(e),ee(this,"_colors",e)}convert(e){const t=dy(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((r,o)=>r===t[o]))return Of._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?$.makeHexColor(...t):e}};G(Of,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let rg=Of;var Ga,on,Ke,ut,Va,Ks,qa,Nn,Wi,Qr,Xa,Zr,xs,Kn,Jr,wu,xu,Ya,bu,bs,Ui,Ka,Gi,As,jf,Vi,Au,qi,eo,Su,Eu,nt,de,Qs,to,_u,Cu,Xi,Ss,Zs,ku,Pn,D,Nd,og,k1,T1,Pd,N1,P1,M1,ag,R1,lg,cg,L1,It,Us,I1,D1,ug,F1,bc,hg;const La=class La{constructor(e,t,s,i,r,o,l,c,u,h,d,f,p){x(this,D);x(this,Ga,new AbortController);x(this,on,null);x(this,Ke,new Map);x(this,ut,new Map);x(this,Va,null);x(this,Ks,null);x(this,qa,null);x(this,Nn,new C_);x(this,Wi,null);x(this,Qr,null);x(this,Xa,0);x(this,Zr,new Set);x(this,xs,null);x(this,Kn,null);x(this,Jr,new Set);G(this,"_editorUndoBar",null);x(this,wu,!1);x(this,xu,!1);x(this,Ya,!1);x(this,bu,null);x(this,bs,null);x(this,Ui,null);x(this,Ka,null);x(this,Gi,!1);x(this,As,null);x(this,jf,new __);x(this,Vi,!1);x(this,Au,!1);x(this,qi,null);x(this,eo,null);x(this,Su,null);x(this,Eu,null);x(this,nt,K.NONE);x(this,de,new Set);x(this,Qs,null);x(this,to,null);x(this,_u,null);x(this,Cu,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,Xi,[0,0]);x(this,Ss,null);x(this,Zs,null);x(this,ku,null);x(this,Pn,null);const g=this._signal=a(this,Ga).signal;m(this,Zs,e),m(this,ku,t),m(this,Va,s),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:g}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),i._on("setpreference",this.onSetPreference.bind(this),{signal:g}),i._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:g}),A(this,D,N1).call(this),A(this,D,L1).call(this),A(this,D,ag).call(this),m(this,Ks,r.annotationStorage),m(this,bu,r.filterFactory),m(this,to,o),m(this,Ka,l||null),m(this,wu,c),m(this,xu,u),m(this,Ya,h),m(this,Eu,d||null),this.viewParameters={realScale:Mr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=p!==!1}static get _keyboardManager(){const e=La.prototype,t=o=>a(o,Zs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ee(this,"_keyboardManager",new Uh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Zs).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Zs).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,s,i,r;(e=a(this,Pn))==null||e.resolve(),m(this,Pn,null),(t=a(this,Ga))==null||t.abort(),m(this,Ga,null),this._signal=null;for(const o of a(this,ut).values())o.destroy();a(this,ut).clear(),a(this,Ke).clear(),a(this,Jr).clear(),m(this,on,null),a(this,de).clear(),a(this,Nn).destroy(),(s=a(this,Va))==null||s.destroy(),(i=a(this,As))==null||i.hide(),m(this,As,null),a(this,bs)&&(clearTimeout(a(this,bs)),m(this,bs,null)),a(this,Ss)&&(clearTimeout(a(this,Ss)),m(this,Ss,null)),(r=this._editorUndoBar)==null||r.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return a(this,Eu)}get useNewAltTextFlow(){return a(this,xu)}get useNewAltTextWhenAddingImage(){return a(this,Ya)}get hcmFilter(){return ee(this,"hcmFilter",a(this,to)?a(this,bu).addHCMFilter(a(this,to).foreground,a(this,to).background):"none")}get direction(){return ee(this,"direction",getComputedStyle(a(this,Zs)).direction)}get highlightColors(){return ee(this,"highlightColors",a(this,Ka)?new Map(a(this,Ka).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ee(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),m(this,Qr,e)}setMainHighlightColorPicker(e){m(this,Su,e)}editAltText(e,t=!1){var s;(s=a(this,Va))==null||s.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":m(this,Ya,t);break}}onPageChanging({pageNumber:e}){m(this,Xa,e-1)}focusMainContainer(){a(this,Zs).focus()}findParent(e,t){for(const s of a(this,ut).values()){const{x:i,y:r,width:o,height:l}=s.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=r&&t<=r+l)return s}return null}disableUserSelect(e=!1){a(this,ku).classList.toggle("noUserSelect",e)}addShouldRescale(e){a(this,Jr).add(e)}removeShouldRescale(e){a(this,Jr).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Mr.PDF_TO_CSS_UNITS;for(const s of a(this,Jr))s.onScaleChanging();(t=a(this,Qr))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o}=t,l=t.toString(),u=A(this,D,Nd).call(this,t).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;t.empty();const d=A(this,D,og).call(this,u),f=a(this,nt)===K.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o,text:l}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(K.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&a(this,Ks)&&!a(this,Ks).has(e.id)&&a(this,Ks).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,a(this,Gi)&&(m(this,Gi,!1),A(this,D,Pd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of a(this,de))if(t.div.contains(e)){m(this,eo,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!a(this,eo))return;const[e,t]=a(this,eo);m(this,eo,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){A(this,D,ag).call(this),A(this,D,lg).call(this)}removeEditListeners(){A(this,D,R1).call(this),A(this,D,cg).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of a(this,Kn))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of a(this,Kn))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=a(this,on))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of a(this,de)){const r=i.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of a(this,Kn))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){Q(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of s){const u=await i.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)A(this,D,ug).call(this,c);A(this,D,hg).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){Q(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,nt)!==K.NONE&&!this.isEditorHandlingKeyboard&&La._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,Gi)&&(m(this,Gi,!1),A(this,D,Pd).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(A(this,D,P1).call(this),A(this,D,lg).call(this),A(this,D,It).call(this,{isEditing:a(this,nt)!==K.NONE,isEmpty:A(this,D,bc).call(this),hasSomethingToUndo:a(this,Nn).hasSomethingToUndo(),hasSomethingToRedo:a(this,Nn).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,D,M1).call(this),A(this,D,cg).call(this),A(this,D,It).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!a(this,Kn)){m(this,Kn,e);for(const t of a(this,Kn))A(this,D,Us).call(this,t.defaultPropertiesToUpdate)}}getId(){return a(this,jf).id}get currentLayer(){return a(this,ut).get(a(this,Xa))}getLayer(e){return a(this,ut).get(e)}get currentPageIndex(){return a(this,Xa)}addLayer(e){a(this,ut).set(e.pageIndex,e),a(this,Vi)?e.enable():e.disable()}removeLayer(e){a(this,ut).delete(e.pageIndex)}async updateMode(e,t=null,s=!1){var i;if(a(this,nt)!==e&&!(a(this,Pn)&&(await a(this,Pn).promise,!a(this,Pn)))){if(m(this,Pn,Promise.withResolvers()),m(this,nt,e),e===K.NONE){this.setEditingState(!1),A(this,D,D1).call(this),(i=this._editorUndoBar)==null||i.hide(),a(this,Pn).resolve();return}this.setEditingState(!0),await A(this,D,I1).call(this),this.unselectAll();for(const r of a(this,ut).values())r.updateMode(e);if(!t){s&&this.addNewEditorFromKeyboard(),a(this,Pn).resolve();return}for(const r of a(this,Ke).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();a(this,Pn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==a(this,nt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var s;if(a(this,Kn)){switch(e){case ie.CREATE:this.currentLayer.addNewEditor();return;case ie.HIGHLIGHT_DEFAULT_COLOR:(s=a(this,Su))==null||s.updateColor(t);break;case ie.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,_u)||m(this,_u,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const i of a(this,de))i.updateParams(e,t);for(const i of a(this,Kn))i.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const o of a(this,Ke).values())o.editorType===e&&o.show(t);(((r=a(this,_u))==null?void 0:r.get(ie.HIGHLIGHT_SHOW_ALL))??!0)!==t&&A(this,D,Us).call(this,[[ie.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(a(this,Au)!==e){m(this,Au,e);for(const t of a(this,ut).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of a(this,Ke).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return a(this,Ke).get(e)}addEditor(e){a(this,Ke).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(a(this,bs)&&clearTimeout(a(this,bs)),m(this,bs,setTimeout(()=>{this.focusMainContainer(),m(this,bs,null)},0))),a(this,Ke).delete(e.id),this.unselect(e),(!e.annotationElementId||!a(this,Zr).has(e.annotationElementId))&&((t=a(this,Ks))==null||t.remove(e.id))}addDeletedAnnotationElement(e){a(this,Zr).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return a(this,Zr).has(e)}removeDeletedAnnotationElement(e){a(this,Zr).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){a(this,on)!==e&&(m(this,on,e),e&&A(this,D,Us).call(this,e.propertiesToUpdate))}updateUI(e){a(this,D,F1)===e&&A(this,D,Us).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){A(this,D,Us).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(a(this,de).has(e)){a(this,de).delete(e),e.unselect(),A(this,D,It).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,de).add(e),e.select(),A(this,D,Us).call(this,e.propertiesToUpdate),A(this,D,It).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=a(this,Qr))==null||t.commitOrRemove();for(const s of a(this,de))s!==e&&s.unselect();a(this,de).clear(),a(this,de).add(e),e.select(),A(this,D,Us).call(this,e.propertiesToUpdate),A(this,D,It).call(this,{hasSelectedEditor:!0})}isSelected(e){return a(this,de).has(e)}get firstSelectedEditor(){return a(this,de).values().next().value}unselect(e){e.unselect(),a(this,de).delete(e),A(this,D,It).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,de).size!==0}get isEnterHandled(){return a(this,de).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;a(this,Nn).undo(),A(this,D,It).call(this,{hasSomethingToUndo:a(this,Nn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,D,bc).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){a(this,Nn).redo(),A(this,D,It).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Nn).hasSomethingToRedo(),isEmpty:A(this,D,bc).call(this)})}addCommands(e){a(this,Nn).add(e),A(this,D,It).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,D,bc).call(this)})}cleanUndoStack(e){a(this,Nn).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...a(this,de)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},i=()=>{for(const o of t)A(this,D,ug).call(this,o)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=a(this,on))==null||e.commitOrRemove()}hasSomethingToControl(){return a(this,on)||this.hasSelection}selectAll(){for(const e of a(this,de))e.commit();A(this,D,hg).call(this,a(this,Ke).values())}unselectAll(){var e;if(!(a(this,on)&&(a(this,on).commitOrRemove(),a(this,nt)!==K.NONE))&&!((e=a(this,Qr))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of a(this,de))t.unselect();a(this,de).clear(),A(this,D,It).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;a(this,Xi)[0]+=e,a(this,Xi)[1]+=t;const[i,r]=a(this,Xi),o=[...a(this,de)],l=1e3;a(this,Ss)&&clearTimeout(a(this,Ss)),m(this,Ss,setTimeout(()=>{m(this,Ss,null),a(this,Xi)[0]=a(this,Xi)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,Ke).has(c.id)&&c.translateInPage(i,r)},undo:()=>{for(const c of o)a(this,Ke).has(c.id)&&c.translateInPage(-i,-r)},mustExec:!1})},l));for(const c of o)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),m(this,xs,new Map);for(const e of a(this,de))a(this,xs).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,xs))return!1;this.disableUserSelect(!1);const e=a(this,xs);m(this,xs,null);let t=!1;for(const[{x:i,y:r,pageIndex:o},l]of e)l.newX=i,l.newY=r,l.newPageIndex=o,t||(t=i!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!t)return!1;const s=(i,r,o,l)=>{if(a(this,Ke).has(i.id)){const c=a(this,ut).get(l);c?i._setParentAndPosition(c,r,o):(i.pageIndex=l,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:l}]of e)s(i,r,o,l)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:l}]of e)s(i,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(a(this,xs))for(const s of a(this,xs).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||a(this,de).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return a(this,on)===e}getActive(){return a(this,on)}getMode(){return a(this,nt)}get imageManager(){return ee(this,"imageManager",new ig)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(u,h,d,f)=>({x:(h-i)/o,y:1-(u+d-s)/r,width:f/o,height:d/r});break;case"180":l=(u,h,d,f)=>({x:1-(u+d-s)/r,y:1-(h+f-i)/o,width:d/r,height:f/o});break;case"270":l=(u,h,d,f)=>({x:1-(h+f-i)/o,y:(u-s)/r,width:f/o,height:d/r});break;default:l=(u,h,d,f)=>({x:(u-s)/r,y:(h-i)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:g,height:b}of d.getClientRects())g===0||b===0||c.push(l(f,p,g,b))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(a(this,qa)||m(this,qa,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=a(this,qa))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=a(this,qa))==null?void 0:i.get(e.data.id);if(!t)return;const s=a(this,Ks).getRawValue(t);s&&(a(this,nt)===K.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}};Ga=new WeakMap,on=new WeakMap,Ke=new WeakMap,ut=new WeakMap,Va=new WeakMap,Ks=new WeakMap,qa=new WeakMap,Nn=new WeakMap,Wi=new WeakMap,Qr=new WeakMap,Xa=new WeakMap,Zr=new WeakMap,xs=new WeakMap,Kn=new WeakMap,Jr=new WeakMap,wu=new WeakMap,xu=new WeakMap,Ya=new WeakMap,bu=new WeakMap,bs=new WeakMap,Ui=new WeakMap,Ka=new WeakMap,Gi=new WeakMap,As=new WeakMap,jf=new WeakMap,Vi=new WeakMap,Au=new WeakMap,qi=new WeakMap,eo=new WeakMap,Su=new WeakMap,Eu=new WeakMap,nt=new WeakMap,de=new WeakMap,Qs=new WeakMap,to=new WeakMap,_u=new WeakMap,Cu=new WeakMap,Xi=new WeakMap,Ss=new WeakMap,Zs=new WeakMap,ku=new WeakMap,Pn=new WeakMap,D=new WeakSet,Nd=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},og=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of a(this,ut).values())if(s.hasTextLayer(e))return s;return null},k1=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=A(this,D,Nd).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(a(this,As)||m(this,As,new E_(this)),a(this,As).show(s,i,this.direction==="ltr"))},T1=function(){var r,o,l;const e=document.getSelection();if(!e||e.isCollapsed){a(this,Qs)&&((r=a(this,As))==null||r.hide(),m(this,Qs,null),A(this,D,It).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===a(this,Qs))return;const i=A(this,D,Nd).call(this,e).closest(".textLayer");if(!i){a(this,Qs)&&((o=a(this,As))==null||o.hide(),m(this,Qs,null),A(this,D,It).call(this,{hasSelectedText:!1}));return}if((l=a(this,As))==null||l.hide(),m(this,Qs,t),A(this,D,It).call(this,{hasSelectedText:!0}),!(a(this,nt)!==K.HIGHLIGHT&&a(this,nt)!==K.NONE)&&(a(this,nt)===K.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),m(this,Gi,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,nt)===K.HIGHLIGHT?A(this,D,og).call(this,i):null;c==null||c.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&A(this,D,Pd).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},Pd=function(e=""){a(this,nt)===K.HIGHLIGHT?this.highlightSelection(e):a(this,wu)&&A(this,D,k1).call(this)},N1=function(){document.addEventListener("selectionchange",A(this,D,T1).bind(this),{signal:this._signal})},P1=function(){if(a(this,Ui))return;m(this,Ui,new AbortController);const e=this.combinedSignal(a(this,Ui));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},M1=function(){var e;(e=a(this,Ui))==null||e.abort(),m(this,Ui,null)},ag=function(){if(a(this,qi))return;m(this,qi,new AbortController);const e=this.combinedSignal(a(this,qi));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},R1=function(){var e;(e=a(this,qi))==null||e.abort(),m(this,qi,null)},lg=function(){if(a(this,Wi))return;m(this,Wi,new AbortController);const e=this.combinedSignal(a(this,Wi));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},cg=function(){var e;(e=a(this,Wi))==null||e.abort(),m(this,Wi,null)},L1=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},It=function(e){Object.entries(e).some(([s,i])=>a(this,Cu)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Cu),e)}),a(this,nt)===K.HIGHLIGHT&&e.hasSelectedEditor===!1&&A(this,D,Us).call(this,[[ie.HIGHLIGHT_FREE,!0]]))},Us=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},I1=async function(){if(!a(this,Vi)){m(this,Vi,!0);const e=[];for(const t of a(this,ut).values())e.push(t.enable());await Promise.all(e);for(const t of a(this,Ke).values())t.enable()}},D1=function(){if(this.unselectAll(),a(this,Vi)){m(this,Vi,!1);for(const e of a(this,ut).values())e.disable();for(const e of a(this,Ke).values())e.disable()}},ug=function(e){const t=a(this,ut).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},F1=function(){let e=null;for(e of a(this,de));return e},bc=function(){if(a(this,Ke).size===0)return!0;if(a(this,Ke).size===1)for(const e of a(this,Ke).values())return e.isEmpty();return!1},hg=function(e){for(const t of a(this,de))t.unselect();a(this,de).clear();for(const t of e)t.isEmpty()||(a(this,de).add(t),t.select());A(this,D,It).call(this,{hasSelectedEditor:this.hasSelection})},G(La,"TRANSLATE_SMALL",1),G(La,"TRANSLATE_BIG",10);let oa=La;var st,Es,Qn,Qa,_s,an,Za,Cs,Kt,Js,no,ks,Yi,cs,Ac,Md;const Dt=class Dt{constructor(e){x(this,cs);x(this,st,null);x(this,Es,!1);x(this,Qn,null);x(this,Qa,null);x(this,_s,null);x(this,an,null);x(this,Za,!1);x(this,Cs,null);x(this,Kt,null);x(this,Js,null);x(this,no,null);x(this,ks,!1);m(this,Kt,e),m(this,ks,e._uiManager.useNewAltTextFlow),a(Dt,Yi)||m(Dt,Yi,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Dt._l10n??(Dt._l10n=e)}async render(){const e=m(this,Qn,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=m(this,Qa,document.createElement("span"));e.append(t),a(this,ks)?(e.classList.add("new"),e.setAttribute("data-l10n-id",a(Dt,Yi).missing),t.setAttribute("data-l10n-id",a(Dt,Yi)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=a(this,Kt)._uiManager._signal;e.addEventListener("contextmenu",fs,{signal:s}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),a(this,Kt)._uiManager.editAltText(a(this,Kt)),a(this,ks)&&a(this,Kt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,cs,Ac)}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(m(this,Za,!0),i(r))},{signal:s}),await A(this,cs,Md).call(this),e}finish(){a(this,Qn)&&(a(this,Qn).focus({focusVisible:a(this,Za)}),m(this,Za,!1))}isEmpty(){return a(this,ks)?a(this,st)===null:!a(this,st)&&!a(this,Es)}hasData(){return a(this,ks)?a(this,st)!==null||!!a(this,Js):this.isEmpty()}get guessedText(){return a(this,Js)}async setGuessedText(e){a(this,st)===null&&(m(this,Js,e),m(this,no,await Dt._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),A(this,cs,Md).call(this))}toggleAltTextBadge(e=!1){var t;if(!a(this,ks)||a(this,st)){(t=a(this,Cs))==null||t.remove(),m(this,Cs,null);return}if(!a(this,Cs)){const s=m(this,Cs,document.createElement("div"));s.className="noAltTextBadge",a(this,Kt).div.append(s)}a(this,Cs).classList.toggle("hidden",!e)}serialize(e){let t=a(this,st);return!e&&a(this,Js)===t&&(t=a(this,no)),{altText:t,decorative:a(this,Es),guessedText:a(this,Js),textWithDisclaimer:a(this,no)}}get data(){return{altText:a(this,st),decorative:a(this,Es)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(m(this,Js,s),m(this,no,i)),!(a(this,st)===e&&a(this,Es)===t)&&(r||(m(this,st,e),m(this,Es,t)),A(this,cs,Md).call(this))}toggle(e=!1){a(this,Qn)&&(!e&&a(this,an)&&(clearTimeout(a(this,an)),m(this,an,null)),a(this,Qn).disabled=!e)}shown(){a(this,Kt)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,cs,Ac)}})}destroy(){var e,t;(e=a(this,Qn))==null||e.remove(),m(this,Qn,null),m(this,Qa,null),m(this,_s,null),(t=a(this,Cs))==null||t.remove(),m(this,Cs,null)}};st=new WeakMap,Es=new WeakMap,Qn=new WeakMap,Qa=new WeakMap,_s=new WeakMap,an=new WeakMap,Za=new WeakMap,Cs=new WeakMap,Kt=new WeakMap,Js=new WeakMap,no=new WeakMap,ks=new WeakMap,Yi=new WeakMap,cs=new WeakSet,Ac=function(){return a(this,st)&&"added"||a(this,st)===null&&this.guessedText&&"review"||"missing"},Md=async function(){var i,r,o;const e=a(this,Qn);if(!e)return;if(a(this,ks)){if(e.classList.toggle("done",!!a(this,st)),e.setAttribute("data-l10n-id",a(Dt,Yi)[a(this,cs,Ac)]),(i=a(this,Qa))==null||i.setAttribute("data-l10n-id",a(Dt,Yi)[`${a(this,cs,Ac)}-label`]),!a(this,st)){(r=a(this,_s))==null||r.remove();return}}else{if(!a(this,st)&&!a(this,Es)){e.classList.remove("done"),(o=a(this,_s))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=a(this,_s);if(!t){m(this,_s,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${a(this,Kt).id}`;const l=100,c=a(this,Kt)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,an)),m(this,an,null)},{once:!0}),e.addEventListener("mouseenter",()=>{m(this,an,setTimeout(()=>{m(this,an,null),a(this,_s).classList.add("show"),a(this,Kt)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;a(this,an)&&(clearTimeout(a(this,an)),m(this,an,null)),(u=a(this,_s))==null||u.classList.remove("show")},{signal:c})}a(this,Es)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=a(this,st)),t.parentNode||e.append(t);const s=a(this,Kt).getImageForAltText();s==null||s.setAttribute("aria-describedby",t.id)},x(Dt,Yi,null),G(Dt,"_l10n",null);let Tf=Dt;var Tu,so,Nu,Pu,Mu,Ru,Lu,Ja,ei,io,Ki,Mi,O1,j1,dg;const vy=class vy{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){x(this,Mi);x(this,Tu);x(this,so,!1);x(this,Nu,null);x(this,Pu);x(this,Mu);x(this,Ru);x(this,Lu);x(this,Ja);x(this,ei,null);x(this,io);x(this,Ki,null);m(this,Tu,e),m(this,Nu,s),m(this,Pu,t),m(this,Mu,i),m(this,Ru,r),m(this,Lu,o),m(this,io,new AbortController),m(this,Ja,AbortSignal.any([l,a(this,io).signal])),e.addEventListener("touchstart",A(this,Mi,O1).bind(this),{passive:!1,signal:a(this,Ja)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return ee(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=a(this,io))==null||e.abort(),m(this,io,null)}};Tu=new WeakMap,so=new WeakMap,Nu=new WeakMap,Pu=new WeakMap,Mu=new WeakMap,Ru=new WeakMap,Lu=new WeakMap,Ja=new WeakMap,ei=new WeakMap,io=new WeakMap,Ki=new WeakMap,Mi=new WeakSet,O1=function(e){var i,r,o;if((i=a(this,Pu))!=null&&i.call(this)||e.touches.length<2)return;if(!a(this,Ki)){m(this,Ki,new AbortController);const l=AbortSignal.any([a(this,Ja),a(this,Ki).signal]),c=a(this,Tu),u={signal:l,passive:!1};c.addEventListener("touchmove",A(this,Mi,j1).bind(this),u),c.addEventListener("touchend",A(this,Mi,dg).bind(this),u),c.addEventListener("touchcancel",A(this,Mi,dg).bind(this),u),(r=a(this,Mu))==null||r.call(this)}if(bn(e),e.touches.length!==2||(o=a(this,Nu))!=null&&o.call(this)){m(this,ei,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),m(this,ei,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},j1=function(e){var _;if(!a(this,ei)||e.touches.length!==2)return;let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:r}=t,{screenX:o,screenY:l}=s,c=a(this,ei),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,p=d-u,g=f-h,b=o-i,E=l-r,y=Math.hypot(b,E)||1,v=Math.hypot(p,g)||1;if(!a(this,so)&&Math.abs(v-y)<=vy.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,e.preventDefault(),!a(this,so)){m(this,so,!0);return}const S=[(i+o)/2,(r+l)/2];(_=a(this,Ru))==null||_.call(this,S,v,y)},dg=function(e){var t;a(this,Ki).abort(),m(this,Ki,null),(t=a(this,Lu))==null||t.call(this),a(this,ei)&&(e.preventDefault(),m(this,ei,null),m(this,so,!1))};let Nf=vy;var ro,Zn,Ae,el,Qi,Iu,oo,ht,ao,ti,Zi,Du,lo,ln,Fu,co,ni,Ts,tl,nl,Mn,uo,Ou,Hf,V,fg,ju,pg,Rd,H1,z1,mg,Ld,gg,B1,$1,W1,yg,U1,vg,G1,V1,q1,wg,Sc;const Z=class Z{constructor(e){x(this,V);x(this,ro,null);x(this,Zn,null);x(this,Ae,null);x(this,el,!1);x(this,Qi,null);x(this,Iu,"");x(this,oo,!1);x(this,ht,null);x(this,ao,null);x(this,ti,null);x(this,Zi,null);x(this,Du,"");x(this,lo,!1);x(this,ln,null);x(this,Fu,!1);x(this,co,!1);x(this,ni,!1);x(this,Ts,null);x(this,tl,0);x(this,nl,0);x(this,Mn,null);x(this,uo,null);G(this,"_editToolbar",null);G(this,"_initialOptions",Object.create(null));G(this,"_initialData",null);G(this,"_isVisible",!0);G(this,"_uiManager",null);G(this,"_focusEventsAllowed",!0);x(this,Ou,!1);x(this,Hf,Z._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Z.prototype._resizeWithKeyboard,t=oa.TRANSLATE_SMALL,s=oa.TRANSLATE_BIG;return ee(this,"_resizerKeyboardManager",new Uh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],Z.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return ee(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new k_({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Z._l10n??(Z._l10n=e),Z._l10nResizer||(Z._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Z._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Z._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ve("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,Ou)}set _isDraggable(e){var t;m(this,Ou,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,Hf)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):A(this,V,Sc).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(a(this,lo)?m(this,lo,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[r,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/r,this.y=(t+i)/o,this.fixAndSetPosition()}translate(e,t){A(this,V,fg).call(this,this.parentDimensions,e,t)}translateInPage(e,t){a(this,ln)||m(this,ln,[this.x,this.y,this.width,this.height]),A(this,V,fg).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){a(this,ln)||m(this,ln,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,u]=this.getBaseTranslation();o+=c,l+=u;const{style:h}=s;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!a(this,ln)&&(a(this,ln)[0]!==this.x||a(this,ln)[1]!==this.y)}get _hasBeenResized(){return!!a(this,ln)&&(a(this,ln)[2]!==this.width||a(this,ln)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=Z,i=s/e,r=s/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=s,c*=i,r*=s,o*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(s-l,r)),o=Math.max(0,Math.min(i-c,o));break;case 90:r=Math.max(0,Math.min(s-c,r)),o=Math.min(i,Math.max(l,o));break;case 180:r=Math.min(s,Math.max(l,r)),o=Math.min(i,Math.max(c,o));break;case 270:r=Math.min(s,Math.max(c,r)),o=Math.max(0,Math.min(i-l,o));break}this.x=r/=s,this.y=o/=i;const[u,h]=this.getBaseTranslation();r+=u,o+=h,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return A(s=Z,ju,pg).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return A(s=Z,ju,pg).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(e,t){const[s,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*e/s).toFixed(2)}%`,a(this,oo)||(r.height=`${(100*t/i).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,i=s.endsWith("%"),r=!a(this,oo)&&t.endsWith("%");if(i&&r)return;const[o,l]=this.parentDimensions;i||(e.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!a(this,oo)&&!r&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=a(this,Ae))==null||e.finish()}async addEditToolbar(){return this._editToolbar||a(this,co)?this._editToolbar:(this._editToolbar=new ng(this),this.div.append(this._editToolbar.render()),a(this,Ae)&&await this._editToolbar.addAltText(a(this,Ae)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=a(this,Ae))==null||e.destroy())}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){a(this,Ae)||(Tf.initialize(Z._l10n),m(this,Ae,new Tf(this)),a(this,ro)&&(a(this,Ae).data=a(this,ro),m(this,ro,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=a(this,Ae))==null?void 0:e.data}set altTextData(e){a(this,Ae)&&(a(this,Ae).data=e)}get guessedAltText(){var e;return(e=a(this,Ae))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=a(this,Ae))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=a(this,Ae))==null?void 0:t.serialize(e)}hasAltText(){return!!a(this,Ae)&&!a(this,Ae).isEmpty()}hasAltTextData(){var e;return((e=a(this,Ae))==null?void 0:e.hasData())??!1}render(){var r;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=a(this,el)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),A(this,V,vg).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),kf(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,uo)||m(this,uo,new Nf({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:A(this,V,B1).bind(this),onPinching:A(this,V,$1).bind(this),onPinchEnd:A(this,V,W1).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),this.div}pointerdown(e){const{isMac:t}=Bt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(m(this,lo,!0),this._isDraggable){A(this,V,U1).call(this,e);return}A(this,V,yg).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,Ts)&&clearTimeout(a(this,Ts)),m(this,Ts,setTimeout(()=>{var e;m(this,Ts,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,u=e/i,h=t/i,d=this.x*r,f=this.y*o,p=this.width*r,g=this.height*o;switch(s){case 0:return[d+u+l,o-f-h-g+c,d+u+p+l,o-f-h+c];case 90:return[d+h+l,o-f+u+c,d+h+g+l,o-f+u+p+c];case 180:return[d-u-p+l,o-f+h+c,d-u+l,o-f+h+g+c];case 270:return[d-h-g+l,o-f-u-p+c,d-h+l,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,r,o]=e,l=r-s,c=o-i;switch(this.rotation){case 0:return[s,t-o,l,c];case 90:return[s,t-i,c,l];case 180:return[r,t-i,l,c];case 270:return[r,t-o,c,l];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){m(this,co,!0)}disableEditMode(){m(this,co,!1)}isInEditMode(){return a(this,co)}shouldGetKeyboardEvents(){return a(this,ni)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return t<o&&i>0&&e<r&&s>0}rebuild(){A(this,V,vg).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){ve("An editor must be serializable")}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s});i.rotation=e.rotation,m(i,ro,e.accessibilityData);const[r,o]=i.pageDimensions,[l,c,u,h]=i.getRectInCurrentCoords(e.rect,o);return i.x=l/r,i.y=c/o,i.width=u/r,i.height=h/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=a(this,Zi))==null||e.abort(),m(this,Zi,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,Ts)&&(clearTimeout(a(this,Ts)),m(this,Ts,null)),A(this,V,Sc).call(this),this.removeEditToolbar(),a(this,Mn)){for(const s of a(this,Mn).values())clearTimeout(s);m(this,Mn,null)}this.parent=null,(t=a(this,uo))==null||t.destroy(),m(this,uo,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,V,H1).call(this),a(this,ht).classList.remove("hidden"),kf(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),m(this,ti,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=a(this,ht).children;if(!a(this,Zn)){m(this,Zn,Array.from(t));const o=A(this,V,G1).bind(this),l=A(this,V,V1).bind(this),c=this._uiManager._signal;for(const u of a(this,Zn)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",A(this,V,q1).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",Z._l10nResizer[h])}}const s=a(this,Zn)[0];let i=0;for(const o of t){if(o===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,Zn).length/4);if(r!==i){if(r<i)for(let l=0;l<i-r;l++)a(this,ht).append(a(this,ht).firstChild);else if(r>i)for(let l=0;l<r-i;l++)a(this,ht).firstChild.before(a(this,ht).lastChild);let o=0;for(const l of t){const u=a(this,Zn)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",Z._l10nResizer[u])}}A(this,V,wg).call(this,0),m(this,ni,!0),a(this,ht).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){a(this,ni)&&A(this,V,gg).call(this,a(this,Du),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){A(this,V,Sc).call(this),this.div.focus()}select(){var e,t,s;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(s=a(this,Ae))==null||s.toggleAltTextBadge(!1)}unselect(){var e,t,s,i,r;(e=a(this,ht))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=a(this,Ae))==null||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return a(this,Fu)}set isEditing(e){m(this,Fu,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){m(this,oo,!0);const s=e/t,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){a(this,Mn)||m(this,Mn,new Map);const{action:s}=e;let i=a(this,Mn).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),a(this,Mn).delete(s),a(this,Mn).size===0&&m(this,Mn,null)},Z._telemetryTimeout),a(this,Mn).set(s,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),m(this,el,!1)}disable(){this.div&&(this.div.tabIndex=-1),m(this,el,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};ro=new WeakMap,Zn=new WeakMap,Ae=new WeakMap,el=new WeakMap,Qi=new WeakMap,Iu=new WeakMap,oo=new WeakMap,ht=new WeakMap,ao=new WeakMap,ti=new WeakMap,Zi=new WeakMap,Du=new WeakMap,lo=new WeakMap,ln=new WeakMap,Fu=new WeakMap,co=new WeakMap,ni=new WeakMap,Ts=new WeakMap,tl=new WeakMap,nl=new WeakMap,Mn=new WeakMap,uo=new WeakMap,Ou=new WeakMap,Hf=new WeakMap,V=new WeakSet,fg=function([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},ju=new WeakSet,pg=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Rd=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},H1=function(){if(a(this,ht))return;m(this,ht,document.createElement("div")),a(this,ht).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");a(this,ht).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",A(this,V,z1).bind(this,s),{signal:t}),i.addEventListener("contextmenu",fs,{signal:t}),i.tabIndex=-1}this.div.prepend(a(this,ht))},z1=function(e,t){var h;t.preventDefault();const{isMac:s}=Bt.platform;if(t.button!==0||t.ctrlKey&&s)return;(h=a(this,Ae))==null||h.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,m(this,ao,[t.screenX,t.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",A(this,V,gg).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",bn,{passive:!1,signal:o}),window.addEventListener("contextmenu",fs,{signal:o}),m(this,ti,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=a(this,Ae))==null||d.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=c,A(this,V,Ld).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},mg=function(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t;const[r,o]=this.parentDimensions;this.setDims(r*s,o*i),this.fixAndSetPosition(),this._onResized()},Ld=function(){if(!a(this,ti))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=a(this,ti);m(this,ti,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===e&&o===t&&l===s&&c===i||this.addCommands({cmd:A(this,V,mg).bind(this,r,o,l,c),undo:A(this,V,mg).bind(this,e,t,s,i),mustExec:!0})},gg=function(e,t){const[s,i]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,u=Z.MIN_SIZE/s,h=Z.MIN_SIZE/i,d=A(this,V,Rd).call(this,this.rotation),f=(R,W)=>[d[0]*R+d[2]*W,d[1]*R+d[3]*W],p=A(this,V,Rd).call(this,360-this.rotation),g=(R,W)=>[p[0]*R+p[2]*W,p[1]*R+p[3]*W];let b,E,y=!1,v=!1;switch(e){case"topLeft":y=!0,b=(R,W)=>[0,0],E=(R,W)=>[R,W];break;case"topMiddle":b=(R,W)=>[R/2,0],E=(R,W)=>[R/2,W];break;case"topRight":y=!0,b=(R,W)=>[R,0],E=(R,W)=>[0,W];break;case"middleRight":v=!0,b=(R,W)=>[R,W/2],E=(R,W)=>[0,W/2];break;case"bottomRight":y=!0,b=(R,W)=>[R,W],E=(R,W)=>[0,0];break;case"bottomMiddle":b=(R,W)=>[R/2,W],E=(R,W)=>[R/2,0];break;case"bottomLeft":y=!0,b=(R,W)=>[0,W],E=(R,W)=>[R,0];break;case"middleLeft":v=!0,b=(R,W)=>[0,W/2],E=(R,W)=>[R,W/2];break}const S=b(l,c),_=E(l,c);let C=f(..._);const T=Z._round(r+C[0]),k=Z._round(o+C[1]);let N=1,P=1,L,z;if(t.fromKeyboard)({deltaX:L,deltaY:z}=t);else{const{screenX:R,screenY:W}=t,[I,U]=a(this,ao);[L,z]=this.screenToPageTranslation(R-I,W-U),a(this,ao)[0]=R,a(this,ao)[1]=W}if([L,z]=g(L/s,z/i),y){const R=Math.hypot(l,c);N=P=Math.max(Math.min(Math.hypot(_[0]-S[0]-L,_[1]-S[1]-z)/R,1/l,1/c),u/l,h/c)}else v?N=Math.max(u,Math.min(1,Math.abs(_[0]-S[0]-L)))/l:P=Math.max(h,Math.min(1,Math.abs(_[1]-S[1]-z)))/c;const oe=Z._round(l*N),me=Z._round(c*P);C=f(...E(oe,me));const ne=T-C[0],He=k-C[1];a(this,ln)||m(this,ln,[this.x,this.y,this.width,this.height]),this.width=oe,this.height=me,this.x=ne,this.y=He,this.setDims(s*oe,i*me),this.fixAndSetPosition(),this._onResizing()},B1=function(){var e;m(this,ti,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=a(this,Ae))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},$1=function(e,t,s){let r=.7*(s/t)+1-.7;if(r===1)return;const o=A(this,V,Rd).call(this,this.rotation),l=(T,k)=>[o[0]*T+o[2]*k,o[1]*T+o[3]*k],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,g=Z.MIN_SIZE/c,b=Z.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),g/f,b/p);const E=Z._round(f*r),y=Z._round(p*r);if(E===f&&y===p)return;a(this,ln)||m(this,ln,[h,d,f,p]);const v=l(f/2,p/2),S=Z._round(h+v[0]),_=Z._round(d+v[1]),C=l(E/2,y/2);this.x=S-C[0],this.y=_-C[1],this.width=E,this.height=y,this.setDims(c*E,u*y),this.fixAndSetPosition(),this._onResizing()},W1=function(){var e;(e=a(this,Ae))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),A(this,V,Ld).call(this)},yg=function(e){const{isMac:t}=Bt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},U1=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},l=u=>{i.abort(),m(this,Qi,null),m(this,lo,!1),this._uiManager.endDragSession()||A(this,V,yg).call(this,u),s&&this._onStopDragging()};t&&(m(this,tl,e.clientX),m(this,nl,e.clientY),m(this,Qi,e.pointerId),m(this,Iu,e.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==a(this,Qi)){bn(u);return}const[p,g]=this.screenToPageTranslation(h-a(this,tl),d-a(this,nl));m(this,tl,h),m(this,nl,d),this._uiManager.dragSelectedEditors(p,g)},o),window.addEventListener("touchmove",bn,o),window.addEventListener("pointerdown",u=>{u.pointerType===a(this,Iu)&&(a(this,uo)||u.isPrimary)&&l(u),bn(u)},o));const c=u=>{if(!a(this,Qi)||a(this,Qi)===u.pointerId){l(u);return}bn(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},vg=function(){if(a(this,Zi)||!this.div)return;m(this,Zi,new AbortController);const e=this._uiManager.combinedSignal(a(this,Zi));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},G1=function(e){Z._resizerKeyboardManager.exec(this,e)},V1=function(e){var t;a(this,ni)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==a(this,ht)&&A(this,V,Sc).call(this)},q1=function(e){m(this,Du,a(this,ni)?e:"")},wg=function(e){if(a(this,Zn))for(const t of a(this,Zn))t.tabIndex=e},Sc=function(){m(this,ni,!1),A(this,V,wg).call(this,-1),A(this,V,Ld).call(this)},x(Z,ju),G(Z,"_l10n",null),G(Z,"_l10nResizer",null),G(Z,"_borderLineWidth",-1),G(Z,"_colorManager",new rg),G(Z,"_zIndex",1),G(Z,"_telemetryTimeout",1e3);let Le=Z;class k_ extends Le{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const zv=3285377520,Tn=4294901760,ys=65535;class X1{constructor(e){this.h1=e?e&4294967295:zv,this.h2=e?e&4294967295:zv}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let b=0,E=e.length;b<E;b++){const y=e.charCodeAt(b);y<=255?t[s++]=y:(t[s++]=y>>>8,t[s++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,o=new Uint32Array(t.buffer,0,i);let l=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&ys,g=f&ys;for(let b=0;b<i;b++)b&1?(l=o[b],l=l*d&Tn|l*p&ys,l=l<<15|l>>>17,l=l*f&Tn|l*g&ys,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[b],c=c*d&Tn|c*p&ys,c=c<<15|c>>>17,c=c*f&Tn|c*g&ys,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,r){case 3:l^=t[i*4+2]<<16;case 2:l^=t[i*4+1]<<8;case 1:l^=t[i*4],l=l*d&Tn|l*p&ys,l=l<<15|l>>>17,l=l*f&Tn|l*g&ys,i&1?u^=l:h^=l}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Tn|e*36045&ys,t=t*4283543511&Tn|((t<<16|e>>>16)*2950163797&Tn)>>>16,e^=t>>>1,e=e*444984403&Tn|e*60499&ys,t=t*3301882366&Tn|((t<<16|e>>>16)*3120437893&Tn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const xg=Object.freeze({map:null,hash:"",transfer:void 0});var ho,fo,it,zf,Y1;class fy{constructor(){x(this,zf);x(this,ho,!1);x(this,fo,null);x(this,it,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=a(this,it).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return a(this,it).get(e)}remove(e){if(a(this,it).delete(e),a(this,it).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of a(this,it).values())if(t instanceof Le)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=a(this,it).get(e);let i=!1;if(s!==void 0)for(const[r,o]of Object.entries(t))s[r]!==o&&(i=!0,s[r]=o);else i=!0,a(this,it).set(e,t);i&&A(this,zf,Y1).call(this),t instanceof Le&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return a(this,it).has(e)}getAll(){return a(this,it).size>0?ay(a(this,it)):null}setAll(e){for(const[t,s]of Object.entries(e))this.setValue(t,s)}get size(){return a(this,it).size}resetModified(){a(this,ho)&&(m(this,ho,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new K1(this)}get serializable(){if(a(this,it).size===0)return xg;const e=new Map,t=new X1,s=[],i=Object.create(null);let r=!1;for(const[o,l]of a(this,it)){const c=l instanceof Le?l.serialize(!1,i):l;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:xg}get editorStats(){let e=null;const t=new Map;for(const s of a(this,it).values()){if(!(s instanceof Le))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;t.has(r)||t.set(r,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const o=e[r]||(e[r]=new Map);for(const[l,c]of Object.entries(i)){if(l==="type")continue;let u=o.get(l);u||(u=new Map,o.set(l,u));const h=u.get(c)??0;u.set(c,h+1)}}for(const[s,i]of t)e[s]=i.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){m(this,fo,null)}get modifiedIds(){if(a(this,fo))return a(this,fo);const e=[];for(const t of a(this,it).values())!(t instanceof Le)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return m(this,fo,{ids:new Set(e),hash:e.join(",")})}}ho=new WeakMap,fo=new WeakMap,it=new WeakMap,zf=new WeakSet,Y1=function(){a(this,ho)||(m(this,ho,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Hu;class K1 extends fy{constructor(t){super();x(this,Hu);const{map:s,hash:i,transfer:r}=t.serializable,o=structuredClone(s,r?{transfer:r}:null);m(this,Hu,{map:o,hash:i,transfer:r})}get print(){ve("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,Hu)}get modifiedIds(){return ee(this,"modifiedIds",{ids:new Set,hash:""})}}Hu=new WeakMap;var sl;class T_{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){x(this,sl,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),a(this,sl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||a(this,sl).has(e.loadedName))){if(Ve(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:r}=e,o=new FontFace(s,i,r);this.addNativeFontFace(o);try{await o.load(),a(this,sl).add(s),t==null||t(e)}catch{Q(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}ve("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw Q(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ee(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Pt||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ee(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Ve(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ee(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(_,C){return _.charCodeAt(C)<<24|_.charCodeAt(C+1)<<16|_.charCodeAt(C+2)<<8|_.charCodeAt(C+3)&255}function i(_,C,T,k){const N=_.substring(0,C),P=_.substring(C+T);return N+k+P}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function h(_,C){if(++u>30){Q("Load test font never loaded."),C();return}if(c.font="30px "+_,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(h.bind(null,_,C))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,d.length,d);const g=16,b=1482184792;let E=s(f,g);for(r=0,o=d.length-3;r<o;r+=4)E=E-b+s(d,r)|0;r<d.length&&(E=E-b+s(d+"XXX",r)|0),f=i(f,g,4,f_(E));const y=`url(data:font/opentype;base64,${btoa(f)});`,v=`@font-face {font-family:"${d}";src:${y}}`;this.insertRule(v);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const _ of[e.loadedName,d]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=_,S.append(C)}this._document.body.append(S),h(d,()=>{S.remove(),t.complete()})}}sl=new WeakMap;class N_{constructor(e,{disableFontFace:t=!1,fontExtraProperties:s=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this.fontExtraProperties=s===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${w_(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(o){Q(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=r}}const cd={DATA:1,ERROR:2},Ue={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Bv(){}function Xt(n){if(n instanceof Pr||n instanceof Jm||n instanceof uu||n instanceof Ov||n instanceof Cf||n instanceof Zp)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||ve('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Pr(n.message);case"InvalidPDFException":return new Jm(n.message);case"MissingPDFException":return new uu(n.message);case"PasswordException":return new Ov(n.message,n.code);case"UnexpectedResponseException":return new Cf(n.message,n.status);case"UnknownErrorException":return new Zp(n.message,n.details)}return new Zp(n.message,n.toString())}var il,$n,Q1,Z1,J1,Id;class Ec{constructor(e,t,s){x(this,$n);x(this,il,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",A(this,$n,Q1).bind(this),{signal:a(this,il).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,s,i){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:r,data:t,desiredSize:u.desiredSize},i),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:l,stream:Ue.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{Ve(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:Ue.CANCEL,streamId:r,reason:Xt(u)}),h.promise}},s)}destroy(){var e;(e=a(this,il))==null||e.abort(),m(this,il,null)}}il=new WeakMap,$n=new WeakSet,Q1=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){A(this,$n,J1).call(this,e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===cd.DATA)i.resolve(e.data);else if(e.callback===cd.ERROR)i.reject(Xt(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(o){r.postMessage({sourceName:s,targetName:i,callback:cd.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:i,callback:cd.ERROR,callbackId:e.callbackId,reason:Xt(o)})});return}if(e.streamId){A(this,$n,Z1).call(this,e);return}t(e.data)},Z1=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,o=this,l=this.actionHandler[e.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:Ue.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Ue.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){Ve(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:Ue.ERROR,streamId:t,reason:Xt(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(l,e.data,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Ue.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:Ue.START_COMPLETE,streamId:t,reason:Xt(u)})})},J1=function(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,r=this.comObj,o=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Ue.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Xt(e.reason));break;case Ue.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Xt(e.reason));break;case Ue.PULL:if(!l){r.postMessage({sourceName:s,targetName:i,stream:Ue.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||Bv).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Ue.PULL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:Ue.PULL_COMPLETE,streamId:t,reason:Xt(u)})});break;case Ue.ENQUEUE:if(Ve(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Ue.CLOSE:if(Ve(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),A(this,$n,Id).call(this,o,t);break;case Ue.ERROR:Ve(o,"error should have stream controller"),o.controller.error(Xt(e.reason)),A(this,$n,Id).call(this,o,t);break;case Ue.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Xt(e.reason)),A(this,$n,Id).call(this,o,t);break;case Ue.CANCEL:if(!l)break;const c=Xt(e.reason);Promise.try(l.onCancel||Bv,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:Ue.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:s,targetName:i,stream:Ue.CANCEL_COMPLETE,streamId:t,reason:Xt(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Id=async function(e,t){var s,i,r;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(i=e.pullCall)==null?void 0:i.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var zu;class eb{constructor({enableHWA:e=!1}){x(this,zu,!1);m(this,zu,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!a(this,zu)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ve("Abstract method `_createCanvas` called.")}}zu=new WeakMap;class P_ extends eb{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class tb{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){ve("Abstract method `_fetch` called.")}}class nb extends tb{async _fetch(e){const t=await wp(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):vp(t)}}class sb{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,r){return"none"}destroy(e=!1){}}var po,rl,si,ii,_t,mo,go,F,At,_c,pa,Dd,ma,ib,bg,ga,Cc,kc,Ag,Tc;class M_ extends sb{constructor({docId:t,ownerDocument:s=globalThis.document}){super();x(this,F);x(this,po);x(this,rl);x(this,si);x(this,ii);x(this,_t);x(this,mo);x(this,go,0);m(this,ii,t),m(this,_t,s)}addFilter(t){if(!t)return"none";let s=a(this,F,At).get(t);if(s)return s;const[i,r,o]=A(this,F,Dd).call(this,t),l=t.length===1?i:`${i}${r}${o}`;if(s=a(this,F,At).get(l),s)return a(this,F,At).set(t,s),s;const c=`g_${a(this,ii)}_transfer_map_${Rt(this,go)._++}`,u=A(this,F,ma).call(this,c);a(this,F,At).set(t,u),a(this,F,At).set(l,u);const h=A(this,F,ga).call(this,c);return A(this,F,kc).call(this,i,r,o,h),u}addHCMFilter(t,s){var g;const i=`${t}-${s}`,r="base";let o=a(this,F,_c).get(r);if((o==null?void 0:o.key)===i||(o?((g=o.filter)==null||g.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},a(this,F,_c).set(r,o)),!t||!s))return o.url;const l=A(this,F,Tc).call(this,t);t=$.makeHexColor(...l);const c=A(this,F,Tc).call(this,s);if(s=$.makeHexColor(...c),a(this,F,pa).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const u=new Array(256);for(let b=0;b<=255;b++){const E=b/255;u[b]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const h=u.join(","),d=`g_${a(this,ii)}_hcm_filter`,f=o.filter=A(this,F,ga).call(this,d);A(this,F,kc).call(this,h,h,h,f),A(this,F,bg).call(this,f);const p=(b,E)=>{const y=l[b]/255,v=c[b]/255,S=new Array(E+1);for(let _=0;_<=E;_++)S[_]=y+_/E*(v-y);return S.join(",")};return A(this,F,kc).call(this,p(0,5),p(1,5),p(2,5),f),o.url=A(this,F,ma).call(this,d),o.url}addAlphaFilter(t){let s=a(this,F,At).get(t);if(s)return s;const[i]=A(this,F,Dd).call(this,[t]),r=`alpha_${i}`;if(s=a(this,F,At).get(r),s)return a(this,F,At).set(t,s),s;const o=`g_${a(this,ii)}_alpha_map_${Rt(this,go)._++}`,l=A(this,F,ma).call(this,o);a(this,F,At).set(t,l),a(this,F,At).set(r,l);const c=A(this,F,ga).call(this,o);return A(this,F,Ag).call(this,i,c),l}addLuminosityFilter(t){let s=a(this,F,At).get(t||"luminosity");if(s)return s;let i,r;if(t?([i]=A(this,F,Dd).call(this,[t]),r=`luminosity_${i}`):r="luminosity",s=a(this,F,At).get(r),s)return a(this,F,At).set(t,s),s;const o=`g_${a(this,ii)}_luminosity_map_${Rt(this,go)._++}`,l=A(this,F,ma).call(this,o);a(this,F,At).set(t,l),a(this,F,At).set(r,l);const c=A(this,F,ga).call(this,o);return A(this,F,ib).call(this,c),t&&A(this,F,Ag).call(this,i,c),l}addHighlightHCMFilter(t,s,i,r,o){var v;const l=`${s}-${i}-${r}-${o}`;let c=a(this,F,_c).get(t);if((c==null?void 0:c.key)===l||(c?((v=c.filter)==null||v.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,F,_c).set(t,c)),!s||!i))return c.url;const[u,h]=[s,i].map(A(this,F,Tc).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,g]=[r,o].map(A(this,F,Tc).bind(this));f<d&&([d,f,p,g]=[f,d,g,p]),a(this,F,pa).style.color="";const b=(S,_,C)=>{const T=new Array(256),k=(f-d)/C,N=S/255,P=(_-S)/(255*C);let L=0;for(let z=0;z<=C;z++){const oe=Math.round(d+z*k),me=N+z*P;for(let ne=L;ne<=oe;ne++)T[ne]=me;L=oe+1}for(let z=L;z<256;z++)T[z]=T[L-1];return T.join(",")},E=`g_${a(this,ii)}_hcm_${t}_filter`,y=c.filter=A(this,F,ga).call(this,E);return A(this,F,bg).call(this,y),A(this,F,kc).call(this,b(p[0],g[0],5),b(p[1],g[1],5),b(p[2],g[2],5),y),c.url=A(this,F,ma).call(this,E),c.url}destroy(t=!1){var s,i,r,o;t&&((s=a(this,mo))!=null&&s.size)||((i=a(this,si))==null||i.parentNode.parentNode.remove(),m(this,si,null),(r=a(this,rl))==null||r.clear(),m(this,rl,null),(o=a(this,mo))==null||o.clear(),m(this,mo,null),m(this,go,0))}}po=new WeakMap,rl=new WeakMap,si=new WeakMap,ii=new WeakMap,_t=new WeakMap,mo=new WeakMap,go=new WeakMap,F=new WeakSet,At=function(){return a(this,rl)||m(this,rl,new Map)},_c=function(){return a(this,mo)||m(this,mo,new Map)},pa=function(){if(!a(this,si)){const t=a(this,_t).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=a(this,_t).createElementNS(Ws,"svg");i.setAttribute("width",0),i.setAttribute("height",0),m(this,si,a(this,_t).createElementNS(Ws,"defs")),t.append(i),i.append(a(this,si)),a(this,_t).body.append(t)}return a(this,si)},Dd=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[s,i,r]=t,o=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=s[u]/255,l[u]=i[u]/255,c[u]=r[u]/255;return[o.join(","),l.join(","),c.join(",")]},ma=function(t){if(a(this,po)===void 0){m(this,po,"");const s=a(this,_t).URL;s!==a(this,_t).baseURI&&(xp(s)?Q('#createUrl: ignore "data:"-URL for performance reasons.'):m(this,po,s.split("#",1)[0]))}return`url(${a(this,po)}#${t})`},ib=function(t){const s=a(this,_t).createElementNS(Ws,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},bg=function(t){const s=a(this,_t).createElementNS(Ws,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},ga=function(t){const s=a(this,_t).createElementNS(Ws,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),a(this,F,pa).append(s),s},Cc=function(t,s,i){const r=a(this,_t).createElementNS(Ws,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)},kc=function(t,s,i,r){const o=a(this,_t).createElementNS(Ws,"feComponentTransfer");r.append(o),A(this,F,Cc).call(this,o,"feFuncR",t),A(this,F,Cc).call(this,o,"feFuncG",s),A(this,F,Cc).call(this,o,"feFuncB",i)},Ag=function(t,s){const i=a(this,_t).createElementNS(Ws,"feComponentTransfer");s.append(i),A(this,F,Cc).call(this,i,"feFuncA",t)},Tc=function(t){return a(this,F,pa).style.color=t,dy(getComputedStyle(a(this,F,pa)).getPropertyValue("color"))};class rb{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){ve("Abstract method `_fetch` called.")}}class ob extends rb{async _fetch(e){const t=await wp(e,"arraybuffer");return new Uint8Array(t)}}Pt&&Q("Please use the `legacy` build in Node.js environments.");async function ab(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class R_ extends sb{}class L_ extends eb{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class I_ extends tb{async _fetch(e){return ab(e)}}class D_ extends rb{async _fetch(e){return ab(e)}}const Tt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Sg(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class py{getPattern(){ve("Abstract method `getPattern` called.")}}class F_ extends py{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let r;if(i===Tt.STROKE||i===Tt.FILL){const o=t.current.getClippedPathBoundingBox(i,ke(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",l,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),s=$.transform(s,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),Sg(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(s);r.setTransform(d)}else Sg(e,this._bbox),r=this._createGradient(e);return r}}function tm(n,e,t,s,i,r,o,l){const c=e.coords,u=e.colors,h=n.data,d=n.width*4;let f;c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=r,r=o,o=f),c[s+1]>c[i+1]&&(f=s,s=i,i=f,f=o,o=l,l=f),c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=r,r=o,o=f);const p=(c[t]+e.offsetX)*e.scaleX,g=(c[t+1]+e.offsetY)*e.scaleY,b=(c[s]+e.offsetX)*e.scaleX,E=(c[s+1]+e.offsetY)*e.scaleY,y=(c[i]+e.offsetX)*e.scaleX,v=(c[i+1]+e.offsetY)*e.scaleY;if(g>=v)return;const S=u[r],_=u[r+1],C=u[r+2],T=u[o],k=u[o+1],N=u[o+2],P=u[l],L=u[l+1],z=u[l+2],oe=Math.round(g),me=Math.round(v);let ne,He,R,W,I,U,q,re;for(let se=oe;se<=me;se++){if(se<E){const he=se<g?0:(g-se)/(g-E);ne=p-(p-b)*he,He=S-(S-T)*he,R=_-(_-k)*he,W=C-(C-N)*he}else{let he;se>v?he=1:E===v?he=0:he=(E-se)/(E-v),ne=b-(b-y)*he,He=T-(T-P)*he,R=k-(k-L)*he,W=N-(N-z)*he}let _e;se<g?_e=0:se>v?_e=1:_e=(g-se)/(g-v),I=p-(p-y)*_e,U=S-(S-P)*_e,q=_-(_-L)*_e,re=C-(C-z)*_e;const Vt=Math.round(Math.min(ne,I)),Bs=Math.round(Math.max(ne,I));let Fe=d*se+Vt*4;for(let he=Vt;he<=Bs;he++)_e=(ne-he)/(ne-I),_e<0?_e=0:_e>1&&(_e=1),h[Fe++]=He-(He-U)*_e|0,h[Fe++]=R-(R-q)*_e|0,h[Fe++]=W-(W-re)*_e|0,h[Fe++]=255}}function O_(n,e,t){const s=e.coords,i=e.colors;let r,o;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(s.length/l)-1,u=l-1;for(r=0;r<c;r++){let h=r*l;for(let d=0;d<u;d++,h++)tm(n,t,s[h],s[h+1],s[h+l],i[h],i[h+1],i[h+l]),tm(n,t,s[h+l+1],s[h+1],s[h+l],i[h+l+1],i[h+1],i[h+l])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)tm(n,t,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class j_ extends py{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,s){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),p=u/d,g=h/f,b={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/p,scaleY:1/g},E=d+2*2,y=f+2*2,v=s.getCanvas("mesh",E,y),S=v.context,_=S.createImageData(d,f);if(t){const T=_.data;for(let k=0,N=T.length;k<N;k+=4)T[k]=t[0],T[k+1]=t[1],T[k+2]=t[2],T[k+3]=255}for(const T of this._figures)O_(_,T,b);return S.putImageData(_,2,2),{canvas:v.canvas,offsetX:l-2*p,offsetY:c-2*g,scaleX:p,scaleY:g}}getPattern(e,t,s,i){Sg(e,this._bbox);let r;if(i===Tt.SHADING)r=$.singularValueDecompose2dScale(ke(e));else if(r=$.singularValueDecompose2dScale(t.baseTransform),this.matrix){const l=$.singularValueDecompose2dScale(this.matrix);r=[r[0]*l[0],r[1]*l[1]]}const o=this._createMeshCanvas(r,i===Tt.SHADING?null:this._background,t.cachedCanvases);return i!==Tt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class H_ extends py{getPattern(){return"hotpink"}}function z_(n){switch(n[0]){case"RadialAxial":return new F_(n);case"Mesh":return new j_(n);case"Dummy":return new H_}throw new Error(`Unknown IR type: ${n[0]}`)}const $v={COLORED:1,UNCOLORED:2},Bf=class Bf{constructor(e,t,s,i,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=s,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:s,paintType:i,tilingType:r,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),yp("TilingType: "+r);const h=t[0],d=t[1],f=t[2],p=t[3],g=f-h,b=p-d,E=$.singularValueDecompose2dScale(this.matrix),y=$.singularValueDecompose2dScale(this.baseTransform),v=E[0]*y[0],S=E[1]*y[1];let _=g,C=b,T=!1,k=!1;const N=Math.ceil(c*v),P=Math.ceil(u*S),L=Math.ceil(g*v),z=Math.ceil(b*S);N>=L?_=c:T=!0,P>=z?C=u:k=!0;const oe=this.getSizeAndScale(_,this.ctx.canvas.width,v),me=this.getSizeAndScale(C,this.ctx.canvas.height,S),ne=e.cachedCanvases.getCanvas("pattern",oe.size,me.size),He=ne.context,R=l.createCanvasGraphics(He);if(R.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(R,i,o),He.translate(-oe.scale*h,-me.scale*d),R.transform(oe.scale,0,0,me.scale,0,0),He.save(),this.clipBbox(R,h,d,f,p),R.baseTransform=ke(R.ctx),R.executeOperatorList(s),R.endDrawing(),He.restore(),T||k){const W=ne.canvas;T&&(_=c),k&&(C=u);const I=this.getSizeAndScale(_,this.ctx.canvas.width,v),U=this.getSizeAndScale(C,this.ctx.canvas.height,S),q=I.size,re=U.size,se=e.cachedCanvases.getCanvas("pattern-workaround",q,re),_e=se.context,Vt=T?Math.floor(g/c):0,Bs=k?Math.floor(b/u):0;for(let Fe=0;Fe<=Vt;Fe++)for(let he=0;he<=Bs;he++)_e.drawImage(W,q*Fe,re*he,q,re,0,0,q,re);return{canvas:se.canvas,scaleX:I.scale,scaleY:U.scale,offsetX:h,offsetY:d}}return{canvas:ne.canvas,scaleX:oe.scale,scaleY:me.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,s){const i=Math.max(Bf.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=i?r=i:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,i,r){const o=i-t,l=r-s;e.ctx.rect(t,s,o,l),e.current.updateRectMinMax(ke(e.ctx),[t,s,i,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,r=e.current;switch(t){case $v.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case $v.UNCOLORED:const l=$.makeHexColor(s[0],s[1],s[2]);i.fillStyle=l,i.strokeStyle=l,r.fillColor=l,r.strokeColor=l;break;default:throw new d_(`Unsupported paint type: ${t}`)}}getPattern(e,t,s,i){let r=s;i!==Tt.SHADING&&(r=$.transform(r,t.baseTransform),this.matrix&&(r=$.transform(r,this.matrix)));const o=this.createPatternCanvas(t);let l=new DOMMatrix(r);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};G(Bf,"MAX_PATTERN_SIZE",3e3);let Eg=Bf;function B_({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=Bt.isLittleEndian?4278190080:255,[c,u]=o?[r,l]:[l,r],h=s>>3,d=s&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let g=0;g<i;g++){for(const E=e+h;e<E;e++){const y=e<f?n[e]:255;t[p++]=y&128?u:c,t[p++]=y&64?u:c,t[p++]=y&32?u:c,t[p++]=y&16?u:c,t[p++]=y&8?u:c,t[p++]=y&4?u:c,t[p++]=y&2?u:c,t[p++]=y&1?u:c}if(d===0)continue;const b=e<f?n[e++]:255;for(let E=0;E<d;E++)t[p++]=b&1<<7-E?u:c}return{srcPos:e,destPos:p}}const Wv=16,Uv=100,$_=15,Gv=10,Vv=1e3,Jt=16;function W_(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(s,i){e.translate(s,i),this.__originalTranslate(s,i)},n.scale=function(s,i){e.scale(s,i),this.__originalScale(s,i)},n.transform=function(s,i,r,o,l,c){e.transform(s,i,r,o,l,c),this.__originalTransform(s,i,r,o,l,c)},n.setTransform=function(s,i,r,o,l,c){e.setTransform(s,i,r,o,l,c),this.__originalSetTransform(s,i,r,o,l,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(s){e.rotate(s),this.__originalRotate(s)},n.clip=function(s){e.clip(s),this.__originalClip(s)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,r,o,l){e.bezierCurveTo(t,s,i,r,o,l),this.__originalBezierCurveTo(t,s,i,r,o,l)},n.rect=function(t,s,i,r){e.rect(t,s,i,r),this.__originalRect(t,s,i,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class U_{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function ud(n,e,t,s,i,r,o,l,c,u){const[h,d,f,p,g,b]=ke(n);if(d===0&&f===0){const v=o*h+g,S=Math.round(v),_=l*p+b,C=Math.round(_),T=(o+c)*h+g,k=Math.abs(Math.round(T)-S)||1,N=(l+u)*p+b,P=Math.abs(Math.round(N)-C)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),S,C),n.drawImage(e,t,s,i,r,0,0,k,P),n.setTransform(h,d,f,p,g,b),[k,P]}if(h===0&&p===0){const v=l*f+g,S=Math.round(v),_=o*d+b,C=Math.round(_),T=(l+u)*f+g,k=Math.abs(Math.round(T)-S)||1,N=(o+c)*d+b,P=Math.abs(Math.round(N)-C)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,S,C),n.drawImage(e,t,s,i,r,0,0,P,k),n.setTransform(h,d,f,p,g,b),[P,k]}n.drawImage(e,t,s,i,r,o,l,c,u);const E=Math.hypot(h,d),y=Math.hypot(f,p);return[E*c,y*u]}function G_(n){const{width:e,height:t}=n;if(e>Vv||t>Vv)return null;const s=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let o=new Uint8Array(r*(t+1)),l,c,u;const h=e+7&-8;let d=new Uint8Array(h*t),f=0;for(const y of n.data){let v=128;for(;v>0;)d[f++]=y&v?0:255,v>>=1}let p=0;for(f=0,d[f]!==0&&(o[0]=1,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(o[c]=d[f]?2:1,++p),f++;for(d[f]!==0&&(o[c]=2,++p),l=1;l<t;l++){f=l*h,u=l*r,d[f-h]!==d[f]&&(o[u]=d[f]?1:8,++p);let y=(d[f]?4:0)+(d[f-h]?8:0);for(c=1;c<e;c++)y=(y>>2)+(d[f+1]?4:0)+(d[f-h+1]?8:0),i[y]&&(o[u+c]=i[y],++p),f++;if(d[f-h]!==d[f]&&(o[u+c]=d[f]?2:4,++p),p>s)return null}for(f=h*(t-1),u=l*r,d[f]!==0&&(o[u]=8,++p),c=1;c<e;c++)d[f]!==d[f+1]&&(o[u+c]=d[f]?4:8,++p),f++;if(d[f]!==0&&(o[u+c]=4,++p),p>s)return null;const g=new Int32Array([0,r,-1,0,-r,0,0,0,1]),b=new Path2D;for(l=0;p&&l<=t;l++){let y=l*r;const v=y+e;for(;y<v&&!o[y];)y++;if(y===v)continue;b.moveTo(y%r,l);const S=y;let _=o[y];do{const C=g[_];do y+=C;while(!o[y]);const T=o[y];T!==5&&T!==10?(_=T,o[y]=0):(_=T&51*_>>4,o[y]&=_>>2|_<<2),b.lineTo(y%r,y/r|0),o[y]||--p}while(S!==y);--l}return d=null,o=null,function(y){y.save(),y.scale(1/e,-1/t),y.translate(0,-t),y.fill(b),y.beginPath(),y.restore()}}class qv{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=y1,this.textMatrixScale=1,this.fontMatrix=Zm,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=bt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,s){[t,s]=$.applyTransform([t,s],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(e,t){const s=$.applyTransform(t,e),i=$.applyTransform(t.slice(2),e),r=$.applyTransform([t[0],t[3]],e),o=$.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,s[0],i[0],r[0],o[0]),this.minY=Math.min(this.minY,s[1],i[1],r[1],o[1]),this.maxX=Math.max(this.maxX,s[0],i[0],r[0],o[0]),this.maxY=Math.max(this.maxY,s[1],i[1],r[1],o[1])}updateScalingPathMinMax(e,t){$.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,s,i,r,o,l,c,u,h){const d=$.bezierBoundingBox(t,s,i,r,o,l,c,u,h);h||this.updateRectMinMax(e,d)}getPathBoundingBox(e=Tt.FILL,t=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(e===Tt.STROKE){t||ve("Stroke bounding box must include transform.");const i=$.singularValueDecompose2dScale(t),r=i[0]*this.lineWidth/2,o=i[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const e=$.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Tt.FILL,t=null){return $.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Xv(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%Jt,r=(t-i)/Jt,o=i===0?r:r+1,l=n.createImageData(s,Jt);let c=0,u;const h=e.data,d=l.data;let f,p,g,b;if(e.kind===_d.GRAYSCALE_1BPP){const E=h.byteLength,y=new Uint32Array(d.buffer,0,d.byteLength>>2),v=y.length,S=s+7>>3,_=4294967295,C=Bt.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(g=f<r?Jt:i,u=0,p=0;p<g;p++){const T=E-c;let k=0;const N=T>S?s:T*8-7,P=N&-8;let L=0,z=0;for(;k<P;k+=8)z=h[c++],y[u++]=z&128?_:C,y[u++]=z&64?_:C,y[u++]=z&32?_:C,y[u++]=z&16?_:C,y[u++]=z&8?_:C,y[u++]=z&4?_:C,y[u++]=z&2?_:C,y[u++]=z&1?_:C;for(;k<N;k++)L===0&&(z=h[c++],L=128),y[u++]=z&L?_:C,L>>=1}for(;u<v;)y[u++]=0;n.putImageData(l,0,f*Jt)}}else if(e.kind===_d.RGBA_32BPP){for(p=0,b=s*Jt*4,f=0;f<r;f++)d.set(h.subarray(c,c+b)),c+=b,n.putImageData(l,0,p),p+=Jt;f<o&&(b=s*i*4,d.set(h.subarray(c,c+b)),n.putImageData(l,0,p))}else if(e.kind===_d.RGB_24BPP)for(g=Jt,b=s*g,f=0;f<o;f++){for(f>=r&&(g=i,b=s*g),u=0,p=b;p--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(l,0,f*Jt)}else throw new Error(`bad image kind: ${e.kind}`)}function Yv(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%Jt,r=(t-i)/Jt,o=i===0?r:r+1,l=n.createImageData(s,Jt);let c=0;const u=e.data,h=l.data;for(let d=0;d<o;d++){const f=d<r?Jt:i;({srcPos:c}=B_({src:u,srcPos:c,dest:h,width:s,height:f,nonBlackColor:0})),n.putImageData(l,0,d*Jt)}}function fc(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function hd(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Pt){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function Kv(n,e){if(e)return!0;const t=$.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*Mr.PDF_TO_CSS_UNITS);return t[0]<=s&&t[1]<=s}const V_=["butt","round","square"],q_=["miter","round","bevel"],X_={},Qv={};var ps,_g,Cg,kg;const wy=class wy{constructor(e,t,s,i,r,{optionalContentConfig:o,markedContentStack:l=null},c,u){x(this,ps);this.ctx=e,this.current=new qv(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new U_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,s){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...ke(this.compositeCtx))}this.ctx.save(),hd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ke(this.ctx)}executeOperatorList(e,t,s,i){const r=e.argsArray,o=e.fnArray;let l=t||0;const c=r.length;if(c===l)return l;const u=c-l>Gv&&typeof s=="function",h=u?Date.now()+$_:0;let d=0;const f=this.commonObjs,p=this.objs;let g;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,s),l;if(g=o[l],g!==Xn.dependency)this[g].apply(this,r[l]);else for(const b of r[l]){const E=b.startsWith("g_")?f:p;if(!E.has(b))return E.get(b,s),l}if(l++,l===c)return l;if(u&&++d>Gv){if(Date.now()>h)return s(),l;d=0}}}endDrawing(){A(this,ps,_g).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),A(this,ps,Cg).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=s,c=i,u="prescale1",h,d;for(;r>2&&l>1||o>2&&c>1;){let f=l,p=c;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(e,0,0,l,c,0,0,f,p),e=h.canvas,l=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:i}=e,r=this.current.fillColor,o=this.current.patternFill,l=ke(t);let c,u,h,d;if((e.bitmap||e.data)&&e.count>1){const N=e.bitmap||e.data.buffer;u=JSON.stringify(o?l:[l.slice(0,4),r]),c=this._cachedBitmapsMap.get(N),c||(c=new Map,this._cachedBitmapsMap.set(N,c));const P=c.get(u);if(P&&!o){const L=Math.round(Math.min(l[0],l[2])+l[4]),z=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:P,offsetX:L,offsetY:z}}h=P}h||(d=this.cachedCanvases.getCanvas("maskCanvas",s,i),Yv(d.context,e));let f=$.transform(l,[1/s,0,0,-1/i,0,0]);f=$.transform(f,[1,0,0,1,0,-i]);const[p,g,b,E]=$.getAxialAlignedBoundingBox([0,0,s,i],f),y=Math.round(b-p)||1,v=Math.round(E-g)||1,S=this.cachedCanvases.getCanvas("fillCanvas",y,v),_=S.context,C=p,T=g;_.translate(-C,-T),_.transform(...f),h||(h=this._scaleImage(d.canvas,gs(_)),h=h.img,c&&o&&c.set(u,h)),_.imageSmoothingEnabled=Kv(ke(_),e.interpolate),ud(_,h,0,0,h.width,h.height,0,0,s,i),_.globalCompositeOperation="source-in";const k=$.transform(gs(_),[1,0,0,1,-C,-T]);return _.fillStyle=o?r.getPattern(t,this,k,Tt.FILL):r,_.fillRect(0,0,s,i),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,S.canvas)),{canvas:S.canvas,offsetX:Math.round(C),offsetY:Math.round(T)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=V_[e]}setLineJoin(e){this.ctx.lineJoin=q_[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...ke(this.suspendedCtx)),fc(this.suspendedCtx,r),W_(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),fc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const r=i[0],o=i[1],l=i[2]-r,c=i[3]-o;l===0||c===0||(this.genericComposeSMask(t.context,s,l,c,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,r,o,l,c,u,h,d){let f=e.canvas,p=c-h,g=u-d;if(o){const E=$.makeHexColor(...o);if(p<0||g<0||p+s>f.width||g+i>f.height){const y=this.cachedCanvases.getCanvas("maskExtension",s,i),v=y.context;v.drawImage(f,-p,-g),v.globalCompositeOperation="destination-atop",v.fillStyle=E,v.fillRect(0,0,s,i),v.globalCompositeOperation="source-over",f=y.canvas,p=g=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(p,g,s,i),e.clip(y),e.globalCompositeOperation="destination-atop",e.fillStyle=E,e.fillRect(p,g,s,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const b=new Path2D;b.rect(c,u,s,i),t.clip(b),t.globalCompositeOperation="destination-in",t.drawImage(f,p,g,s,i,c,u,s,i),t.restore()}save(){this.inSMaskMode?(fc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),fc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,s,i,r,o){this.ctx.transform(e,t,s,i,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){const i=this.ctx,r=this.current;let o=r.x,l=r.y,c,u;const h=ke(i),d=h[0]===0&&h[3]===0||h[1]===0&&h[2]===0,f=d?s.slice(0):null;for(let p=0,g=0,b=e.length;p<b;p++)switch(e[p]|0){case Xn.rectangle:o=t[g++],l=t[g++];const E=t[g++],y=t[g++],v=o+E,S=l+y;i.moveTo(o,l),E===0||y===0?i.lineTo(v,S):(i.lineTo(v,l),i.lineTo(v,S),i.lineTo(o,S)),d||r.updateRectMinMax(h,[o,l,v,S]),i.closePath();break;case Xn.moveTo:o=t[g++],l=t[g++],i.moveTo(o,l),d||r.updatePathMinMax(h,o,l);break;case Xn.lineTo:o=t[g++],l=t[g++],i.lineTo(o,l),d||r.updatePathMinMax(h,o,l);break;case Xn.curveTo:c=o,u=l,o=t[g+4],l=t[g+5],i.bezierCurveTo(t[g],t[g+1],t[g+2],t[g+3],o,l),r.updateCurvePathMinMax(h,c,u,t[g],t[g+1],t[g+2],t[g+3],o,l,f),g+=6;break;case Xn.curveTo2:c=o,u=l,i.bezierCurveTo(o,l,t[g],t[g+1],t[g+2],t[g+3]),r.updateCurvePathMinMax(h,c,u,o,l,t[g],t[g+1],t[g+2],t[g+3],f),o=t[g+2],l=t[g+3],g+=4;break;case Xn.curveTo3:c=o,u=l,o=t[g+2],l=t[g+3],i.bezierCurveTo(t[g],t[g+1],o,l,o,l),r.updateCurvePathMinMax(h,c,u,t[g],t[g+1],o,l,o,l,f),g+=4;break;case Xn.closePath:i.closePath();break}d&&r.updateScalingPathMinMax(h,f),r.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,s=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(t.save(),t.strokeStyle=s.getPattern(t,this,gs(t),Tt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let r=!1;i&&(t.save(),t.fillStyle=s.getPattern(t,this,gs(t),Tt.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=X_}eoClip(){this.pendingClip=Qv}beginText(){this.current.textMatrix=y1,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const s=new Path2D,i=t.getTransform().invertSelf();for(const{transform:r,x:o,y:l,fontSize:c,path:u}of e)s.addPath(u,new DOMMatrix(r).preMultiplySelf(i).translate(o,l).scale(c,-c));t.clip(s),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var h;const s=this.commonObjs.get(e),i=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=s.fontMatrix||Zm,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Q("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=((h=s.systemFontInfo)==null?void 0:h.css)||`"${r}", ${s.fallbackName}`;let l="normal";s.black?l="900":s.bold&&(l="bold");const c=s.italic?"italic":"normal";let u=t;t<Wv?u=Wv:t>Uv&&(u=Uv),this.current.fontSizeScale=t/u,this.ctx.font=`${c} ${l} ${u}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,s,i,r,o){this.current.textMatrix=[e,t,s,i,r,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,i,r){const o=this.ctx,l=this.current,c=l.font,u=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,d=u&bt.FILL_STROKE_MASK,f=!!(u&bt.ADD_TO_PATH_FLAG),p=l.patternFill&&!c.missingFile,g=l.patternStroke&&!c.missingFile;let b;if((c.disableFontFace||f||p||g)&&(b=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||p||g){if(o.save(),o.translate(t,s),o.scale(h,-h),d===bt.FILL||d===bt.FILL_STROKE)if(i){const E=o.getTransform();o.setTransform(...i),o.fill(A(this,ps,kg).call(this,b,E,i))}else o.fill(b);if(d===bt.STROKE||d===bt.FILL_STROKE)if(r){const E=o.getTransform();o.setTransform(...r),o.stroke(A(this,ps,kg).call(this,b,E,r))}else o.lineWidth/=h,o.stroke(b);o.restore()}else(d===bt.FILL||d===bt.FILL_STROKE)&&o.fillText(e,t,s),(d===bt.STROKE||d===bt.FILL_STROKE)&&o.strokeText(e,t,s);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ke(o),x:t,y:s,fontSize:h,path:b})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return ee(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(i===0)return;const r=this.ctx,o=t.fontSizeScale,l=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,h=t.textHScale*u,d=e.length,f=s.vertical,p=f?1:-1,g=s.defaultVMetrics,b=i*t.fontMatrix[0],E=t.textRenderingMode===bt.FILL&&!s.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),u>0?r.scale(h,-1):r.scale(h,1);let y,v;if(t.patternFill){r.save();const k=t.fillColor.getPattern(r,this,gs(r),Tt.FILL);y=ke(r),r.restore(),r.fillStyle=k}if(t.patternStroke){r.save();const k=t.strokeColor.getPattern(r,this,gs(r),Tt.STROKE);v=ke(r),r.restore(),r.strokeStyle=k}let S=t.lineWidth;const _=t.textMatrixScale;if(_===0||S===0){const k=t.textRenderingMode&bt.FILL_STROKE_MASK;(k===bt.STROKE||k===bt.FILL_STROKE)&&(S=this.getSinglePixelWidth())}else S/=_;if(o!==1&&(r.scale(o,o),S/=o),r.lineWidth=S,s.isInvalidPDFjsFont){const k=[];let N=0;for(const P of e)k.push(P.unicode),N+=P.width;r.fillText(k.join(""),0,0),t.x+=N*b*h,r.restore(),this.compose();return}let C=0,T;for(T=0;T<d;++T){const k=e[T];if(typeof k=="number"){C+=p*k*i/1e3;continue}let N=!1;const P=(k.isSpace?c:0)+l,L=k.fontChar,z=k.accent;let oe,me,ne=k.width;if(f){const R=k.vmetric||g,W=-(k.vmetric?R[1]:ne*.5)*b,I=R[2]*b;ne=R?-R[0]:ne,oe=W/o,me=(C+I)/o}else oe=C/o,me=0;if(s.remeasure&&ne>0){const R=r.measureText(L).width*1e3/i*o;if(ne<R&&this.isFontSubpixelAAEnabled){const W=ne/R;N=!0,r.save(),r.scale(W,1),oe/=W}else ne!==R&&(oe+=(ne-R)/2e3*i/o)}if(this.contentVisible&&(k.isInFont||s.missingFile)){if(E&&!z)r.fillText(L,oe,me);else if(this.paintChar(L,oe,me,y,v),z){const R=oe+i*z.offset.x/o,W=me-i*z.offset.y/o;this.paintChar(z.fontChar,R,W,y,v)}}const He=f?ne*b-P*u:ne*b+P*u;C+=He,N&&r.restore()}f?t.y-=C:t.x+=C*h,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,i=s.font,r=s.fontSize,o=s.fontDirection,l=i.vertical?1:-1,c=s.charSpacing,u=s.wordSpacing,h=s.textHScale*o,d=s.fontMatrix||Zm,f=e.length,p=s.textRenderingMode===bt.INVISIBLE;let g,b,E,y;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...s.textMatrix),t.translate(s.x,s.y),t.scale(h,o),g=0;g<f;++g){if(b=e[g],typeof b=="number"){y=l*b*r/1e3,this.ctx.translate(y,0),s.x+=y*h;continue}const v=(b.isSpace?u:0)+c,S=i.charProcOperatorList[b.operatorListId];if(!S){Q(`Type3 character "${b.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=b,this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(S),this.restore()),E=$.applyTransform([b.width,0],d)[0]*r+v,t.translate(E,0),s.x+=E*h}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,i,r,o){this.ctx.rect(s,i,r-s,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=e[1],i=this.baseTransform||ke(this.ctx),r={createCanvasGraphics:o=>new wy(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Eg(e,s,this.ctx,r,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,s){this.ctx.strokeStyle=this.current.strokeColor=$.makeHexColor(e,t,s),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,s){this.ctx.fillStyle=this.current.fillColor=$.makeHexColor(e,t,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=z_(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,gs(t),Tt.SHADING);const i=gs(t);if(i){const{width:r,height:o}=t.canvas,[l,c,u,h]=$.getAxialAlignedBoundingBox([0,0,r,o],i);this.ctx.fillRect(l,c,u-l,h-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ve("Should not call beginInlineImage")}beginImageData(){ve("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ke(this.ctx),t)){const s=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],s,i),this.current.updateRectMinMax(ke(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||yp("TODO: Support non-isolated groups."),e.knockout&&Q("Knockout groups not supported.");const s=ke(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=$.getAxialAlignedBoundingBox(e.bbox,ke(t));const r=[0,0,t.canvas.width,t.canvas.height];i=$.intersect(i,r)||[0,0,0,0];const o=Math.floor(i[0]),l=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-o,1),u=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let h="groupAt"+this.groupLevel;e.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,c,u),f=d.context;f.translate(-o,-l),f.transform(...s),e.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,l),t.save()),fc(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=ke(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=$.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],i);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,s,i,r){if(A(this,ps,_g).call(this),hd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],l=t[3]-t[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=l;const[c,u]=$.singularValueDecompose2dScale(ke(this.ctx)),{viewportScale:h}=this,d=Math.ceil(o*this.outputScaleX*h),f=Math.ceil(l*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(c,0,0,-u,0,l*u),hd(this.ctx)}else hd(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,l),this.ctx.clip(),this.ctx.beginPath()}this.current=new qv(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),A(this,ps,Cg).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,i=this.processingType3;if(i&&(i.compiled===void 0&&(i.compiled=G_(e)),i.compiled)){i.compiled(s);return}const r=this._createMaskCanvas(e),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,i=0,r,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const c=ke(l);l.transform(t,s,i,r,0,0);const u=this._createMaskCanvas(e);l.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let h=0,d=o.length;h<d;h+=2){const f=$.transform(c,[t,s,i,r,o[h],o[h+1]]),[p,g]=$.applyTransform([0,0],f);l.drawImage(u.canvas,p,g)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of e){const{data:o,width:l,height:c,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",l,c),d=h.context;d.save();const f=this.getObject(o,r);Yv(d,f),d.globalCompositeOperation="source-in",d.fillStyle=i?s.getPattern(d,this,gs(t),Tt.FILL):s,d.fillRect(0,0,l,c),d.restore(),t.save(),t.transform(...u),t.scale(1,-1),ud(t,h.canvas,0,0,l,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Q("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,i){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){Q("Dependent image isn't ready yet");return}const o=r.width,l=r.height,c=[];for(let u=0,h=i.length;u<h;u+=2)c.push({transform:[t,0,0,s,i[u],i[u+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,i=this.ctx;if(this.save(),!Pt){const{filter:l}=i;l!=="none"&&l!==""&&(i.filter="none")}i.scale(1/t,-1/s);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,s).context;Xv(c,e),r=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(r,gs(i));i.imageSmoothingEnabled=Kv(ke(i),e.interpolate),ud(i,o.img,0,0,o.paintWidth,o.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const r=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;Xv(c,e),i=this.applyTransferMapsToCanvas(c)}for(const r of t)s.save(),s.transform(...r.transform),s.scale(1,-1),ud(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(t||(this.pendingClip===Qv?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ke(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:r}=this.ctx.getTransform();let o,l;if(s===0&&i===0){const c=Math.abs(t),u=Math.abs(r);if(c===u)if(e===0)o=l=1/c;else{const h=c*e;o=l=h<1?1/h:1}else if(e===0)o=1/c,l=1/u;else{const h=c*e,d=u*e;o=h<1?1/h:1,l=d<1?1/d:1}}else{const c=Math.abs(t*r-s*i),u=Math.hypot(t,s),h=Math.hypot(i,r);if(e===0)o=h/c,l=u/c;else{const d=e*c;o=h>d?h/d:1,l=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:s}=this.current,[i,r]=this.getScaleForStroking();if(t.lineWidth=s||1,i===1&&r===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(i,r),o.length>0){const l=Math.max(i,r);t.setLineDash(o.map(c=>c/l)),t.lineDashOffset/=l}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ps=new WeakSet,_g=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Cg=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},kg=function(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i};let Ba=wy;for(const n in Xn)Ba.prototype[n]!==void 0&&(Ba.prototype[Xn[n]]=Ba.prototype[n]);var Bu,$u;class bi{static get workerPort(){return a(this,Bu)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");m(this,Bu,e)}static get workerSrc(){return a(this,$u)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");m(this,$u,e)}}Bu=new WeakMap,$u=new WeakMap,x(bi,Bu,null),x(bi,$u,"");var yo,Wu;class Y_{constructor({parsedData:e,rawData:t}){x(this,yo);x(this,Wu);m(this,yo,e),m(this,Wu,t)}getRaw(){return a(this,Wu)}get(e){return a(this,yo).get(e)??null}getAll(){return ay(a(this,yo))}has(e){return a(this,yo).has(e)}}yo=new WeakMap,Wu=new WeakMap;const ya=Symbol("INTERNAL");var Uu,Gu,Vu,ol;class K_{constructor(e,{name:t,intent:s,usage:i,rbGroups:r}){x(this,Uu,!1);x(this,Gu,!1);x(this,Vu,!1);x(this,ol,!0);m(this,Uu,!!(e&vn.DISPLAY)),m(this,Gu,!!(e&vn.PRINT)),this.name=t,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(a(this,Vu))return a(this,ol);if(!a(this,ol))return!1;const{print:e,view:t}=this.usage;return a(this,Uu)?(t==null?void 0:t.viewState)!=="OFF":a(this,Gu)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==ya&&ve("Internal method `_setVisible` called."),m(this,Vu,s),m(this,ol,t)}}Uu=new WeakMap,Gu=new WeakMap,Vu=new WeakMap,ol=new WeakMap;var Ji,fe,al,ll,qu,Tg;class Q_{constructor(e,t=vn.DISPLAY){x(this,qu);x(this,Ji,null);x(this,fe,new Map);x(this,al,null);x(this,ll,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,m(this,ll,e.order);for(const s of e.groups)a(this,fe).set(s.id,new K_(t,s));if(e.baseState==="OFF")for(const s of a(this,fe).values())s._setVisible(ya,!1);for(const s of e.on)a(this,fe).get(s)._setVisible(ya,!0);for(const s of e.off)a(this,fe).get(s)._setVisible(ya,!1);m(this,al,this.getHash())}}isVisible(e){if(a(this,fe).size===0)return!0;if(!e)return yp("Optional content group not defined."),!0;if(e.type==="OCG")return a(this,fe).has(e.id)?a(this,fe).get(e.id).visible:(Q(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return A(this,qu,Tg).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!a(this,fe).has(t))return Q(`Optional content group not found: ${t}`),!0;if(a(this,fe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!a(this,fe).has(t))return Q(`Optional content group not found: ${t}`),!0;if(!a(this,fe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!a(this,fe).has(t))return Q(`Optional content group not found: ${t}`),!0;if(!a(this,fe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!a(this,fe).has(t))return Q(`Optional content group not found: ${t}`),!0;if(a(this,fe).get(t).visible)return!1}return!0}return Q(`Unknown optional content policy ${e.policy}.`),!0}return Q(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var r;const i=a(this,fe).get(e);if(!i){Q(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const l of o)l!==e&&((r=a(this,fe).get(l))==null||r._setVisible(ya,!1,!0));i._setVisible(ya,!!t,!0),m(this,Ji,null)}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=a(this,fe).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!r.visible,t);break}}m(this,Ji,null)}get hasInitialVisibility(){return a(this,al)===null||this.getHash()===a(this,al)}getOrder(){return a(this,fe).size?a(this,ll)?a(this,ll).slice():[...a(this,fe).keys()]:null}getGroups(){return a(this,fe).size>0?ay(a(this,fe)):null}getGroup(e){return a(this,fe).get(e)||null}getHash(){if(a(this,Ji)!==null)return a(this,Ji);const e=new X1;for(const[t,s]of a(this,fe))e.update(`${t}:${s.visible}`);return m(this,Ji,e.hexdigest())}}Ji=new WeakMap,fe=new WeakMap,al=new WeakMap,ll=new WeakMap,qu=new WeakSet,Tg=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const r=e[i];let o;if(Array.isArray(r))o=A(this,qu,Tg).call(this,r);else if(a(this,fe).has(r))o=a(this,fe).get(r).visible;else return Q(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class Z_{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Ve(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});Ve(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,i,r;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ve(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new J_(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new eC(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class J_{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=uy(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class eC{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function tC(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let h=l(t);return h=unescape(h),h=c(h),h=u(h),r(h)}if(t=o(n),t){const h=u(t);return r(h)}if(t=s("filename","i").exec(n),t){t=t[1];let h=l(t);return h=u(h),r(h)}function s(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=vp(d);d=f.decode(p),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,b,E,y]=f;if(b=parseInt(b,10),b in d){if(b===0)break;continue}d[b]=[E,y]}const g=[];for(let b=0;b<d.length&&b in d;++b){let[E,y]=d[b];y=l(y),E&&(y=unescape(y),b===0&&(y=c(y))),g.push(y)}return g.join("")}function l(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),g=h.slice(d+1).replace(/^[^']*'/,"");return i(f,g)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,g){if(p==="q"||p==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,E){return String.fromCharCode(parseInt(E,16))}),i(f,g);try{g=atob(g)}catch{}return i(f,g)})}return""}function lb(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function bp(n){try{return new URL(n).origin}catch{}return null}function cb({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function ub(n){const e=n.get("Content-Disposition");if(e){let t=tC(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(uy(t))return t}return null}function Ap(n,e){return n===404||n===0&&e.startsWith("file:")?new uu('Missing PDF "'+e+'".'):new Cf(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function hb(n){return n===200||n===206}function db(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function fb(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Q(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Zv{constructor(e){G(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=lb(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ve(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new nC(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new sC(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class nC{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,db(s,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=bp(r.url),!hb(r.status))throw Ap(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:c}=cb({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=ub(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Pr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:fb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class sC{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${s-1}`);const o=i.url;fetch(o,db(r,this._withCredentials,this._abortController)).then(l=>{const c=bp(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!hb(l.status))throw Ap(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:fb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const nm=200,sm=206;function iC(n){const e=n.response;return typeof e!="string"?e:vp(e).buffer}class rC{constructor({url:e,httpHeaders:t,withCredentials:s}){G(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=lb(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=sm):i.expectedStatus=nm,t.responseType="arraybuffer",Ve(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var i;const s=this.pendingRequests[e];s&&((i=s.onProgress)==null||i.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||nm;if(!(r===nm&&s.expectedStatus===sm)&&r!==s.expectedStatus){s.onError(i.status);return}const l=iC(i);if(r===sm){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?s.onDone({begin:parseInt(u[1],10),chunk:l}):(Q('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone({begin:0,chunk:l}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class oC{constructor(e){this._source=e,this._manager=new rC(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ve(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new aC(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new lC(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class aC{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=bp(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...u]=l.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=cb({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=ub(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Ap(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class lC{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=bp((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Ap(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const cC=/^[a-z][a-z0-9\-+.]+:/i;function uC(n){if(cC.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class hC{constructor(e){this.source=e,this.url=uC(e.url),Ve(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ve(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new dC(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new fC(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class dC{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new uu(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Pr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class fC{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const pC=1e5,qt=30,mC=.8;var nw,er,Qt,Xu,Yu,vo,ri,Ku,Qu,wo,cl,ul,tr,hl,Zu,dl,xo,Ju,eh,bo,Ao,th,nr,fl,Ri,pb,mb,Ng,En,Fd,Pg,gb,yb;const Ye=class Ye{constructor({textContentSource:e,container:t,viewport:s}){x(this,Ri);x(this,er,Promise.withResolvers());x(this,Qt,null);x(this,Xu,!1);x(this,Yu,!!((nw=globalThis.FontInspector)!=null&&nw.enabled));x(this,vo,null);x(this,ri,null);x(this,Ku,0);x(this,Qu,0);x(this,wo,null);x(this,cl,null);x(this,ul,0);x(this,tr,0);x(this,hl,Object.create(null));x(this,Zu,[]);x(this,dl,null);x(this,xo,[]);x(this,Ju,new WeakMap);x(this,eh,null);var c;if(e instanceof ReadableStream)m(this,dl,e);else if(typeof e=="object")m(this,dl,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');m(this,Qt,m(this,cl,t)),m(this,tr,s.scale*(globalThis.devicePixelRatio||1)),m(this,ul,s.rotation),m(this,ri,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:o,pageY:l}=s.rawDims;m(this,eh,[1,0,0,-1,-o,l+r]),m(this,Qu,i),m(this,Ku,r),A(c=Ye,En,gb).call(c),ra(t,s),a(this,er).promise.finally(()=>{a(Ye,fl).delete(this),m(this,ri,null),m(this,hl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Bt.platform;return ee(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{a(this,wo).read().then(({value:t,done:s})=>{if(s){a(this,er).resolve();return}a(this,vo)??m(this,vo,t.lang),Object.assign(a(this,hl),t.styles),A(this,Ri,pb).call(this,t.items),e()},a(this,er).reject)};return m(this,wo,a(this,dl).getReader()),a(Ye,fl).add(this),e(),a(this,er).promise}update({viewport:e,onBefore:t=null}){var r;const s=e.scale*(globalThis.devicePixelRatio||1),i=e.rotation;if(i!==a(this,ul)&&(t==null||t(),m(this,ul,i),ra(a(this,cl),{rotation:i})),s!==a(this,tr)){t==null||t(),m(this,tr,s);const o={div:null,properties:null,ctx:A(r=Ye,En,Fd).call(r,a(this,vo))};for(const l of a(this,xo))o.properties=a(this,Ju).get(l),o.div=l,A(this,Ri,Ng).call(this,o)}}cancel(){var t;const e=new Pr("TextLayer task cancelled.");(t=a(this,wo))==null||t.cancel(e).catch(()=>{}),m(this,wo,null),a(this,er).reject(e)}get textDivs(){return a(this,xo)}get textContentItemsStr(){return a(this,Zu)}static cleanup(){if(!(a(this,fl).size>0)){a(this,bo).clear();for(const{canvas:e}of a(this,Ao).values())e.remove();a(this,Ao).clear()}}};er=new WeakMap,Qt=new WeakMap,Xu=new WeakMap,Yu=new WeakMap,vo=new WeakMap,ri=new WeakMap,Ku=new WeakMap,Qu=new WeakMap,wo=new WeakMap,cl=new WeakMap,ul=new WeakMap,tr=new WeakMap,hl=new WeakMap,Zu=new WeakMap,dl=new WeakMap,xo=new WeakMap,Ju=new WeakMap,eh=new WeakMap,bo=new WeakMap,Ao=new WeakMap,th=new WeakMap,nr=new WeakMap,fl=new WeakMap,Ri=new WeakSet,pb=function(e){var i,r;if(a(this,Xu))return;(r=a(this,ri)).ctx??(r.ctx=A(i=Ye,En,Fd).call(i,a(this,vo)));const t=a(this,xo),s=a(this,Zu);for(const o of e){if(t.length>pC){Q("Ignoring additional textDivs for performance reasons."),m(this,Xu,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,Qt);m(this,Qt,document.createElement("span")),a(this,Qt).classList.add("markedContent"),o.id!==null&&a(this,Qt).setAttribute("id",`${o.id}`),l.append(a(this,Qt))}else o.type==="endMarkedContent"&&m(this,Qt,a(this,Qt).parentNode);continue}s.push(o.str),A(this,Ri,mb).call(this,o)}},mb=function(e){var b;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};a(this,xo).push(t);const i=$.transform(a(this,eh),e.transform);let r=Math.atan2(i[1],i[0]);const o=a(this,hl)[e.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,Yu)&&o.fontSubstitution||o.fontFamily;l=Ye.fontFamilyMap.get(l)||l;const c=Math.hypot(i[2],i[3]),u=c*A(b=Ye,En,yb).call(b,l,a(this,vo));let h,d;r===0?(h=i[4],d=i[5]-u):(h=i[4]+u*Math.sin(r),d=i[5]-u*Math.cos(r));const f="calc(var(--scale-factor)*",p=t.style;a(this,Qt)===a(this,cl)?(p.left=`${(100*h/a(this,Qu)).toFixed(2)}%`,p.top=`${(100*d/a(this,Ku)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(a(Ye,nr)*c).toFixed(2)}px)`,p.fontFamily=l,s.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,a(this,Yu)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let g=!1;if(e.str.length>1)g=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const E=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);E!==y&&Math.max(E,y)/Math.min(E,y)>1.5&&(g=!0)}if(g&&(s.canvasWidth=o.vertical?e.height:e.width),a(this,Ju).set(t,s),a(this,ri).div=t,a(this,ri).properties=s,A(this,Ri,Ng).call(this,a(this,ri)),s.hasText&&a(this,Qt).append(t),s.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),a(this,Qt).append(E)}},Ng=function(e){var l;const{div:t,properties:s,ctx:i}=e,{style:r}=t;let o="";if(a(Ye,nr)>1&&(o=`scale(${1/a(Ye,nr)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=s;A(l=Ye,En,Pg).call(l,i,h*a(this,tr),c);const{width:d}=i.measureText(t.textContent);d>0&&(o=`scaleX(${u*a(this,tr)/d}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)},En=new WeakSet,Fd=function(e=null){let t=a(this,Ao).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,Ao).set(e,t),a(this,th).set(t,{size:0,family:""})}return t},Pg=function(e,t,s){const i=a(this,th).get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)},gb=function(){if(a(this,nr)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),m(this,nr,e.getBoundingClientRect().height),e.remove()},yb=function(e,t){const s=a(this,bo).get(e);if(s)return s;const i=A(this,En,Fd).call(this,t);i.canvas.width=i.canvas.height=qt,A(this,En,Pg).call(this,i,qt,e);const r=i.measureText("");let o=r.fontBoundingBoxAscent,l=Math.abs(r.fontBoundingBoxDescent);if(o){const h=o/(o+l);return a(this,bo).set(e,h),i.canvas.width=i.canvas.height=0,h}i.strokeStyle="red",i.clearRect(0,0,qt,qt),i.strokeText("g",0,0);let c=i.getImageData(0,0,qt,qt).data;l=0;for(let h=c.length-1-3;h>=0;h-=4)if(c[h]>0){l=Math.ceil(h/4/qt);break}i.clearRect(0,0,qt,qt),i.strokeText("A",0,qt),c=i.getImageData(0,0,qt,qt).data,o=0;for(let h=0,d=c.length;h<d;h+=4)if(c[h]>0){o=qt-Math.floor(h/4/qt);break}i.canvas.width=i.canvas.height=0;const u=o?o/(o+l):mC;return a(this,bo).set(e,u),u},x(Ye,En),x(Ye,bo,new Map),x(Ye,Ao,new Map),x(Ye,th,new WeakMap),x(Ye,nr,null),x(Ye,fl,new Set);let hu=Ye;class du{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(du.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const u of r.children)i(u)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const gC=65536,yC=100,vC=5e3,wC=Pt?L_:P_,xC=Pt?I_:nb,bC=Pt?R_:M_,AC=Pt?D_:ob;function SC(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Mg,{docId:t}=e,s=n.url?EC(n.url):null,i=n.data?_C(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,l=n.password??null,c=n.range instanceof vb?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:gC;let h=n.worker instanceof $a?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!xp(n.docBaseUrl)?n.docBaseUrl:null,p=typeof n.cMapUrl=="string"?n.cMapUrl:null,g=n.cMapPacked!==!1,b=n.CMapReaderFactory||xC,E=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,y=n.StandardFontDataFactory||AC,v=n.stopAtErrors!==!0,S=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,_=n.isEvalSupported!==!1,C=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Pt,T=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Pt&&(Bt.platform.isFirefox||!globalThis.chrome),k=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,N=typeof n.disableFontFace=="boolean"?n.disableFontFace:Pt,P=n.fontExtraProperties===!0,L=n.enableXfa===!0,z=n.ownerDocument||globalThis.document,oe=n.disableRange===!0,me=n.disableStream===!0,ne=n.disableAutoFetch===!0,He=n.pdfBug===!0,R=n.CanvasFactory||wC,W=n.FilterFactory||bC,I=n.enableHWA===!0,U=c?c.length:n.length??NaN,q=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Pt&&!N,re=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:b===nb&&y===ob&&p&&E&&xc(p,document.baseURI)&&xc(E,document.baseURI),se=null;l_(d);const _e={canvasFactory:new R({ownerDocument:z,enableHWA:I}),filterFactory:new W({docId:t,ownerDocument:z}),cMapReaderFactory:re?null:new b({baseUrl:p,isCompressed:g}),standardFontDataFactory:re?null:new y({baseUrl:E})};if(!h){const Fe={verbosity:d,port:bi.workerPort};h=Fe.port?$a.fromPort(Fe):new $a(Fe),e._worker=h}const Vt={docId:t,apiVersion:"4.10.38",data:i,password:l,disableAutoFetch:ne,rangeChunkSize:u,length:U,docBaseUrl:f,enableXfa:L,evaluatorOptions:{maxImageSize:S,disableFontFace:N,ignoreErrors:v,isEvalSupported:_,isOffscreenCanvasSupported:C,isImageDecoderSupported:T,canvasMaxAreaInBytes:k,fontExtraProperties:P,useSystemFonts:q,cMapUrl:re?p:null,standardFontDataUrl:re?E:null}},Bs={disableFontFace:N,fontExtraProperties:P,ownerDocument:z,pdfBug:He,styleElement:se,loadingParams:{disableAutoFetch:ne,enableXfa:L}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Fe=h.messageHandler.sendWithPromise("GetDocRequest",Vt,i?[i.buffer]:null);let he;if(c)he=new Z_(c,{disableRange:oe,disableStream:me});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");let da;if(Pt)if(xc(s)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");da=Zv}else da=hC;else da=xc(s)?Zv:oC;he=new da({url:s,length:U,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:oe,disableStream:me})}return Fe.then(da=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Sy=new Ec(t,da,h.port),mA=new NC(Sy,e,he,Bs,_e);e._transport=mA,Sy.send("Ready",null)})}).catch(e._capability.reject),e}function EC(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Pt&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function _C(n){if(Pt&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return vp(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Jv(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var $f;const Wf=class Wf{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Rt(Wf,$f)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,s,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}};$f=new WeakMap,x(Wf,$f,0);let Mg=Wf;class vb{constructor(e,t,s=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const s of this._rangeListeners)s(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){ve("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class CC{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ee(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var sr,oi,jn,va,Od;class kC{constructor(e,t,s,i=!1){x(this,jn);x(this,sr,null);x(this,oi,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new Hv:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new wb,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new Wh({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ee(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:i=zi.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:d=!1}){var _,C;(_=this._stats)==null||_.time("Overall");const f=this._transport.getRenderingIntent(s,i,h,d),{renderingIntent:p,cacheKey:g}=f;m(this,oi,!1),A(this,jn,Od).call(this),l||(l=this._transport.getOptionalContentConfig(p));let b=this._intentStates.get(g);b||(b=Object.create(null),this._intentStates.set(g,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const E=!!(p&vn.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(C=this._stats)==null||C.time("Page Request"),this._pumpOperatorList(f));const y=T=>{var k;b.renderTasks.delete(v),(this._maybeCleanupAfterRender||E)&&m(this,oi,!0),A(this,jn,va).call(this,!E),T?(v.capability.reject(T),this._abortOperatorList({intentState:b,reason:T instanceof Error?T:new Error(T)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(k=globalThis.Stats)!=null&&k.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new Lg({callback:y,params:{canvasContext:e,viewport:t,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:u});(b.renderTasks||(b.renderTasks=new Set)).add(v);const S=v.task;return Promise.all([b.displayReadyCapability.promise,l]).then(([T,k])=>{var N;if(this.destroyed){y();return}if((N=this._stats)==null||N.time("Rendering"),!(k.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:T,optionalContentConfig:k}),v.operatorListChanged()}).catch(y),S}getOperatorList({intent:e="display",annotationMode:t=zi.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var u;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,s,i,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>du.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function r(){o.read().then(function({value:c,done:u}){if(u){s(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},i)}const o=t.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),m(this,oi,!1),A(this,jn,Od).call(this),Promise.all(e)}cleanup(e=!1){m(this,oi,!0);const t=A(this,jn,va).call(this,!1);return e&&t&&this._stats&&(this._stats=new Hv),t}_startRenderPage(e,t){var i,r;const s=this._intentStates.get(t);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&A(this,jn,va).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:i},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();A(this,jn,va).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof cy){let i=yC;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Pr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}sr=new WeakMap,oi=new WeakMap,jn=new WeakSet,va=function(e=!1){if(A(this,jn,Od).call(this),!a(this,oi)||this.destroyed)return!1;if(e)return m(this,sr,setTimeout(()=>{m(this,sr,null),A(this,jn,va).call(this,!1)},vC)),!1;for(const{renderTasks:t,operatorList:s}of this._intentStates.values())if(t.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),m(this,oi,!1),!0},Od=function(){a(this,sr)&&(clearTimeout(a(this,sr)),m(this,sr,null))};var ai,Uf;class TC{constructor(){x(this,ai,new Map);x(this,Uf,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};a(this,Uf).then(()=>{for(const[i]of a(this,ai))i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){Q("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,ai).set(t,i)}removeEventListener(e,t){const s=a(this,ai).get(t);s==null||s(),a(this,ai).delete(t)}terminate(){for(const[,e]of a(this,ai))e==null||e();a(this,ai).clear()}}ai=new WeakMap,Uf=new WeakMap;var Gf,So,Eo,pl,jd,ml,Hd;const Ce=class Ce{constructor({name:e=null,port:t=null,verbosity:s=c_()}={}){x(this,pl);var i;if(this.name=e,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((i=a(Ce,Eo))!=null&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(a(Ce,Eo)||m(Ce,Eo,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Ec("main","worker",e),this._messageHandler.on("ready",function(){}),A(this,pl,jd).call(this)}_initialize(){if(a(Ce,So)||a(Ce,ml,Hd)){this._setupFakeWorker();return}let{workerSrc:e}=Ce;try{Ce._isSameOrigin(window.location.href,e)||(e=Ce._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Ec("main","worker",t),i=()=>{r.abort(),s.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),s.on("test",l=>{if(r.abort(),this.destroyed||!l){i();return}this._messageHandler=s,this._port=t,this._webWorker=t,A(this,pl,jd).call(this)}),s.on("ready",l=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const l=new Uint8Array;s.send("test",l,[l.buffer])};o();return}catch{yp("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){a(Ce,So)||(Q("Setting up fake worker."),m(Ce,So,!0)),Ce._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new TC;this._port=t;const s=`fake${Rt(Ce,Gf)._++}`,i=new Ec(s+"_worker",s,t);e.setup(i,t),this._messageHandler=new Ec(s,s+"_worker",t),A(this,pl,jd).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,s;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=a(Ce,Eo))==null||t.delete(this._port),this._port=null,(s=this._messageHandler)==null||s.destroy(),this._messageHandler=null}static fromPort(e){var s;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(s=a(this,Eo))==null?void 0:s.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ce(e)}static get workerSrc(){if(bi.workerSrc)return bi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ee(this,"_setupFakeWorkerGlobal",(async()=>a(this,ml,Hd)?a(this,ml,Hd):(await import(this.workerSrc)).WorkerMessageHandler)())}};Gf=new WeakMap,So=new WeakMap,Eo=new WeakMap,pl=new WeakSet,jd=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},ml=new WeakSet,Hd=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},x(Ce,ml),x(Ce,Gf,0),x(Ce,So,!1),x(Ce,Eo),Pt&&(m(Ce,So,!0),bi.workerSrc||(bi.workerSrc="./pdf.worker.mjs")),Ce._isSameOrigin=(e,t)=>{let s;try{if(s=new URL(e),!s.origin||s.origin==="null")return!1}catch{return!1}const i=new URL(t,s);return s.origin===i.origin},Ce._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let $a=Ce;var li,Ns,gl,yl,ci,_o,Nc;class NC{constructor(e,t,s,i,r){x(this,_o);x(this,li,new Map);x(this,Ns,new Map);x(this,gl,new Map);x(this,yl,new Map);x(this,ci,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new wb,this.fontLoader=new T_({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ee(this,"annotationStorage",new fy)}getRenderingIntent(e,t=zi.ENABLE,s=null,i=!1,r=!1){let o=vn.DISPLAY,l=xg;switch(e){case"any":o=vn.ANY;break;case"display":break;case"print":o=vn.PRINT;break;default:Q(`getRenderingIntent - invalid intent: ${e}`)}const c=o&vn.PRINT&&s instanceof K1?s:this.annotationStorage;switch(t){case zi.DISABLE:o+=vn.ANNOTATIONS_DISABLE;break;case zi.ENABLE:break;case zi.ENABLE_FORMS:o+=vn.ANNOTATIONS_FORMS;break;case zi.ENABLE_STORAGE:o+=vn.ANNOTATIONS_STORAGE,l=c.serializable;break;default:Q(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=vn.IS_EDITING),r&&(o+=vn.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,l.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=a(this,ci))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of a(this,Ns).values())e.push(i._destroy());a(this,Ns).clear(),a(this,gl).clear(),a(this,yl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,li).clear(),this.filterFactory.destroy(),hu.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Pr("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{Ve(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}Ve(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(s,i)=>{Ve(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){i.close();return}Ve(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new CC(s,this))}),e.on("DocException",s=>{t._capability.reject(Xt(s))}),e.on("PasswordRequest",s=>{m(this,ci,Promise.withResolvers());try{if(!t.onPassword)throw Xt(s);const i=r=>{r instanceof Error?a(this,ci).reject(r):a(this,ci).resolve({password:r})};t.onPassword(i,s.code)}catch(i){a(this,ci).reject(i)}return a(this,ci).promise}),e.on("DataLoaded",s=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;a(this,Ns).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":const{disableFontFace:l,fontExtraProperties:c,pdfBug:u}=this._params;if("error"in r){const p=r.error;Q(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const h=u&&((o=globalThis.FontInspector)!=null&&o.enabled)?(p,g)=>globalThis.FontInspector.fontAdded(p,g):null,d=new N_(r,{disableFontFace:l,fontExtraProperties:c,inspectFont:h});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=r;Ve(f,"The imageRef must be defined.");for(const p of a(this,Ns).values())for(const[,g]of p.objs)if((g==null?void 0:g.ref)===f)return g.dataLen?(this.commonObjs.resolve(s,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,r,o])=>{var c;if(this.destroyed)return;const l=a(this,Ns).get(i);if(!l.objs.has(s)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":l.objs.resolve(s,o),(o==null?void 0:o.dataLen)>i_&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBuiltInCMap",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(s)}),e.on("FetchStandardFontData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&Q("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=a(this,gl).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,yl).set(r.refStr,e);const o=new kC(t,r,this,this._params.pdfBug);return a(this,Ns).set(t,o),o});return a(this,gl).set(t,i),i}getPageIndex(e){return Jv(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return A(this,_o,Nc).call(this,"GetFieldObjects")}hasJSActions(){return A(this,_o,Nc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return A(this,_o,Nc).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return A(this,_o,Nc).call(this,"GetOptionalContentConfig").then(t=>new Q_(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=a(this,li).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>{var r,o;return{info:i[0],metadata:i[1]?new Y_(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,li).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of a(this,Ns).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),a(this,li).clear(),this.filterFactory.destroy(!0),hu.cleanup()}}cachedPageNumber(e){if(!Jv(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return a(this,yl).get(t)??null}}li=new WeakMap,Ns=new WeakMap,gl=new WeakMap,yl=new WeakMap,ci=new WeakMap,_o=new WeakSet,Nc=function(e,t=null){const s=a(this,li).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return a(this,li).set(e,i),i};const pc=Symbol("INITIAL_DATA");var cn,nh,Rg;class wb{constructor(){x(this,nh);x(this,cn,Object.create(null))}get(e,t=null){if(t){const i=A(this,nh,Rg).call(this,e);return i.promise.then(()=>t(i.data)),null}const s=a(this,cn)[e];if(!s||s.data===pc)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=a(this,cn)[e];return!!t&&t.data!==pc}delete(e){const t=a(this,cn)[e];return!t||t.data===pc?!1:(delete a(this,cn)[e],!0)}resolve(e,t=null){const s=A(this,nh,Rg).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in a(this,cn)){const{data:s}=a(this,cn)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}m(this,cn,Object.create(null))}*[Symbol.iterator](){for(const e in a(this,cn)){const{data:t}=a(this,cn)[e];t!==pc&&(yield[e,t])}}}cn=new WeakMap,nh=new WeakSet,Rg=function(e){var t;return(t=a(this,cn))[e]||(t[e]={...Promise.withResolvers(),data:pc})};var ir;class PC{constructor(e){x(this,ir,null);m(this,ir,e),this.onContinue=null}get promise(){return a(this,ir).capability.promise}cancel(e=0){a(this,ir).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=a(this,ir).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=a(this,ir);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}ir=new WeakMap;var rr,Co;const Wr=class Wr{constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null}){x(this,rr,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new PC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,c;if(this.cancelled)return;if(this._canvas){if(a(Wr,Co).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(Wr,Co).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:o}=this.params;this.gfx=new Ba(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),a(this,rr)&&(window.cancelAnimationFrame(a(this,rr)),m(this,rr,null)),a(Wr,Co).delete(this._canvas),this.callback(e||new cy(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?m(this,rr,window.requestAnimationFrame(()=>{m(this,rr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(Wr,Co).delete(this._canvas),this.callback())))}};rr=new WeakMap,Co=new WeakMap,x(Wr,Co,new WeakSet);let Lg=Wr;const MC="4.10.38",RC="f9bea397f";function ew(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function mc(n){return Math.max(0,Math.min(255,255*n))}class tw{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=mc(e),[e,e,e]}static G_HTML([e]){const t=ew(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(mc)}static RGB_HTML(e){return`#${e.map(ew).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[mc(1-Math.min(1,e+i)),mc(1-Math.min(1,s+i)),mc(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,r=1-t,o=1-s,l=Math.min(i,r,o);return["CMYK",i,r,o,l]}}class LC{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ve("Abstract method `_createSVG` called.")}}class my extends LC{_createSVG(e){return document.createElementNS(Ws,e)}}class xb{static setupStorage(e,t,s,i,r){const o=i.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",l=>{i.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",l=>{i.setValue(t,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of s.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:r}){const{attributes:o}=t,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}l&&r.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var d,f;const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,r=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:s});const l=r!=="richText",c=e.div;if(c.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);o.append(p),l&&du.shouldBuildText(i.name)&&u.push(p)}return{textDivs:u}}const h=[[i,-1,o]];for(;h.length>0;){const[p,g,b]=h.at(-1);if(g+1===p.children.length){h.pop();continue}const E=p.children[++h.at(-1)[1]];if(E===null)continue;const{name:y}=E;if(y==="#text"){const S=document.createTextNode(E.value);u.push(S),b.append(S);continue}const v=(d=E==null?void 0:E.attributes)!=null&&d.xmlns?document.createElementNS(E.attributes.xmlns,y):document.createElement(y);if(b.append(v),E.attributes&&this.setAttributes({html:v,element:E,storage:t,intent:r,linkService:s}),((f=E.children)==null?void 0:f.length)>0)h.push([E,-1,v]);else if(E.value){const S=document.createTextNode(E.value);l&&du.shouldBuildText(y)&&u.push(S),v.append(S)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Gh=1e3,IC=9,aa=new WeakSet;function kr(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class DC{static create(e){switch(e.data.annotationType){case Xe.LINK:return new bb(e);case Xe.TEXT:return new FC(e);case Xe.WIDGET:switch(e.data.fieldType){case"Tx":return new OC(e);case"Btn":return e.data.radioButton?new Eb(e):e.data.checkBox?new HC(e):new zC(e);case"Ch":return new BC(e);case"Sig":return new jC(e)}return new ha(e);case Xe.POPUP:return new Dg(e);case Xe.FREETEXT:return new Nb(e);case Xe.LINE:return new WC(e);case Xe.SQUARE:return new UC(e);case Xe.CIRCLE:return new GC(e);case Xe.POLYLINE:return new Pb(e);case Xe.CARET:return new qC(e);case Xe.INK:return new gy(e);case Xe.POLYGON:return new VC(e);case Xe.HIGHLIGHT:return new Mb(e);case Xe.UNDERLINE:return new XC(e);case Xe.SQUIGGLY:return new YC(e);case Xe.STRIKEOUT:return new KC(e);case Xe.STAMP:return new Rb(e);case Xe.FILEATTACHMENT:return new QC(e);default:return new We(e)}}}var ko,vl,wl,sh,Ig;const xy=class xy{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){x(this,sh);x(this,ko,null);x(this,vl,!1);x(this,wl,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:s}){return!!(e!=null&&e.str||t!=null&&t.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return xy._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;a(this,ko)||m(this,ko,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&A(this,sh,Ig).call(this,t),(s=a(this,wl))==null||s.popup.updateEdited(e)}resetEdited(){var e;a(this,ko)&&(A(this,sh,Ig).call(this,a(this,ko).rect),(e=a(this,wl))==null||e.popup.resetEdited(),m(this,ko,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof ha||(r.tabIndex=Gh);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Dg){const{rotation:b}=t;return!t.hasOwnCanvas&&b!==0&&this.setRotation(b,r),r}const{width:l,height:c}=kr(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const b=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(b>0||E>0){const v=`calc(${b}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;o.borderRadius=v}else if(this instanceof Eb){const v=`calc(${l}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;o.borderRadius=v}switch(t.borderStyle.style){case dc.SOLID:o.borderStyle="solid";break;case dc.DASHED:o.borderStyle="dashed";break;case dc.BEVELED:Q("Unimplemented border style: beveled");break;case dc.INSET:Q("Unimplemented border style: inset");break;case dc.UNDERLINE:o.borderBottomStyle="solid";break}const y=t.borderColor||null;y?(m(this,vl,!0),o.borderColor=$.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):o.borderWidth=0}const u=$.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=i.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:g}=t;return t.hasOwnCanvas||g===0?(o.width=`${100*l/h}%`,o.height=`${100*c/d}%`):this.setRotation(g,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:o}=kr(this.data.rect);let l,c;e%180===0?(l=100*r/s,c=100*o/i):(l=100*o/s,c=100*r/i),t.style.width=`${l}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const r=i.detail[t],o=r[0],l=r.slice(1);i.target.style[s]=tw[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[s]:tw[`${o}_rgb`](l)})};return ee(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||s[i];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,r]of Object.entries(t)){const o=s[i];if(o){const l={detail:{[i]:r},target:e};o(l),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,r]=this.data.rect.map(b=>Math.fround(b));if(e.length===8){const[b,E,y,v]=e.subarray(2,6);if(i===b&&r===E&&t===y&&s===v)return}const{style:o}=this.container;let l;if(a(this,vl)){const{borderColor:b,borderWidth:E}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=i-t,u=r-s,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),g=`clippath_${this.data.id}`;p.setAttribute("id",g),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let b=2,E=e.length;b<E;b+=8){const y=e[b],v=e[b+1],S=e[b+2],_=e[b+3],C=h.createElement("rect"),T=(S-t)/c,k=(r-v)/u,N=(y-S)/c,P=(v-_)/u;C.setAttribute("x",T),C.setAttribute("y",k),C.setAttribute("width",N),C.setAttribute("height",P),p.append(C),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${k}" width="${N}" height="${P}"/>`)}a(this,vl)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${g})`}_createPopup(){const{data:e}=this,t=m(this,wl,new Dg({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){ve("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:r,id:o,exportValues:l}of i){if(r===-1||o===t)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!aa.has(u)){Q(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:u})}return s}for(const i of document.getElementsByName(e)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==t&&aa.has(i)&&s.push({id:o,exportValue:r,domElement:i})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};ko=new WeakMap,vl=new WeakMap,wl=new WeakMap,sh=new WeakSet,Ig=function(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;s==null||s.splice(0,4,...e);const{width:u,height:h}=kr(e);t.left=`${100*(e[0]-l)/r}%`,t.top=`${100*(o-e[3]+c)/o}%`,i===0?(t.width=`${100*u/r}%`,t.height=`${100*h/o}%`):this.setRotation(i)};let We=xy;var xn,Hr,Ab,Sb;class bb extends We{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});x(this,xn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action),r=!0):t.attachment?(A(this,xn,Ab).call(this,i,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(A(this,xn,Sb).call(this,i,t.setOCGState),r=!0):t.dest?(this._bindLink(i,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&A(this,xn,Hr).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),A(this,xn,Hr).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=i.get(r);o&&(t[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),A(this,xn,Hr).call(this)}_bindResetFormAction(t,s){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),A(this,xn,Hr).call(this),!this._fieldObjects){Q('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var d;i==null||i();const{fields:r,refs:o,include:l}=s,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const g=this._fieldObjects[p]||[];for(const{id:b}of g)f.add(b)}for(const p of Object.values(this._fieldObjects))for(const g of p)f.has(g.id)===l&&c.push(g)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const b=f.defaultValue||"";u.setValue(p,{value:b});break}case"checkbox":case"radiobutton":{const b=f.defaultValue===f.exportValues;u.setValue(p,{value:b});break}case"combobox":case"listbox":{const b=f.defaultValue||"";u.setValue(p,{value:b});break}default:continue}const g=document.querySelector(`[data-element-id="${p}"]`);if(g){if(!aa.has(g)){Q(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}xn=new WeakSet,Hr=function(){this.container.setAttribute("data-internal-link","")},Ab=function(t,s,i=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},A(this,xn,Hr).call(this)},Sb=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),A(this,xn,Hr).call(this)};class FC extends We{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class ha extends We{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Bt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,r){s.includes("mouse")?e.addEventListener(s,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var l;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(e,t,s,i){var r,o,l;for(const[c,u]of s)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,i),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":$.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||IC,r=e.style;let o;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(u/(Qp*i))||1,d=u/h;o=Math.min(i,c(d/Qp))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(i,c(u/Qp))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=$.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class OC extends ha{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),r.setValue(o.id,{[i]:s})}render(){var i,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let l=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",u??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),aa.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=Gh,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(s,"value",f.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";s.value=h.userValue=p,h.formattedValue=null});let d=f=>{const{formattedValue:p}=h;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",p=>{var b;if(h.focused)return;const{target:g}=p;h.userValue&&(g.value=h.userValue),h.lastCommittedValue=g.value,h.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const g={value(b){h.userValue=b.detail.value??"",e.setValue(t,{value:h.userValue.toString()}),b.target.value=h.userValue},formattedValue(b){const{formattedValue:E}=b.detail;h.formattedValue=E,E!=null&&b.target!==document.activeElement&&(b.target.value=E),e.setValue(t,{formattedValue:E})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var S;const{charLimit:E}=b.detail,{target:y}=b;if(E===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",E);let v=h.userValue;!v||v.length<=E||(v=v.slice(0,E),y.value=h.userValue=v,e.setValue(t,{value:v}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(g,p)}),s.addEventListener("keydown",p=>{var E;h.commitKey=1;let g=-1;if(p.key==="Escape"?g=0:p.key==="Enter"&&!this.data.multiLine?g=2:p.key==="Tab"&&(h.commitKey=3),g===-1)return;const{value:b}=p.target;h.lastCommittedValue!==b&&(h.lastCommittedValue=b,h.userValue=b,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:g,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,s.addEventListener("blur",p=>{var b,E;if(!h.focused||!p.relatedTarget)return;(b=this.data.actions)!=null&&b.Blur||(h.focused=!1);const{value:g}=p.target;h.userValue=g,h.lastCommittedValue!==g&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:h.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",p=>{var C;h.lastCommittedValue=null;const{data:g,target:b}=p,{value:E,selectionStart:y,selectionEnd:v}=b;let S=y,_=v;switch(p.inputType){case"deleteWordBackward":{const T=E.substring(0,y).match(/\w*[^\w]*$/);T&&(S-=T[0].length);break}case"deleteWordForward":{const T=E.substring(y).match(/^[^\w]*\w*/);T&&(_+=T[0].length);break}case"deleteContentBackward":y===v&&(S-=1);break;case"deleteContentForward":y===v&&(_+=1);break}p.preventDefault(),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:g||"",willCommit:!1,selStart:S,selEnd:_}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&s.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class jC extends ha{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class HC extends ha{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return aa.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=Gh,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,s)){const h=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const l=t.defaultFieldValue||"Off";o.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Eb extends ha{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(aa.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=Gh,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const l=t.defaultFieldValue;o.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===s;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class zC extends bb{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class BC extends ha{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");aa.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=Gh;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,s.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),i.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),o=()=>{h.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const l=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=i;return p?Array.prototype.filter.call(f,g=>g.selected).map(g=>g[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=l(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,g=new Set(Array.isArray(p)?p:[p]);for(const b of i.options)b.selected=g.has(b.value);e.setValue(t,{value:l(!0)}),c=l(!1)},multipleSelection(f){i.multiple=!0},remove(f){const p=i.options,g=f.detail.remove;p[g].selected=!1,i.remove(g),p.length>0&&Array.prototype.findIndex.call(p,E=>E.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),c=l(!1)},insert(f){const{index:p,displayValue:g,exportValue:b}=f.detail.insert,E=i.children[p],y=document.createElement("option");y.textContent=g,y.value=b,E?E.before(y):i.append(y),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},items(f){const{items:p}=f.detail;for(;i.length!==0;)i.remove(0);for(const g of p){const{displayValue:b,exportValue:E}=g,y=document.createElement("option");y.textContent=b,y.value=E,i.append(y)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},indices(f){const p=new Set(f.detail.indices);for(const g of f.target.options)g.selected=p.has(g.index);e.setValue(t,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),i.addEventListener("input",h=>{var p;const d=l(!0),f=l(!1);e.setValue(t,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Dg extends We{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:We._hasPopupData(t)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new $C({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",t.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(s=>`${ly}${s}`).join(",")),this.container}}var xl,Vf,qf,bl,To,Oe,ui,Al,ih,rh,Sl,hi,Jn,di,oh,fi,ah,No,Po,ye,zd,Fg,_b,Cb,kb,Tb,Bd,$d,Og;class $C{constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:u,parentRect:h,open:d}){x(this,ye);x(this,xl,A(this,ye,kb).bind(this));x(this,Vf,A(this,ye,Og).bind(this));x(this,qf,A(this,ye,$d).bind(this));x(this,bl,A(this,ye,Bd).bind(this));x(this,To,null);x(this,Oe,null);x(this,ui,null);x(this,Al,null);x(this,ih,null);x(this,rh,null);x(this,Sl,null);x(this,hi,!1);x(this,Jn,null);x(this,di,null);x(this,oh,null);x(this,fi,null);x(this,ah,null);x(this,No,null);x(this,Po,!1);var f;m(this,Oe,e),m(this,ah,i),m(this,ui,o),m(this,fi,l),m(this,rh,c),m(this,To,t),m(this,oh,u),m(this,Sl,h),m(this,ih,s),m(this,Al,hy.toDateObject(r)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",a(this,bl)),p.addEventListener("mouseenter",a(this,qf)),p.addEventListener("mouseleave",a(this,Vf)),p.classList.add("popupTriggerArea");for(const p of s)(f=p.container)==null||f.addEventListener("keydown",a(this,xl));a(this,Oe).hidden=!0,d&&A(this,ye,Bd).call(this)}render(){if(a(this,Jn))return;const e=m(this,Jn,document.createElement("div"));if(e.className="popup",a(this,To)){const r=e.style.outlineColor=$.makeHexColor(...a(this,To));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=$.makeHexColor(...a(this,To).map(l=>Math.floor(.7*(255-l)+l)))}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=a(this,ah),e.append(t),a(this,Al)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Al).valueOf()})),t.append(r)}const i=a(this,ye,zd);if(i)xb.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(a(this,ui));e.append(r)}a(this,Oe).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const i=e.split(/(?:\r\n?|\n)/);for(let r=0,o=i.length;r<o;++r){const l=i[r];s.append(document.createTextNode(l)),r<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;a(this,No)||m(this,No,{contentsObj:a(this,ui),richText:a(this,fi)}),e&&m(this,di,null),t&&(m(this,fi,A(this,ye,Cb).call(this,t)),m(this,ui,null)),(s=a(this,Jn))==null||s.remove(),m(this,Jn,null)}resetEdited(){var e;a(this,No)&&({contentsObj:Rt(this,ui)._,richText:Rt(this,fi)._}=a(this,No),m(this,No,null),(e=a(this,Jn))==null||e.remove(),m(this,Jn,null),m(this,di,null))}forceHide(){m(this,Po,this.isVisible),a(this,Po)&&(a(this,Oe).hidden=!0)}maybeShow(){a(this,Po)&&(a(this,Jn)||A(this,ye,$d).call(this),m(this,Po,!1),a(this,Oe).hidden=!1)}get isVisible(){return a(this,Oe).hidden===!1}}xl=new WeakMap,Vf=new WeakMap,qf=new WeakMap,bl=new WeakMap,To=new WeakMap,Oe=new WeakMap,ui=new WeakMap,Al=new WeakMap,ih=new WeakMap,rh=new WeakMap,Sl=new WeakMap,hi=new WeakMap,Jn=new WeakMap,di=new WeakMap,oh=new WeakMap,fi=new WeakMap,ah=new WeakMap,No=new WeakMap,Po=new WeakMap,ye=new WeakSet,zd=function(){const e=a(this,fi),t=a(this,ui);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&a(this,fi).html||null},Fg=function(){var e,t,s;return((s=(t=(e=a(this,ye,zd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},_b=function(){var e,t,s;return((s=(t=(e=a(this,ye,zd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},Cb=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:a(this,ye,_b),fontSize:a(this,ye,Fg)?`calc(${a(this,ye,Fg)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:i});return s},kb=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&a(this,hi))&&A(this,ye,Bd).call(this)},Tb=function(){if(a(this,di)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:r}}}=a(this,rh);let o=!!a(this,Sl),l=o?a(this,Sl):a(this,oh);for(const g of a(this,ih))if(!l||$.intersect(g.data.rect,l)!==null){l=g.data.rect,o=!0;break}const c=$.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),h=o?l[2]-l[0]+5:0,d=c[0]+h,f=c[1];m(this,di,[100*(d-i)/t,100*(f-r)/s]);const{style:p}=a(this,Oe);p.left=`${a(this,di)[0]}%`,p.top=`${a(this,di)[1]}%`},Bd=function(){m(this,hi,!a(this,hi)),a(this,hi)?(A(this,ye,$d).call(this),a(this,Oe).addEventListener("click",a(this,bl)),a(this,Oe).addEventListener("keydown",a(this,xl))):(A(this,ye,Og).call(this),a(this,Oe).removeEventListener("click",a(this,bl)),a(this,Oe).removeEventListener("keydown",a(this,xl)))},$d=function(){a(this,Jn)||this.render(),this.isVisible?a(this,hi)&&a(this,Oe).classList.add("focused"):(A(this,ye,Tb).call(this),a(this,Oe).hidden=!1,a(this,Oe).style.zIndex=parseInt(a(this,Oe).style.zIndex)+1e3)},Og=function(){a(this,Oe).classList.remove("focused"),!(a(this,hi)||!this.isVisible)&&(a(this,Oe).hidden=!0,a(this,Oe).style.zIndex=parseInt(a(this,Oe).style.zIndex)-1e3)};class Nb extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=K.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var lh;class WC extends We{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,lh,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:s,height:i}=kr(t.rect),r=this.svgFactory.create(s,i,!0),o=m(this,lh,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,lh)}addHighlightArea(){this.container.classList.add("highlightArea")}}lh=new WeakMap;var ch;class UC extends We{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,ch,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:s,height:i}=kr(t.rect),r=this.svgFactory.create(s,i,!0),o=t.borderStyle.width,l=m(this,ch,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",s-o),l.setAttribute("height",i-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,ch)}addHighlightArea(){this.container.classList.add("highlightArea")}}ch=new WeakMap;var uh;class GC extends We{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,uh,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:s,height:i}=kr(t.rect),r=this.svgFactory.create(s,i,!0),o=t.borderStyle.width,l=m(this,uh,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",s/2),l.setAttribute("cy",i/2),l.setAttribute("rx",s/2-o/2),l.setAttribute("ry",i/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,uh)}addHighlightArea(){this.container.classList.add("highlightArea")}}uh=new WeakMap;var hh;class Pb extends We{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,hh,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:i,popupRef:r}}=this;if(!s)return this.container;const{width:o,height:l}=kr(t),c=this.svgFactory.create(o,l,!0);let u=[];for(let d=0,f=s.length;d<f;d+=2){const p=s[d]-t[0],g=t[3]-s[d+1];u.push(`${p},${g}`)}u=u.join(" ");const h=m(this,hh,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,hh)}addHighlightArea(){this.container.classList.add("highlightArea")}}hh=new WeakMap;class VC extends Pb{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class qC extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var dh,Mo,fh,jg;class gy extends We{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,fh);x(this,dh,null);x(this,Mo,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?K.HIGHLIGHT:K.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:i,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:u}=A(this,fh,jg).call(this,s,t),h=this.svgFactory.create(c,u,!0),d=m(this,dh,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let f=0,p=i.length;f<p;f++){const g=this.svgFactory.createElement(this.svgElementName);a(this,Mo).push(g),g.setAttribute("points",i[f].join(",")),d.append(g)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:i,rect:r}=t,o=a(this,dh);if(s>=0&&o.setAttribute("stroke-width",s||1),i)for(let l=0,c=a(this,Mo).length;l<c;l++)a(this,Mo)[l].setAttribute("points",i[l].join(","));if(r){const{transform:l,width:c,height:u}=A(this,fh,jg).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,Mo)}addHighlightArea(){this.container.classList.add("highlightArea")}}dh=new WeakMap,Mo=new WeakMap,fh=new WeakSet,jg=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class Mb extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=K.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class XC extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class YC extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class KC extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Rb extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=K.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ph,mh,Hg;class QC extends We{constructor(t){var i;super(t,{isRenderable:!0});x(this,mh);x(this,ph,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",A(this,mh,Hg).bind(this)),m(this,ph,i);const{isMac:r}=Bt.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&A(this,mh,Hg).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return a(this,ph)}addHighlightArea(){this.container.classList.add("highlightArea")}}ph=new WeakMap,mh=new WeakSet,Hg=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var gh,Ro,Lo,yh,la,Lb,zg;class ZC{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:l}){x(this,la);x(this,gh,null);x(this,Ro,null);x(this,Lo,new Map);x(this,yh,null);this.div=e,m(this,gh,t),m(this,Ro,s),m(this,yh,l||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return a(this,Lo).size>0}async render(e){var o;const{annotations:t}=e,s=this.div;ra(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new my,annotationStorage:e.annotationStorage||new fy,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const c=l.annotationType===Xe.POPUP;if(c){const d=i.get(l.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=kr(l.rect);if(d<=0||f<=0)continue}r.data=l;const u=DC.create(r);if(!u.isRenderable)continue;if(!c&&l.popupRef){const d=i.get(l.popupRef);d?d.push(u):i.set(l.popupRef,[u])}const h=u.render();l.hidden&&(h.style.visibility="hidden"),await A(this,la,Lb).call(this,h,l.id),u._isEditable&&(a(this,Lo).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}A(this,la,zg).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,ra(t,{rotation:e.rotation}),A(this,la,zg).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Lo).values())}getEditableAnnotation(e){return a(this,Lo).get(e)}}gh=new WeakMap,Ro=new WeakMap,Lo=new WeakMap,yh=new WeakMap,la=new WeakSet,Lb=async function(e,t){var o,l;const s=e.firstChild||e,i=s.id=`${ly}${t}`,r=await((o=a(this,yh))==null?void 0:o.getAriaAttributes(i));if(r)for(const[c,u]of r)s.setAttribute(c,u);this.div.append(e),(l=a(this,gh))==null||l.moveElementInDOM(this.div,e,s,!1)},zg=function(){if(!a(this,Ro))return;const e=this.div;for(const[t,s]of a(this,Ro)){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:r}=i;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):i.append(s)}a(this,Ro).clear()};const dd=/\r\n?|\n/g;var es,un,vh,Io,hn,qe,Ib,Db,Fb,Wd,Ci,Ud,Gd,Ob,$g,jb;const we=class we extends Le{constructor(t){super({...t,name:"freeTextEditor"});x(this,qe);x(this,es);x(this,un,"");x(this,vh,`${this.id}-editor`);x(this,Io,null);x(this,hn);m(this,es,t.color||we._defaultColor||Le._defaultLineColor),m(this,hn,t.fontSize||we._defaultFontSize)}static get _keyboardManager(){const t=we.prototype,s=o=>o.isEmpty(),i=oa.TRANSLATE_SMALL,r=oa.TRANSLATE_BIG;return ee(this,"_keyboardManager",new Uh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(t,s){Le.initialize(t,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case ie.FREETEXT_SIZE:we._defaultFontSize=s;break;case ie.FREETEXT_COLOR:we._defaultColor=s;break}}updateParams(t,s){switch(t){case ie.FREETEXT_SIZE:A(this,qe,Ib).call(this,s);break;case ie.FREETEXT_COLOR:A(this,qe,Db).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ie.FREETEXT_SIZE,we._defaultFontSize],[ie.FREETEXT_COLOR,we._defaultColor||Le._defaultLineColor]]}get propertiesToUpdate(){return[[ie.FREETEXT_SIZE,a(this,hn)],[ie.FREETEXT_COLOR,a(this,es)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-we._internalPadding*t,-(we._internalPadding+a(this,hn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(K.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),m(this,Io,new AbortController);const t=this._uiManager.combinedSignal(a(this,Io));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,vh)),this._isDraggable=!0,(t=a(this,Io))==null||t.abort(),m(this,Io,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=a(this,un),s=m(this,un,A(this,qe,Fb).call(this).trimEnd());if(t===s)return;const i=r=>{if(m(this,un,r),!r){this.remove();return}A(this,qe,Gd).call(this),this._uiManager.rebuild(this),A(this,qe,Wd).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(t)},mustExec:!1}),A(this,qe,Wd).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){we._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,vh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${a(this,hn)}px * var(--scale-factor))`,i.color=a(this,es),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),kf(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let g,b;switch(this.rotation){case 0:g=t+(l[0]-f)/h,b=s+this.height-(l[1]-p)/d;break;case 90:g=t+(l[0]-f)/h,b=s-(l[1]-p)/d,[c,u]=[u,-c];break;case 180:g=t-this.width+(l[0]-f)/h,b=s-(l[1]-p)/d,[c,u]=[-c,-u];break;case 270:g=t+(l[0]-f-this.height*d)/h,b=s+(l[1]-p-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(g*r,b*o,c,u)}else this.setAt(t*r,s*o,this.width*r,this.height*o);A(this,qe,Gd).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var g,b,E;const s=t.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=A(g=we,Ci,$g).call(g,s.getData("text")||"").replaceAll(dd,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=l,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const y=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(dd,"")),y!==this.editorDiv){let v=h;for(const S of this.editorDiv.childNodes){if(S===y){v=d;continue}v.push(A(b=we,Ci,Ud).call(b,S))}}h.push(c.nodeValue.slice(0,u).replaceAll(dd,""))}else if(c===this.editorDiv){let y=h,v=0;for(const S of this.editorDiv.childNodes)v++===u&&(y=d),y.push(A(E=we,Ci,Ud).call(E,S))}m(this,un,`${h.join(`
`)}${r}${d.join(`
`)}`),A(this,qe,Gd).call(this);const f=new Range;let p=h.reduce((y,v)=>y+v.length,0);for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const v=y.nodeValue.length;if(p<=v){f.setStart(y,p),f.setEnd(y,p);break}p-=v}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,s,i){var l;let r=null;if(t instanceof Nb){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:p},textContent:g,textPosition:b,parent:{page:{pageNumber:E}}}=t;if(!g||g.length===0)return null;r=t={annotationType:K.FREETEXT,color:Array.from(u),fontSize:c,value:g.join(`
`),position:b,pageIndex:E-1,rect:h.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const o=await super.deserialize(t,s,i);return m(o,hn,t.fontSize),m(o,es,$.makeHexColor(...t.color)),m(o,un,A(l=we,Ci,$g).call(l,t.value)),o.annotationElementId=t.id||null,o._initialData=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=we._internalPadding*this.parentScale,i=this.getRect(s,s),r=Le._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,es)),o={annotationType:K.FREETEXT,color:r,fontSize:a(this,hn),value:A(this,qe,Ob).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!A(this,qe,jb).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${a(this,hn)}px * var(--scale-factor))`,i.color=a(this,es),s.replaceChildren();for(const o of a(this,un).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),s.append(l)}const r=we._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:a(this,un)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};es=new WeakMap,un=new WeakMap,vh=new WeakMap,Io=new WeakMap,hn=new WeakMap,qe=new WeakSet,Ib=function(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-a(this,hn))*this.parentScale),m(this,hn,r),A(this,qe,Wd).call(this)},i=a(this,hn);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Db=function(t){const s=r=>{m(this,es,this.editorDiv.style.color=r)},i=a(this,es);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Fb=function(){var i;const t=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(A(i=we,Ci,Ud).call(i,r)),s=r);return t.join(`
`)},Wd=function(){const[t,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/s):(this.width=i.height/t,this.height=i.width/s),this.fixAndSetPosition()},Ci=new WeakSet,Ud=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(dd,"")},Gd=function(){if(this.editorDiv.replaceChildren(),!!a(this,un))for(const t of a(this,un).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},Ob=function(){return a(this,un).replaceAll(" "," ")},$g=function(t){return t.replaceAll(" "," ")},jb=function(t){const{value:s,fontSize:i,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==s||t.fontSize!==i||t.color.some((l,c)=>l!==r[c])||t.pageIndex!==o},x(we,Ci),G(we,"_freeTextDefaultContent",""),G(we,"_internalPadding",0),G(we,"_defaultColor",null),G(we,"_defaultFontSize",10),G(we,"_type","freetext"),G(we,"_editorType",K.FREETEXT);let Bg=we;class O{toSVGPath(){ve("Abstract method `toSVGPath` must be implemented.")}get box(){ve("Abstract getter `box` must be implemented.")}serialize(e,t){ve("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,r,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=t+e[l]*i,o[l+1]=s+e[l+1]*r;return o}static _rescaleAndSwap(e,t,s,i,r,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=t+e[l+1]*i,o[l+1]=s+e[l]*r;return o}static _translate(e,t,s,i){i||(i=new Float32Array(e.length));for(let r=0,o=e.length;r<o;r+=2)i[r]=t+e[r],i[r+1]=s+e[r+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,r){switch(r){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,r,o){return[(e+5*s)/6,(t+5*i)/6,(5*s+r)/6,(5*i+o)/6,(s+r)/2,(i+o)/2]}}G(O,"PRECISION",1e-4);var dn,ts,El,_l,Ps,J,Do,Fo,wh,xh,Cl,kl,or,bh,Xf,Yf,et,Pc,Hb,zb,Bb,$b,Wb,Ub;const Xs=class Xs{constructor({x:e,y:t},s,i,r,o,l=0){x(this,et);x(this,dn);x(this,ts,[]);x(this,El);x(this,_l);x(this,Ps,[]);x(this,J,new Float32Array(18));x(this,Do);x(this,Fo);x(this,wh);x(this,xh);x(this,Cl);x(this,kl);x(this,or,[]);m(this,dn,s),m(this,kl,r*i),m(this,_l,o),a(this,J).set([NaN,NaN,NaN,NaN,e,t],6),m(this,El,l),m(this,xh,a(Xs,bh)*i),m(this,wh,a(Xs,Yf)*i),m(this,Cl,i),a(this,or).push(e,t)}isEmpty(){return isNaN(a(this,J)[8])}add({x:e,y:t}){var P;m(this,Do,e),m(this,Fo,t);const[s,i,r,o]=a(this,dn);let[l,c,u,h]=a(this,J).subarray(8,12);const d=e-u,f=t-h,p=Math.hypot(d,f);if(p<a(this,wh))return!1;const g=p-a(this,xh),b=g/p,E=b*d,y=b*f;let v=l,S=c;l=u,c=h,u+=E,h+=y,(P=a(this,or))==null||P.push(e,t);const _=-y/g,C=E/g,T=_*a(this,kl),k=C*a(this,kl);return a(this,J).set(a(this,J).subarray(2,8),0),a(this,J).set([u+T,h+k],4),a(this,J).set(a(this,J).subarray(14,18),12),a(this,J).set([u-T,h-k],16),isNaN(a(this,J)[6])?(a(this,Ps).length===0&&(a(this,J).set([l+T,c+k],2),a(this,Ps).push(NaN,NaN,NaN,NaN,(l+T-s)/r,(c+k-i)/o),a(this,J).set([l-T,c-k],14),a(this,ts).push(NaN,NaN,NaN,NaN,(l-T-s)/r,(c-k-i)/o)),a(this,J).set([v,S,l,c,u,h],6),!this.isEmpty()):(a(this,J).set([v,S,l,c,u,h],6),Math.abs(Math.atan2(S-c,v-l)-Math.atan2(y,E))<Math.PI/2?([l,c,u,h]=a(this,J).subarray(2,6),a(this,Ps).push(NaN,NaN,NaN,NaN,((l+u)/2-s)/r,((c+h)/2-i)/o),[l,c,v,S]=a(this,J).subarray(14,18),a(this,ts).push(NaN,NaN,NaN,NaN,((v+l)/2-s)/r,((S+c)/2-i)/o),!0):([v,S,l,c,u,h]=a(this,J).subarray(0,6),a(this,Ps).push(((v+5*l)/6-s)/r,((S+5*c)/6-i)/o,((5*l+u)/6-s)/r,((5*c+h)/6-i)/o,((l+u)/2-s)/r,((c+h)/2-i)/o),[u,h,l,c,v,S]=a(this,J).subarray(12,18),a(this,ts).push(((v+5*l)/6-s)/r,((S+5*c)/6-i)/o,((5*l+u)/6-s)/r,((5*c+h)/6-i)/o,((l+u)/2-s)/r,((c+h)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=a(this,Ps),t=a(this,ts);if(isNaN(a(this,J)[6])&&!this.isEmpty())return A(this,et,Hb).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);A(this,et,Bb).call(this,s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return A(this,et,zb).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,i,r,o){return new Gb(e,t,s,i,r,o)}getOutlines(){var d;const e=a(this,Ps),t=a(this,ts),s=a(this,J),[i,r,o,l]=a(this,dn),c=new Float32Array((((d=a(this,or))==null?void 0:d.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(a(this,or)[f]-i)/o,c[f+1]=(a(this,or)[f+1]-r)/l;if(c[c.length-2]=(a(this,Do)-i)/o,c[c.length-1]=(a(this,Fo)-r)/l,isNaN(s[6])&&!this.isEmpty())return A(this,et,$b).call(this,c);const u=new Float32Array(a(this,Ps).length+24+a(this,ts).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}h=A(this,et,Ub).call(this,u,h);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[f+p],u[h+1]=t[f+p+1],h+=2}return A(this,et,Wb).call(this,u,h),this.newFreeDrawOutline(u,c,a(this,dn),a(this,Cl),a(this,El),a(this,_l))}};dn=new WeakMap,ts=new WeakMap,El=new WeakMap,_l=new WeakMap,Ps=new WeakMap,J=new WeakMap,Do=new WeakMap,Fo=new WeakMap,wh=new WeakMap,xh=new WeakMap,Cl=new WeakMap,kl=new WeakMap,or=new WeakMap,bh=new WeakMap,Xf=new WeakMap,Yf=new WeakMap,et=new WeakSet,Pc=function(){const e=a(this,J).subarray(4,6),t=a(this,J).subarray(16,18),[s,i,r,o]=a(this,dn);return[(a(this,Do)+(e[0]-t[0])/2-s)/r,(a(this,Fo)+(e[1]-t[1])/2-i)/o,(a(this,Do)+(t[0]-e[0])/2-s)/r,(a(this,Fo)+(t[1]-e[1])/2-i)/o]},Hb=function(){const[e,t,s,i]=a(this,dn),[r,o,l,c]=A(this,et,Pc).call(this);return`M${(a(this,J)[2]-e)/s} ${(a(this,J)[3]-t)/i} L${(a(this,J)[4]-e)/s} ${(a(this,J)[5]-t)/i} L${r} ${o} L${l} ${c} L${(a(this,J)[16]-e)/s} ${(a(this,J)[17]-t)/i} L${(a(this,J)[14]-e)/s} ${(a(this,J)[15]-t)/i} Z`},zb=function(e){const t=a(this,ts);e.push(`L${t[4]} ${t[5]} Z`)},Bb=function(e){const[t,s,i,r]=a(this,dn),o=a(this,J).subarray(4,6),l=a(this,J).subarray(16,18),[c,u,h,d]=A(this,et,Pc).call(this);e.push(`L${(o[0]-t)/i} ${(o[1]-s)/r} L${c} ${u} L${h} ${d} L${(l[0]-t)/i} ${(l[1]-s)/r}`)},$b=function(e){const t=a(this,J),[s,i,r,o]=a(this,dn),[l,c,u,h]=A(this,et,Pc).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-s)/r,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-s)/r,(t[5]-i)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-s)/r,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-s)/r,(t[15]-i)/o],0),this.newFreeDrawOutline(d,e,a(this,dn),a(this,Cl),a(this,El),a(this,_l))},Wb=function(e,t){const s=a(this,ts);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},Ub=function(e,t){const s=a(this,J).subarray(4,6),i=a(this,J).subarray(16,18),[r,o,l,c]=a(this,dn),[u,h,d,f]=A(this,et,Pc).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(i[0]-r)/l,(i[1]-o)/c],t),t+=24},x(Xs,bh,8),x(Xs,Xf,2),x(Xs,Yf,a(Xs,bh)+a(Xs,Xf));let Pf=Xs;var Tl,Oo,pi,Ah,fn,Sh,Be,Kf,Vb;class Gb extends O{constructor(t,s,i,r,o,l){super();x(this,Kf);x(this,Tl);x(this,Oo,new Float32Array(4));x(this,pi);x(this,Ah);x(this,fn);x(this,Sh);x(this,Be);m(this,Be,t),m(this,fn,s),m(this,Tl,i),m(this,Sh,r),m(this,pi,o),m(this,Ah,l),this.lastPoint=[NaN,NaN],A(this,Kf,Vb).call(this,l);const[c,u,h,d]=a(this,Oo);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-c)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,p=s.length;f<p;f+=2)s[f]=(s[f]-c)/h,s[f+1]=(s[f+1]-u)/d}toSVGPath(){const t=[`M${a(this,Be)[4]} ${a(this,Be)[5]}`];for(let s=6,i=a(this,Be).length;s<i;s+=6){if(isNaN(a(this,Be)[s])){t.push(`L${a(this,Be)[s+4]} ${a(this,Be)[s+5]}`);continue}t.push(`C${a(this,Be)[s]} ${a(this,Be)[s+1]} ${a(this,Be)[s+2]} ${a(this,Be)[s+3]} ${a(this,Be)[s+4]} ${a(this,Be)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,i,r],o){const l=i-t,c=r-s;let u,h;switch(o){case 0:u=O._rescale(a(this,Be),t,r,l,-c),h=O._rescale(a(this,fn),t,r,l,-c);break;case 90:u=O._rescaleAndSwap(a(this,Be),t,s,l,c),h=O._rescaleAndSwap(a(this,fn),t,s,l,c);break;case 180:u=O._rescale(a(this,Be),i,s,-l,c),h=O._rescale(a(this,fn),i,s,-l,c);break;case 270:u=O._rescaleAndSwap(a(this,Be),i,r,-l,-c),h=O._rescaleAndSwap(a(this,fn),i,r,-l,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return a(this,Oo)}newOutliner(t,s,i,r,o,l=0){return new Pf(t,s,i,r,o,l)}getNewOutline(t,s){const[i,r,o,l]=a(this,Oo),[c,u,h,d]=a(this,Tl),f=o*h,p=l*d,g=i*h+c,b=r*d+u,E=this.newOutliner({x:a(this,fn)[0]*f+g,y:a(this,fn)[1]*p+b},a(this,Tl),a(this,Sh),t,a(this,Ah),s??a(this,pi));for(let y=2;y<a(this,fn).length;y+=2)E.add({x:a(this,fn)[y]*f+g,y:a(this,fn)[y+1]*p+b});return E.getOutlines()}}Tl=new WeakMap,Oo=new WeakMap,pi=new WeakMap,Ah=new WeakMap,fn=new WeakMap,Sh=new WeakMap,Be=new WeakMap,Kf=new WeakSet,Vb=function(t){const s=a(this,Be);let i=s[4],r=s[5],o=i,l=r,c=i,u=r,h=i,d=r;const f=t?Math.max:Math.min;for(let g=6,b=s.length;g<b;g+=6){if(isNaN(s[g]))o=Math.min(o,s[g+4]),l=Math.min(l,s[g+5]),c=Math.max(c,s[g+4]),u=Math.max(u,s[g+5]),d<s[g+5]?(h=s[g+4],d=s[g+5]):d===s[g+5]&&(h=f(h,s[g+4]));else{const E=$.bezierBoundingBox(i,r,...s.slice(g,g+6));o=Math.min(o,E[0]),l=Math.min(l,E[1]),c=Math.max(c,E[2]),u=Math.max(u,E[3]),d<E[3]?(h=E[2],d=E[3]):d===E[3]&&(h=f(h,E[2]))}i=s[g+4],r=s[g+5]}const p=a(this,Oo);p[0]=o-a(this,pi),p[1]=l-a(this,pi),p[2]=c-o+2*a(this,pi),p[3]=u-l+2*a(this,pi),this.lastPoint=[h,d]};var Eh,_h,ar,ns,Wt,qb,Vd,Xb,Yb,Ug;class Wg{constructor(e,t=0,s=0,i=!0){x(this,Wt);x(this,Eh);x(this,_h);x(this,ar,[]);x(this,ns,[]);let r=1/0,o=-1/0,l=1/0,c=-1/0;const h=10**-4;for(const{x:y,y:v,width:S,height:_}of e){const C=Math.floor((y-t)/h)*h,T=Math.ceil((y+S+t)/h)*h,k=Math.floor((v-t)/h)*h,N=Math.ceil((v+_+t)/h)*h,P=[C,k,N,!0],L=[T,k,N,!1];a(this,ar).push(P,L),r=Math.min(r,C),o=Math.max(o,T),l=Math.min(l,k),c=Math.max(c,N)}const d=o-r+2*s,f=c-l+2*s,p=r-s,g=l-s,b=a(this,ar).at(i?-1:-2),E=[b[0],b[2]];for(const y of a(this,ar)){const[v,S,_]=y;y[0]=(v-p)/d,y[1]=(S-g)/f,y[2]=(_-g)/f}m(this,Eh,new Float32Array([p,g,d,f])),m(this,_h,E)}getOutlines(){a(this,ar).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of a(this,ar))t[3]?(e.push(...A(this,Wt,Ug).call(this,t)),A(this,Wt,Xb).call(this,t)):(A(this,Wt,Yb).call(this,t),e.push(...A(this,Wt,Ug).call(this,t)));return A(this,Wt,qb).call(this,e)}}Eh=new WeakMap,_h=new WeakMap,ar=new WeakMap,ns=new WeakMap,Wt=new WeakSet,qb=function(e){const t=[],s=new Set;for(const o of e){const[l,c,u]=o;t.push([l,c,o],[l,u,o])}t.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=t.length;o<l;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),s.add(c),s.add(u)}const i=[];let r;for(;s.size>0;){const o=s.values().next().value;let[l,c,u,h,d]=o;s.delete(o);let f=l,p=c;for(r=[l,u],i.push(r);;){let g;if(s.has(h))g=h;else if(s.has(d))g=d;else break;s.delete(g),[l,c,u,h,d]=g,f!==l&&(r.push(f,p,l,p===c?c:u),f=l),p=p===c?u:c}r.push(f,p)}return new JC(i,a(this,Eh),a(this,_h))},Vd=function(e){const t=a(this,ns);let s=0,i=t.length-1;for(;s<=i;){const r=s+i>>1,o=t[r][0];if(o===e)return r;o<e?s=r+1:i=r-1}return i+1},Xb=function([,e,t]){const s=A(this,Wt,Vd).call(this,e);a(this,ns).splice(s,0,[e,t])},Yb=function([,e,t]){const s=A(this,Wt,Vd).call(this,e);for(let i=s;i<a(this,ns).length;i++){const[r,o]=a(this,ns)[i];if(r!==e)break;if(r===e&&o===t){a(this,ns).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,o]=a(this,ns)[i];if(r!==e)break;if(r===e&&o===t){a(this,ns).splice(i,1);return}}},Ug=function(e){const[t,s,i]=e,r=[[t,s,i]],o=A(this,Wt,Vd).call(this,i);for(let l=0;l<o;l++){const[c,u]=a(this,ns)[l];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=c)){if(f>=c){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,p>u&&r.push([t,u,p])}}}return r};var Ch,Nl;class JC extends O{constructor(t,s,i){super();x(this,Ch);x(this,Nl);m(this,Nl,t),m(this,Ch,s),this.lastPoint=i}toSVGPath(){const t=[];for(const s of a(this,Nl)){let[i,r]=s;t.push(`M${i} ${r}`);for(let o=2;o<s.length;o+=2){const l=s[o],c=s[o+1];l===i?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${l}`),i=l)}t.push("Z")}return t.join(" ")}serialize([t,s,i,r],o){const l=[],c=i-t,u=r-s;for(const h of a(this,Nl)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*c,d[f+1]=r-h[f+1]*u;l.push(d)}return l}get box(){return a(this,Ch)}get classNamesForOutlining(){return["highlightOutline"]}}Ch=new WeakMap,Nl=new WeakMap;class Gg extends Pf{newFreeDrawOutline(e,t,s,i,r,o){return new ek(e,t,s,i,r,o)}}class ek extends Gb{newOutliner(e,t,s,i,r,o=0){return new Gg(e,t,s,i,r,o)}}var ss,jo,Pl,Qe,kh,Ml,Th,Nh,lr,is,Rl,Ph,ge,Vg,qg,Xg,zr,Kb,Di;const Yt=class Yt{constructor({editor:e=null,uiManager:t=null}){x(this,ge);x(this,ss,null);x(this,jo,null);x(this,Pl);x(this,Qe,null);x(this,kh,!1);x(this,Ml,!1);x(this,Th,null);x(this,Nh);x(this,lr,null);x(this,is,null);x(this,Rl);var s;e?(m(this,Ml,!1),m(this,Rl,ie.HIGHLIGHT_COLOR),m(this,Th,e)):(m(this,Ml,!0),m(this,Rl,ie.HIGHLIGHT_DEFAULT_COLOR)),m(this,is,(e==null?void 0:e._uiManager)||t),m(this,Nh,a(this,is)._eventBus),m(this,Pl,(e==null?void 0:e.color)||((s=a(this,is))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),a(Yt,Ph)||m(Yt,Ph,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ee(this,"_keyboardManager",new Uh([[["Escape","mac+Escape"],Yt.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Yt.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Yt.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Yt.prototype._moveToPrevious],[["Home","mac+Home"],Yt.prototype._moveToBeginning],[["End","mac+End"],Yt.prototype._moveToEnd]]))}renderButton(){const e=m(this,ss,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=a(this,is)._signal;e.addEventListener("click",A(this,ge,zr).bind(this),{signal:t}),e.addEventListener("keydown",A(this,ge,Xg).bind(this),{signal:t});const s=m(this,jo,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=a(this,Pl),e.append(s),e}renderMainDropdown(){const e=m(this,Qe,A(this,ge,Vg).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===a(this,ss)){A(this,ge,zr).call(this,e);return}const t=e.target.getAttribute("data-color");t&&A(this,ge,qg).call(this,t,e)}_moveToNext(e){var t,s;if(!a(this,ge,Di)){A(this,ge,zr).call(this,e);return}if(e.target===a(this,ss)){(t=a(this,Qe).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=a(this,Qe))==null?void 0:t.firstChild)||e.target===a(this,ss)){a(this,ge,Di)&&this._hideDropdownFromKeyboard();return}a(this,ge,Di)||A(this,ge,zr).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!a(this,ge,Di)){A(this,ge,zr).call(this,e);return}(t=a(this,Qe).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!a(this,ge,Di)){A(this,ge,zr).call(this,e);return}(t=a(this,Qe).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=a(this,Qe))==null||e.classList.add("hidden"),(t=a(this,lr))==null||t.abort(),m(this,lr,null)}_hideDropdownFromKeyboard(){var e;if(!a(this,Ml)){if(!a(this,ge,Di)){(e=a(this,Th))==null||e.unselect();return}this.hideDropdown(),a(this,ss).focus({preventScroll:!0,focusVisible:a(this,kh)})}}updateColor(e){if(a(this,jo)&&(a(this,jo).style.backgroundColor=e),!a(this,Qe))return;const t=a(this,is).highlightColors.values();for(const s of a(this,Qe).children)s.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=a(this,ss))==null||e.remove(),m(this,ss,null),m(this,jo,null),(t=a(this,Qe))==null||t.remove(),m(this,Qe,null)}};ss=new WeakMap,jo=new WeakMap,Pl=new WeakMap,Qe=new WeakMap,kh=new WeakMap,Ml=new WeakMap,Th=new WeakMap,Nh=new WeakMap,lr=new WeakMap,is=new WeakMap,Rl=new WeakMap,Ph=new WeakMap,ge=new WeakSet,Vg=function(){const e=document.createElement("div"),t=a(this,is)._signal;e.addEventListener("contextmenu",fs,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,i]of a(this,is).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",a(Yt,Ph)[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.setAttribute("aria-selected",i===a(this,Pl)),r.addEventListener("click",A(this,ge,qg).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",A(this,ge,Xg).bind(this),{signal:t}),e},qg=function(e,t){t.stopPropagation(),a(this,Nh).dispatch("switchannotationeditorparams",{source:this,type:a(this,Rl),value:e})},Xg=function(e){Yt._keyboardManager.exec(this,e)},zr=function(e){if(a(this,ge,Di)){this.hideDropdown();return}if(m(this,kh,e.detail===0),a(this,lr)||(m(this,lr,new AbortController),window.addEventListener("pointerdown",A(this,ge,Kb).bind(this),{signal:a(this,is).combinedSignal(a(this,lr))})),a(this,Qe)){a(this,Qe).classList.remove("hidden");return}const t=m(this,Qe,A(this,ge,Vg).call(this));a(this,ss).append(t)},Kb=function(e){var t;(t=a(this,Qe))!=null&&t.contains(e.target)||this.hideDropdown()},Di=function(){return a(this,Qe)&&!a(this,Qe).classList.contains("hidden")},x(Yt,Ph,null);let Mf=Yt;var Ll,Mh,mi,Ho,Il,Zt,Rh,Lh,zo,Rn,pn,dt,Dl,gi,Ct,Fl,Ln,Ih,Y,Yg,qd,Qb,Zb,Jb,Kg,Br,Hn,wa,eA,Xd,Mc,tA,nA,sA,iA,rA;const ue=class ue extends Le{constructor(t){super({...t,name:"highlightEditor"});x(this,Y);x(this,Ll,null);x(this,Mh,0);x(this,mi);x(this,Ho,null);x(this,Il,null);x(this,Zt,null);x(this,Rh,null);x(this,Lh,0);x(this,zo,null);x(this,Rn,null);x(this,pn,null);x(this,dt,!1);x(this,Dl,null);x(this,gi);x(this,Ct,null);x(this,Fl,"");x(this,Ln);x(this,Ih,"");this.color=t.color||ue._defaultColor,m(this,Ln,t.thickness||ue._defaultThickness),m(this,gi,t.opacity||ue._defaultOpacity),m(this,mi,t.boxes||null),m(this,Ih,t.methodOfCreation||""),m(this,Fl,t.text||""),this._isDraggable=!1,t.highlightId>-1?(m(this,dt,!0),A(this,Y,qd).call(this,t),A(this,Y,Br).call(this)):a(this,mi)&&(m(this,Ll,t.anchorNode),m(this,Mh,t.anchorOffset),m(this,Rh,t.focusNode),m(this,Lh,t.focusOffset),A(this,Y,Yg).call(this),A(this,Y,Br).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=ue.prototype;return ee(this,"_keyboardManager",new Uh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,dt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:a(this,Ln),methodOfCreation:a(this,Ih)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var i;Le.initialize(t,s),ue._defaultColor||(ue._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case ie.HIGHLIGHT_DEFAULT_COLOR:ue._defaultColor=s;break;case ie.HIGHLIGHT_THICKNESS:ue._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return a(this,Dl)}updateParams(t,s){switch(t){case ie.HIGHLIGHT_COLOR:A(this,Y,Qb).call(this,s);break;case ie.HIGHLIGHT_THICKNESS:A(this,Y,Zb).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ie.HIGHLIGHT_DEFAULT_COLOR,ue._defaultColor],[ie.HIGHLIGHT_THICKNESS,ue._defaultThickness]]}get propertiesToUpdate(){return[[ie.HIGHLIGHT_COLOR,this.color||ue._defaultColor],[ie.HIGHLIGHT_THICKNESS,a(this,Ln)||ue._defaultThickness],[ie.HIGHLIGHT_FREE,a(this,dt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(m(this,Il,new Mf({editor:this})),t.addColorPicker(a(this,Il))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,Y,Mc).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,A(this,Y,Mc).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){A(this,Y,Kg).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Y,Br).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?A(this,Y,Kg).call(this):t&&(A(this,Y,Br).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var r,o,l;const{drawLayer:s}=this.parent;let i;a(this,dt)?(t=(t-this.rotation+360)%360,i=A(r=ue,Hn,wa).call(r,a(this,Rn).box,t)):i=A(o=ue,Hn,wa).call(o,[this.x,this.y,this.width,this.height],t),s.updateProperties(a(this,pn),{bbox:i,root:{"data-main-rotation":t}}),s.updateProperties(a(this,Ct),{bbox:A(l=ue,Hn,wa).call(l,a(this,Zt).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();a(this,Fl)&&(t.setAttribute("aria-label",a(this,Fl)),t.setAttribute("role","mark")),a(this,dt)?t.classList.add("free"):this.div.addEventListener("keydown",A(this,Y,eA).bind(this),{signal:this._uiManager._signal});const s=m(this,zo,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=a(this,Ho);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),kf(this,a(this,zo),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(a(this,Ct),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(a(this,Ct),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:A(this,Y,Xd).call(this,!0);break;case 1:case 3:A(this,Y,Xd).call(this,!1);break}}select(){var t;super.select(),a(this,Ct)&&((t=this.parent)==null||t.drawLayer.updateProperties(a(this,Ct),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),a(this,Ct)&&((t=this.parent)==null||t.drawLayer.updateProperties(a(this,Ct),{rootClass:{selected:!1}}),a(this,dt)||A(this,Y,Xd).call(this,!1))}get _mustFixPosition(){return!a(this,dt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(a(this,pn),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(a(this,Ct),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:i,x:r,y:o}){const{x:l,y:c,width:u,height:h}=i.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),p=g=>{d.abort(),A(this,Hn,iA).call(this,t,g)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",bn,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",fs,{signal:f}),i.addEventListener("pointermove",A(this,Hn,sA).bind(this,t),{signal:f}),this._freeHighlight=new Gg({x:r,y:o},[l,c,u,h],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,i){var b,E,y,v;let r=null;if(t instanceof Mb){const{data:{quadPoints:S,rect:_,rotation:C,id:T,color:k,opacity:N,popupRef:P},parent:{page:{pageNumber:L}}}=t;r=t={annotationType:K.HIGHLIGHT,color:Array.from(k),opacity:N,quadPoints:S,boxes:null,pageIndex:L-1,rect:_.slice(0),rotation:C,id:T,deleted:!1,popupRef:P}}else if(t instanceof gy){const{data:{inkLists:S,rect:_,rotation:C,id:T,color:k,borderStyle:{rawWidth:N},popupRef:P},parent:{page:{pageNumber:L}}}=t;r=t={annotationType:K.HIGHLIGHT,color:Array.from(k),thickness:N,inkLists:S,boxes:null,pageIndex:L-1,rect:_.slice(0),rotation:C,id:T,deleted:!1,popupRef:P}}const{color:o,quadPoints:l,inkLists:c,opacity:u}=t,h=await super.deserialize(t,s,i);h.color=$.makeHexColor(...o),m(h,gi,u||1),c&&m(h,Ln,t.thickness),h.annotationElementId=t.id||null,h._initialData=r;const[d,f]=h.pageDimensions,[p,g]=h.pageTranslation;if(l){const S=m(h,mi,[]);for(let _=0;_<l.length;_+=8)S.push({x:(l[_]-p)/d,y:1-(l[_+1]-g)/f,width:(l[_+2]-l[_])/d,height:(l[_+1]-l[_+5])/f});A(b=h,Y,Yg).call(b),A(E=h,Y,Br).call(E),h.rotate(h.rotation)}else if(c){m(h,dt,!0);const S=c[0],_={x:S[0]-p,y:f-(S[1]-g)},C=new Gg(_,[0,0,d,f],1,a(h,Ln)/2,!0,.001);for(let N=0,P=S.length;N<P;N+=2)_.x=S[N]-p,_.y=f-(S[N+1]-g),C.add(_);const{id:T,clipPathId:k}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);A(y=h,Y,qd).call(y,{highlightOutlines:C.getOutlines(),highlightId:T,clipPathId:k}),A(v=h,Y,Br).call(v)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=Le._colorManager.convert(this.color),r={annotationType:K.HIGHLIGHT,color:i,opacity:a(this,gi),thickness:a(this,Ln),quadPoints:A(this,Y,tA).call(this),outlines:A(this,Y,nA).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:A(this,Y,Mc).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!A(this,Y,rA).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Ll=new WeakMap,Mh=new WeakMap,mi=new WeakMap,Ho=new WeakMap,Il=new WeakMap,Zt=new WeakMap,Rh=new WeakMap,Lh=new WeakMap,zo=new WeakMap,Rn=new WeakMap,pn=new WeakMap,dt=new WeakMap,Dl=new WeakMap,gi=new WeakMap,Ct=new WeakMap,Fl=new WeakMap,Ln=new WeakMap,Ih=new WeakMap,Y=new WeakSet,Yg=function(){const t=new Wg(a(this,mi),.001);m(this,Rn,t.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,Rn).box;const s=new Wg(a(this,mi),.0025,.001,this._uiManager.direction==="ltr");m(this,Zt,s.getOutlines());const{lastPoint:i}=a(this,Zt);m(this,Dl,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},qd=function({highlightOutlines:t,highlightId:s,clipPathId:i}){var d,f;if(m(this,Rn,t),m(this,Zt,t.getNewOutline(a(this,Ln)/2+1.5,.0025)),s>=0)m(this,pn,s),m(this,Ho,i),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),m(this,Ct,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,Zt).box,path:{d:a(this,Zt).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,pn),{bbox:A(d=ue,Hn,wa).call(d,a(this,Rn).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,Ct),{bbox:A(f=ue,Hn,wa).call(f,a(this,Zt).box,p),path:{d:a(this,Zt).toSVGPath()}})}const[o,l,c,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=u;break;case 90:{const[p,g]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*g/p,this.height=u*p/g;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[p,g]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*g/p,this.height=u*p/g;break}}const{lastPoint:h}=a(this,Zt);m(this,Dl,[(h[0]-o)/c,(h[1]-l)/u])},Qb=function(t){const s=(o,l)=>{var c,u;this.color=o,m(this,gi,l),(c=this.parent)==null||c.drawLayer.updateProperties(a(this,pn),{root:{fill:o,"fill-opacity":l}}),(u=a(this,Il))==null||u.updateColor(o)},i=this.color,r=a(this,gi);this.addCommands({cmd:s.bind(this,t,ue._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},Zb=function(t){const s=a(this,Ln),i=r=>{m(this,Ln,r),A(this,Y,Jb).call(this,r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},Jb=function(t){if(!a(this,dt))return;A(this,Y,qd).call(this,{highlightOutlines:a(this,Rn).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},Kg=function(){a(this,pn)===null||!this.parent||(this.parent.drawLayer.remove(a(this,pn)),m(this,pn,null),this.parent.drawLayer.remove(a(this,Ct)),m(this,Ct,null))},Br=function(t=this.parent){a(this,pn)===null&&({id:Rt(this,pn)._,clipPathId:Rt(this,Ho)._}=t.drawLayer.draw({bbox:a(this,Rn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":a(this,gi)},rootClass:{highlight:!0,free:a(this,dt)},path:{d:a(this,Rn).toSVGPath()}},!1,!0),m(this,Ct,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,dt)},bbox:a(this,Zt).box,path:{d:a(this,Zt).toSVGPath()}},a(this,dt))),a(this,zo)&&(a(this,zo).style.clipPath=a(this,Ho)))},Hn=new WeakSet,wa=function([t,s,i,r],o){switch(o){case 90:return[1-s-r,t,r,i];case 180:return[1-t-i,1-s-r,i,r];case 270:return[s,1-t-i,r,i]}return[t,s,i,r]},eA=function(t){ue._keyboardManager.exec(this,t)},Xd=function(t){if(!a(this,Ll))return;const s=window.getSelection();t?s.setPosition(a(this,Ll),a(this,Mh)):s.setPosition(a(this,Rh),a(this,Lh))},Mc=function(){return a(this,dt)?this.rotation:0},tA=function(){if(a(this,dt))return null;const[t,s]=this.pageDimensions,[i,r]=this.pageTranslation,o=a(this,mi),l=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const p=u*t+i,g=(1-h)*s+r;l[c]=l[c+4]=p,l[c+1]=l[c+3]=g,l[c+2]=l[c+6]=p+d*t,l[c+5]=l[c+7]=g-f*s,c+=8}return l},nA=function(t){return a(this,Rn).serialize(t,A(this,Y,Mc).call(this))},sA=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},iA=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},rA=function(t){const{color:s}=this._initialData;return t.color.some((i,r)=>i!==s[r])},x(ue,Hn),G(ue,"_defaultColor",null),G(ue,"_defaultOpacity",1),G(ue,"_defaultThickness",12),G(ue,"_type","highlight"),G(ue,"_editorType",K.HIGHLIGHT),G(ue,"_freeHighlightId",-1),G(ue,"_freeHighlight",null),G(ue,"_freeHighlightClipId","");let Rf=ue;var Bo;class tk{constructor(){x(this,Bo,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))this.updateProperty(t,s)}updateSVGProperty(e,t){a(this,Bo)[e]=t}toSVGProperties(){const e=a(this,Bo);return m(this,Bo,Object.create(null)),{root:e}}reset(){m(this,Bo,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){ve("Not implemented")}}Bo=new WeakMap;var mn,Ol,rt,$o,Wo,cr,ur,hr,Uo,le,Zg,Jg,e0,Rc,oA,Yd,Lc,xa;const H=class H extends Le{constructor(t){super(t);x(this,le);x(this,mn,null);x(this,Ol);G(this,"_drawId",null);m(this,Ol,t.mustBeCommitted||!1),t.drawOutlines&&(A(this,le,Zg).call(this,t),A(this,le,Rc).call(this))}static _mergeSVGProperties(t,s){const i=new Set(Object.keys(t));for(const[r,o]of Object.entries(s))i.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){ve("Not implemented")}static get typesMap(){ve("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(a(H,rt).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,s[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,s[r]]);return t}_updateProperty(t,s,i){const r=this._drawingOptions,o=r[s],l=c=>{var h;r.updateProperty(s,c);const u=a(this,mn).updateProperty(s,c);u&&A(this,le,Lc).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:l.bind(this,i),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,H._mergeSVGProperties(a(this,mn).getPathResizingSVGProperties(A(this,le,Yd).call(this)),{bbox:A(this,le,xa).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,H._mergeSVGProperties(a(this,mn).getPathResizedSVGProperties(A(this,le,Yd).call(this)),{bbox:A(this,le,xa).call(this)}))}_onTranslating(t,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:A(this,le,xa).call(this,t,s)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,H._mergeSVGProperties(a(this,mn).getPathTranslatedSVGProperties(A(this,le,Yd).call(this),this.parentDimensions),{bbox:A(this,le,xa).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,Ol)&&(m(this,Ol,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){A(this,le,e0).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,le,Rc).call(this),A(this,le,Lc).call(this,a(this,mn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),A(this,le,e0).call(this)):t&&(this._uiManager.addShouldRescale(this),A(this,le,Rc).call(this,t),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,H._mergeSVGProperties({bbox:A(this,le,xa).call(this)},a(this,mn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&A(this,le,Lc).call(this,a(this,mn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const s=document.createElement("div");t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,s,i,r,o){ve("Not implemented")}static startDrawing(t,s,i,r){var E;const{target:o,offsetX:l,offsetY:c,pointerId:u,pointerType:h}=r;if(a(H,ur)&&a(H,ur)!==h)return;const{viewport:{rotation:d}}=t,{width:f,height:p}=o.getBoundingClientRect(),g=m(H,$o,new AbortController),b=t.combinedSignal(g);if(a(H,cr)||m(H,cr,u),a(H,ur)??m(H,ur,h),window.addEventListener("pointerup",y=>{var v;a(H,cr)===y.pointerId?this._endDraw(y):(v=a(H,hr))==null||v.delete(y.pointerId)},{signal:b}),window.addEventListener("pointercancel",y=>{var v;a(H,cr)===y.pointerId?this._currentParent.endDrawingSession():(v=a(H,hr))==null||v.delete(y.pointerId)},{signal:b}),window.addEventListener("pointerdown",y=>{a(H,ur)===y.pointerType&&((a(H,hr)||m(H,hr,new Set)).add(y.pointerId),a(H,rt).isCancellable()&&(a(H,rt).removeLastElement(),a(H,rt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",fs,{signal:b}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:b}),o.addEventListener("touchmove",y=>{y.timeStamp===a(H,Uo)&&bn(y)},{signal:b}),t.toggleDrawing(),(E=s._editorUndoBar)==null||E.hide(),a(H,rt)){t.drawLayer.updateProperties(this._currentDrawId,a(H,rt).startNew(l,c,f,p,d));return}s.updateUIForDefaultProperties(this),m(H,rt,this.createDrawerInstance(l,c,f,p,d)),m(H,Wo,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(a(H,Wo).toSVGProperties(),a(H,rt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(m(H,Uo,-1),!a(H,rt))return;const{offsetX:s,offsetY:i,pointerId:r}=t;if(a(H,cr)===r){if(((o=a(H,hr))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(H,rt).add(s,i)),m(H,Uo,t.timeStamp),bn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,m(H,rt,null),m(H,Wo,null),m(H,ur,null),m(H,Uo,NaN)),a(H,$o)&&(a(H,$o).abort(),m(H,$o,null),m(H,cr,NaN),m(H,hr,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),t&&s.drawLayer.updateProperties(this._currentDrawId,a(H,rt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=a(H,rt),r=this._currentDrawId,o=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:ie.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(ie.DRAW_STEP),!a(H,rt).isEmpty()){const{pageDimensions:[i,r],scale:o}=s,l=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(H,rt).getOutlines(i*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(H,Wo),mustBeCommitted:!t});return this._cleanup(!0),l}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,i,r,o,l){ve("Not implemented")}static async deserialize(t,s,i){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=s.viewport,u=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,t),h=await super.deserialize(t,s,i);return h.createDrawingOptions(t),A(d=h,le,Zg).call(d,{drawOutlines:u}),A(f=h,le,Rc).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[s,i]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,mn).serialize([s,i,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};mn=new WeakMap,Ol=new WeakMap,rt=new WeakMap,$o=new WeakMap,Wo=new WeakMap,cr=new WeakMap,ur=new WeakMap,hr=new WeakMap,Uo=new WeakMap,le=new WeakSet,Zg=function({drawOutlines:t,drawId:s,drawingOptions:i}){m(this,mn,t),this._drawingOptions||(this._drawingOptions=i),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=A(this,le,Jg).call(this,t,this.parent),A(this,le,Lc).call(this,t.box)},Jg=function(t,s){const{id:i}=s.drawLayer.draw(H._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},e0=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Rc=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=A(this,le,Jg).call(this,a(this,mn),t)}},oA=function([t,s,i,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[s,1-t,i*(l/o),r*(o/l)];case 180:return[1-t,1-s,i,r];case 270:return[1-s,t,i*(l/o),r*(o/l)];default:return[t,s,i,r]}},Yd=function(){const{x:t,y:s,width:i,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-s,t,i*(o/l),r*(l/o)];case 180:return[1-t,1-s,i,r];case 270:return[s,1-t,i*(o/l),r*(l/o)];default:return[t,s,i,r]}},Lc=function(t){if([this.x,this.y,this.width,this.height]=A(this,le,oA).call(this,t),this.div){this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)}this._onResized()},xa=function(){const{x:t,y:s,width:i,height:r,rotation:o,parentRotation:l,parentDimensions:[c,u]}=this;switch((o*4+l)/90){case 1:return[1-s-r,t,r,i];case 2:return[1-t-i,1-s-r,i,r];case 3:return[s,1-t-i,r,i];case 4:return[t,s-i*(c/u),r*(u/c),i*(c/u)];case 5:return[1-s,t,i*(c/u),r*(u/c)];case 6:return[1-t-r*(u/c),1-s,r*(u/c),i*(c/u)];case 7:return[s-i*(c/u),1-t-r*(u/c),i*(c/u),r*(u/c)];case 8:return[t-i,s-r,i,r];case 9:return[1-s,t-i,r,i];case 10:return[1-t,1-s,i,r];case 11:return[s-r,1-t,r,i];case 12:return[t-r*(u/c),s,r*(u/c),i*(c/u)];case 13:return[1-s-i*(c/u),t-r*(u/c),i*(c/u),r*(u/c)];case 14:return[1-t,1-s-i*(c/u),r*(u/c),i*(c/u)];case 15:return[s,1-t,i*(c/u),r*(u/c)];default:return[t,s,i,r]}},G(H,"_currentDrawId",-1),G(H,"_currentParent",null),x(H,rt,null),x(H,$o,null),x(H,Wo,null),x(H,cr,NaN),x(H,ur,null),x(H,hr,null),x(H,Uo,NaN),G(H,"_INNER_MARGIN",3);let Qg=H;var Ms,ot,at,Go,jl,Ft,ft,In,Vo,qo,Xo,Hl,Kd;class nk{constructor(e,t,s,i,r,o){x(this,Hl);x(this,Ms,new Float64Array(6));x(this,ot);x(this,at);x(this,Go);x(this,jl);x(this,Ft);x(this,ft,"");x(this,In,0);x(this,Vo,new Lf);x(this,qo);x(this,Xo);m(this,qo,s),m(this,Xo,i),m(this,Go,r),m(this,jl,o),[e,t]=A(this,Hl,Kd).call(this,e,t);const l=m(this,ot,[NaN,NaN,NaN,NaN,e,t]);m(this,Ft,[e,t]),m(this,at,[{line:l,points:a(this,Ft)}]),a(this,Ms).set(l,0)}updateProperty(e,t){e==="stroke-width"&&m(this,jl,t)}isEmpty(){return!a(this,at)||a(this,at).length===0}isCancellable(){return a(this,Ft).length<=10}add(e,t){[e,t]=A(this,Hl,Kd).call(this,e,t);const[s,i,r,o]=a(this,Ms).subarray(2,6),l=e-r,c=t-o;return Math.hypot(a(this,qo)*l,a(this,Xo)*c)<=2?null:(a(this,Ft).push(e,t),isNaN(s)?(a(this,Ms).set([r,o,e,t],2),a(this,ot).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(a(this,Ms)[0])&&a(this,ot).splice(6,6),a(this,Ms).set([s,i,r,o,e,t],0),a(this,ot).push(...O.createBezierPoints(s,i,r,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(a(this,Ft).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,r){m(this,qo,s),m(this,Xo,i),m(this,Go,r),[e,t]=A(this,Hl,Kd).call(this,e,t);const o=m(this,ot,[NaN,NaN,NaN,NaN,e,t]);m(this,Ft,[e,t]);const l=a(this,at).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,at).push({line:o,points:a(this,Ft)}),a(this,Ms).set(o,0),m(this,In,0),this.toSVGPath(),null}getLastElement(){return a(this,at).at(-1)}setLastElement(e){return a(this,at)?(a(this,at).push(e),m(this,ot,e.line),m(this,Ft,e.points),m(this,In,0),{path:{d:this.toSVGPath()}}):a(this,Vo).setLastElement(e)}removeLastElement(){if(!a(this,at))return a(this,Vo).removeLastElement();a(this,at).pop(),m(this,ft,"");for(let e=0,t=a(this,at).length;e<t;e++){const{line:s,points:i}=a(this,at)[e];m(this,ot,s),m(this,Ft,i),m(this,In,0),this.toSVGPath()}return{path:{d:a(this,ft)}}}toSVGPath(){const e=O.svgRound(a(this,ot)[4]),t=O.svgRound(a(this,ot)[5]);if(a(this,Ft).length===2)return m(this,ft,`${a(this,ft)} M ${e} ${t} Z`),a(this,ft);if(a(this,Ft).length<=6){const i=a(this,ft).lastIndexOf("M");m(this,ft,`${a(this,ft).slice(0,i)} M ${e} ${t}`),m(this,In,6)}if(a(this,Ft).length===4){const i=O.svgRound(a(this,ot)[10]),r=O.svgRound(a(this,ot)[11]);return m(this,ft,`${a(this,ft)} L ${i} ${r}`),m(this,In,12),a(this,ft)}const s=[];a(this,In)===0&&(s.push(`M ${e} ${t}`),m(this,In,6));for(let i=a(this,In),r=a(this,ot).length;i<r;i+=6){const[o,l,c,u,h,d]=a(this,ot).slice(i,i+6).map(O.svgRound);s.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}return m(this,ft,a(this,ft)+s.join(" ")),m(this,In,a(this,ot).length),a(this,ft)}getOutlines(e,t,s,i){const r=a(this,at).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,Vo).build(a(this,at),e,t,s,a(this,Go),a(this,jl),i),m(this,Ms,null),m(this,ot,null),m(this,at,null),m(this,ft,null),a(this,Vo)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ms=new WeakMap,ot=new WeakMap,at=new WeakMap,Go=new WeakMap,jl=new WeakMap,Ft=new WeakMap,ft=new WeakMap,In=new WeakMap,Vo=new WeakMap,qo=new WeakMap,Xo=new WeakMap,Hl=new WeakSet,Kd=function(e,t){return O._normalizePoint(e,t,a(this,qo),a(this,Xo),a(this,Go))};var Ot,Dh,Fh,gn,Rs,Ls,zl,Bl,$l,gt,Gs,aA,lA,cA;const by=class by extends O{constructor(){super(...arguments);x(this,gt);x(this,Ot);x(this,Dh,0);x(this,Fh);x(this,gn);x(this,Rs);x(this,Ls);x(this,zl);x(this,Bl);x(this,$l)}build(t,s,i,r,o,l,c){m(this,Rs,s),m(this,Ls,i),m(this,zl,r),m(this,Bl,o),m(this,$l,l),m(this,Fh,c??0),m(this,gn,t),A(this,gt,lA).call(this)}setLastElement(t){return a(this,gn).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,gn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of a(this,gn)){if(t.push(`M${O.svgRound(s[4])} ${O.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12){t.push(`L${O.svgRound(s[10])} ${O.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[o,l,c,u,h,d]=s.subarray(i,i+6).map(O.svgRound);t.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}}return t.join("")}serialize([t,s,i,r],o){const l=[],c=[],[u,h,d,f]=A(this,gt,aA).call(this);let p,g,b,E,y,v,S,_,C;switch(a(this,Bl)){case 0:C=O._rescale,p=t,g=s+r,b=i,E=-r,y=t+u*i,v=s+(1-h-f)*r,S=t+(u+d)*i,_=s+(1-h)*r;break;case 90:C=O._rescaleAndSwap,p=t,g=s,b=i,E=r,y=t+h*i,v=s+u*r,S=t+(h+f)*i,_=s+(u+d)*r;break;case 180:C=O._rescale,p=t+i,g=s,b=-i,E=r,y=t+(1-u-d)*i,v=s+h*r,S=t+(1-u)*i,_=s+(h+f)*r;break;case 270:C=O._rescaleAndSwap,p=t+i,g=s+r,b=-i,E=-r,y=t+(1-h-f)*i,v=s+(1-u-d)*r,S=t+(1-h)*i,_=s+(1-u)*r;break}for(const{line:T,points:k}of a(this,gn))l.push(C(T,p,g,b,E,o?new Array(T.length):null)),c.push(C(k,p,g,b,E,o?new Array(k.length):null));return{lines:l,points:c,rect:[y,v,S,_]}}static deserialize(t,s,i,r,o,{paths:{lines:l,points:c},rotation:u,thickness:h}){const d=[];let f,p,g,b,E;switch(u){case 0:E=O._rescale,f=-t/i,p=s/r+1,g=1/i,b=-1/r;break;case 90:E=O._rescaleAndSwap,f=-s/r,p=-t/i,g=1/r,b=1/i;break;case 180:E=O._rescale,f=t/i+1,p=-s/r,g=-1/i,b=1/r;break;case 270:E=O._rescaleAndSwap,f=s/r+1,p=t/i+1,g=-1/r,b=-1/i;break}if(!l){l=[];for(const v of c){const S=v.length;if(S===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1]]));continue}if(S===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1],NaN,NaN,NaN,NaN,v[2],v[3]]));continue}const _=new Float32Array(3*(S-2));l.push(_);let[C,T,k,N]=v.subarray(0,4);_.set([NaN,NaN,NaN,NaN,C,T],0);for(let P=4;P<S;P+=2){const L=v[P],z=v[P+1];_.set(O.createBezierPoints(C,T,k,N,L,z),(P-2)*3),[C,T,k,N]=[k,N,L,z]}}}for(let v=0,S=l.length;v<S;v++)d.push({line:E(l[v].map(_=>_??NaN),f,p,g,b),points:E(c[v].map(_=>_??NaN),f,p,g,b)});const y=new by;return y.build(d,i,r,1,u,h,o),y}get box(){return a(this,Ot)}updateProperty(t,s){return t==="stroke-width"?A(this,gt,cA).call(this,s):null}updateParentDimensions([t,s],i){const[r,o]=A(this,gt,Gs).call(this);m(this,Rs,t),m(this,Ls,s),m(this,zl,i);const[l,c]=A(this,gt,Gs).call(this),u=l-r,h=c-o,d=a(this,Ot);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(t){return m(this,Dh,t),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,Ot).map(O.svgRound).join(" ")}get defaultProperties(){const[t,s]=a(this,Ot);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${O.svgRound(t)} ${O.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=a(this,Ot);let i=0,r=0,o=0,l=0,c=0,u=0;switch(a(this,Dh)){case 90:r=s/t,o=-t/s,c=t;break;case 180:i=-1,l=-1,c=t,u=s;break;case 270:r=-s/t,o=t/s,u=s;break;default:return""}return`matrix(${i} ${r} ${o} ${l} ${O.svgRound(c)} ${O.svgRound(u)})`}getPathResizingSVGProperties([t,s,i,r]){const[o,l]=A(this,gt,Gs).call(this),[c,u,h,d]=a(this,Ot);if(Math.abs(h-o)<=O.PRECISION||Math.abs(d-l)<=O.PRECISION){const E=t+i/2-(c+h/2),y=s+r/2-(u+d/2);return{path:{"transform-origin":`${O.svgRound(t)} ${O.svgRound(s)}`,transform:`${this.rotationTransform} translate(${E} ${y})`}}}const f=(i-2*o)/(h-2*o),p=(r-2*l)/(d-2*l),g=h/i,b=d/r;return{path:{"transform-origin":`${O.svgRound(c)} ${O.svgRound(u)}`,transform:`${this.rotationTransform} scale(${g} ${b}) translate(${O.svgRound(o)} ${O.svgRound(l)}) scale(${f} ${p}) translate(${O.svgRound(-o)} ${O.svgRound(-l)})`}}}getPathResizedSVGProperties([t,s,i,r]){const[o,l]=A(this,gt,Gs).call(this),c=a(this,Ot),[u,h,d,f]=c;if(c[0]=t,c[1]=s,c[2]=i,c[3]=r,Math.abs(d-o)<=O.PRECISION||Math.abs(f-l)<=O.PRECISION){const y=t+i/2-(u+d/2),v=s+r/2-(h+f/2);for(const{line:S,points:_}of a(this,gn))O._translate(S,y,v,S),O._translate(_,y,v,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${O.svgRound(t)} ${O.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(i-2*o)/(d-2*o),g=(r-2*l)/(f-2*l),b=-p*(u+o)+t+o,E=-g*(h+l)+s+l;if(p!==1||g!==1||b!==0||E!==0)for(const{line:y,points:v}of a(this,gn))O._rescale(y,b,E,p,g,y),O._rescale(v,b,E,p,g,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${O.svgRound(t)} ${O.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],i){const[r,o]=i,l=a(this,Ot),c=t-l[0],u=s-l[1];if(a(this,Rs)===r&&a(this,Ls)===o)for(const{line:h,points:d}of a(this,gn))O._translate(h,c,u,h),O._translate(d,c,u,d);else{const h=a(this,Rs)/r,d=a(this,Ls)/o;m(this,Rs,r),m(this,Ls,o);for(const{line:f,points:p}of a(this,gn))O._rescale(f,c,u,h,d,f),O._rescale(p,c,u,h,d,p);l[2]*=h,l[3]*=d}return l[0]=t,l[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${O.svgRound(t)} ${O.svgRound(s)}`}}}get defaultSVGProperties(){const t=a(this,Ot);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${O.svgRound(t[0])} ${O.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};Ot=new WeakMap,Dh=new WeakMap,Fh=new WeakMap,gn=new WeakMap,Rs=new WeakMap,Ls=new WeakMap,zl=new WeakMap,Bl=new WeakMap,$l=new WeakMap,gt=new WeakSet,Gs=function(t=a(this,$l)){const s=a(this,Fh)+t/2*a(this,zl);return a(this,Bl)%180===0?[s/a(this,Rs),s/a(this,Ls)]:[s/a(this,Ls),s/a(this,Rs)]},aA=function(){const[t,s,i,r]=a(this,Ot),[o,l]=A(this,gt,Gs).call(this,0);return[t+o,s+l,i-2*o,r-2*l]},lA=function(){const t=m(this,Ot,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,gn)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6){const[h,d]=r.subarray(c,c+2);t[0]=Math.min(t[0],h),t[1]=Math.min(t[1],d),t[2]=Math.max(t[2],h),t[3]=Math.max(t[3],d)}continue}let o=r[4],l=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,f,p,g,b]=r.subarray(c,c+6);$.bezierBoundingBox(o,l,h,d,f,p,g,b,t),o=g,l=b}}const[s,i]=A(this,gt,Gs).call(this);t[0]=Math.min(1,Math.max(0,t[0]-s)),t[1]=Math.min(1,Math.max(0,t[1]-i)),t[2]=Math.min(1,Math.max(0,t[2]+s)),t[3]=Math.min(1,Math.max(0,t[3]+i)),t[2]-=t[0],t[3]-=t[1]},cA=function(t){const[s,i]=A(this,gt,Gs).call(this);m(this,$l,t);const[r,o]=A(this,gt,Gs).call(this),[l,c]=[r-s,o-i],u=a(this,Ot);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u};let Lf=by;var Wl;const Ay=class Ay extends tk{constructor(t){super();x(this,Wl);m(this,Wl,t),super.updateProperties({fill:"none",stroke:Le._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,s){t==="stroke-width"&&(s??(s=this["stroke-width"]),s*=a(this,Wl).realScale),super.updateSVGProperty(t,s)}clone(){const t=new Ay(a(this,Wl));return t.updateAll(this),t}};Wl=new WeakMap;let t0=Ay;var Qf,uA;const Ia=class Ia extends Qg{constructor(t){super({...t,name:"inkEditor"});x(this,Qf);this._willKeepAspectRatio=!0}static initialize(t,s){Le.initialize(t,s),this._defaultDrawingOptions=new t0(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return ee(this,"typesMap",new Map([[ie.INK_THICKNESS,"stroke-width"],[ie.INK_COLOR,"stroke"],[ie.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,i,r,o){return new nk(t,s,i,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,i,r,o,l){return Lf.deserialize(t,s,i,r,o,l)}static async deserialize(t,s,i){let r=null;if(t instanceof gy){const{data:{inkLists:l,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:g},parent:{page:{pageNumber:b}}}=t;r=t={annotationType:K.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:l},boxes:null,pageIndex:b-1,rect:c.slice(0),rotation:u,id:h,deleted:!1,popupRef:g}}const o=await super.deserialize(t,s,i);return o.annotationElementId=t.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:i}){this._drawingOptions=Ia.getDefaultDrawingOptions({stroke:$.makeHexColor(...t),"stroke-width":s,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i,rect:r}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":c}}=this,u={annotationType:K.INK,color:Le._colorManager.convert(o),opacity:l,thickness:c,paths:{lines:s,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?u:this.annotationElementId&&!A(this,Qf,uA).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){const{points:s,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s}),null}};Qf=new WeakSet,uA=function(t){const{color:s,thickness:i,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==s[c])||t.thickness!==i||t.opacity!==r||t.pageIndex!==o},G(Ia,"_type","ink"),G(Ia,"_editorType",K.INK),G(Ia,"_defaultDrawingOptions",null);let n0=Ia;var Me,pt,dr,yi,fr,Ul,Is,Ds,yn,Gl,ce,Ic,Dc,Qd,i0,Zd,r0,Jd,hA;const Vc=class Vc extends Le{constructor(t){super({...t,name:"stampEditor"});x(this,ce);x(this,Me,null);x(this,pt,null);x(this,dr,null);x(this,yi,null);x(this,fr,null);x(this,Ul,"");x(this,Is,null);x(this,Ds,null);x(this,yn,!1);x(this,Gl,!1);m(this,yi,t.bitmapUrl),m(this,fr,t.bitmapFile)}static initialize(t,s){Le.initialize(t,s)}static get supportedTypes(){return ee(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return ee(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,s){s.pasteEditor(K.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;a(this,pt)&&(m(this,Me,null),this._uiManager.imageManager.deleteId(a(this,pt)),(t=a(this,Is))==null||t.remove(),m(this,Is,null),a(this,Ds)&&(clearTimeout(a(this,Ds)),m(this,Ds,null))),super.remove()}rebuild(){if(!this.parent){a(this,pt)&&A(this,ce,Qd).call(this);return}super.rebuild(),this.div!==null&&(a(this,pt)&&a(this,Is)===null&&A(this,ce,Qd).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(a(this,dr)||a(this,Me)||a(this,yi)||a(this,fr)||a(this,pt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;if(this.width&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),a(this,Me)?A(this,ce,i0).call(this):A(this,ce,Qd).call(this),this.width&&!this.annotationElementId){const[i,r]=this.parentDimensions;this.setAt(t*i,s*r,this.width*i,this.height*r)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,Ds)!==null&&clearTimeout(a(this,Ds)),m(this,Ds,setTimeout(()=>{m(this,Ds,null),A(this,ce,r0).call(this)},200))}copyCanvas(t,s,i=!1){var p;t||(t=224);const{width:r,height:o}=a(this,Me),l=new tg;let c=a(this,Me),u=r,h=o,d=null;if(s){if(r>s||o>s){const N=Math.min(s/r,s/o);u=Math.floor(r*N),h=Math.floor(o*N)}d=document.createElement("canvas");const g=d.width=Math.ceil(u*l.sx),b=d.height=Math.ceil(h*l.sy);a(this,yn)||(c=A(this,ce,Zd).call(this,g,b));const E=d.getContext("2d");E.filter=this._uiManager.hcmFilter;let y="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",v="#42414d");const S=15,_=S*l.sx,C=S*l.sy,T=new OffscreenCanvas(_*2,C*2),k=T.getContext("2d");k.fillStyle=y,k.fillRect(0,0,_*2,C*2),k.fillStyle=v,k.fillRect(0,0,_,C),k.fillRect(_,C,_,C),E.fillStyle=E.createPattern(T,"repeat"),E.fillRect(0,0,g,b),E.drawImage(c,0,0,c.width,c.height,0,0,g,b)}let f=null;if(i){let g,b;if(l.symmetric&&c.width<t&&c.height<t)g=c.width,b=c.height;else if(c=a(this,Me),r>t||o>t){const v=Math.min(t/r,t/o);g=Math.floor(r*v),b=Math.floor(o*v),a(this,yn)||(c=A(this,ce,Zd).call(this,g,b))}const y=new OffscreenCanvas(g,b).getContext("2d",{willReadFrequently:!0});y.drawImage(c,0,0,c.width,c.height,0,0,g,b),f={width:g,height:b,data:y.getImageData(0,0,g,b).data}}return{canvas:d,width:u,height:h,imageData:f}}getImageForAltText(){return a(this,Is)}static async deserialize(t,s,i){var b;let r=null;if(t instanceof Rb){const{data:{rect:E,rotation:y,id:v,structParent:S,popupRef:_},container:C,parent:{page:{pageNumber:T}}}=t,k=C.querySelector("canvas"),N=i.imageManager.getFromCanvas(C.id,k);k.remove();const P=((b=await s._structTree.getAriaAttributes(`${ly}${v}`))==null?void 0:b.get("aria-label"))||"";r=t={annotationType:K.STAMP,bitmapId:N.id,bitmap:N.bitmap,pageIndex:T-1,rect:E.slice(0),rotation:y,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:P},isSvg:!1,structParent:S,popupRef:_}}const o=await super.deserialize(t,s,i),{rect:l,bitmap:c,bitmapUrl:u,bitmapId:h,isSvg:d,accessibilityData:f}=t;h&&i.imageManager.isValidId(h)?(m(o,pt,h),c&&m(o,Me,c)):m(o,yi,u),m(o,yn,d);const[p,g]=o.pageDimensions;return o.width=(l[2]-l[0])/p,o.height=(l[3]-l[1])/g,o.annotationElementId=t.id||null,f&&(o.altTextData=f),o._initialData=r,m(o,Gl,!!r),o}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:K.STAMP,bitmapId:a(this,pt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,yn),structTreeParentId:this._structTreeParentId};if(t)return i.bitmapUrl=A(this,ce,Jd).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=A(this,ce,hA).call(this,i);if(c.isSame)return null;c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const l=a(this,yn)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(a(this,pt)))s.stamps.set(a(this,pt),{area:l,serialized:i}),i.bitmap=A(this,ce,Jd).call(this,!1);else if(a(this,yn)){const c=s.stamps.get(a(this,pt));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=A(this,ce,Jd).call(this,!1))}return i}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Me=new WeakMap,pt=new WeakMap,dr=new WeakMap,yi=new WeakMap,fr=new WeakMap,Ul=new WeakMap,Is=new WeakMap,Ds=new WeakMap,yn=new WeakMap,Gl=new WeakMap,ce=new WeakSet,Ic=function(t,s=!1){if(!t){this.remove();return}m(this,Me,t.bitmap),s||(m(this,pt,t.id),m(this,yn,t.isSvg)),t.file&&m(this,Ul,t.file.name),A(this,ce,i0).call(this)},Dc=function(){if(m(this,dr,null),this._uiManager.enableWaiting(!1),!!a(this,Is)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Me)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Me)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Qd=function(){if(a(this,pt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,pt)).then(i=>A(this,ce,Ic).call(this,i,!0)).finally(()=>A(this,ce,Dc).call(this));return}if(a(this,yi)){const i=a(this,yi);m(this,yi,null),this._uiManager.enableWaiting(!0),m(this,dr,this._uiManager.imageManager.getFromUrl(i).then(r=>A(this,ce,Ic).call(this,r)).finally(()=>A(this,ce,Dc).call(this)));return}if(a(this,fr)){const i=a(this,fr);m(this,fr,null),this._uiManager.enableWaiting(!0),m(this,dr,this._uiManager.imageManager.getFromFile(i).then(r=>A(this,ce,Ic).call(this,r)).finally(()=>A(this,ce,Dc).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Vc.supportedTypesStr;const s=this._uiManager._signal;m(this,dr,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),A(this,ce,Ic).call(this,r)}i()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>A(this,ce,Dc).call(this))),t.click()},i0=function(){var d;const{div:t}=this;let{width:s,height:i}=a(this,Me);const[r,o]=this.pageDimensions,l=.75;if(this.width)s=this.width*r,i=this.height*o;else if(s>l*r||i>l*o){const f=Math.min(l*r/s,l*o/i);s*=f,i*=f}const[c,u]=this.parentDimensions;this.setDims(s*c/r,i*u/o),this._uiManager.enableWaiting(!1);const h=m(this,Is,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=s/r,this.height=i/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),A(this,ce,r0).call(this),a(this,Gl)||(this.parent.addUndoableEditor(this),m(this,Gl,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,Ul)&&h.setAttribute("aria-label",a(this,Ul))},Zd=function(t,s){const{width:i,height:r}=a(this,Me);let o=i,l=r,c=a(this,Me);for(;o>2*t||l>2*s;){const u=o,h=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*s&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(o,l);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,l),c=d.transferToImageBitmap()}return c},r0=function(){const[t,s]=this.parentDimensions,{width:i,height:r}=this,o=new tg,l=Math.ceil(i*t*o.sx),c=Math.ceil(r*s*o.sy),u=a(this,Is);if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const h=a(this,yn)?a(this,Me):A(this,ce,Zd).call(this,l,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,l,c)},Jd=function(t){if(t){if(a(this,yn)){const r=this._uiManager.imageManager.getSvgUrl(a(this,pt));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=a(this,Me),s.getContext("2d").drawImage(a(this,Me),0,0),s.toDataURL()}if(a(this,yn)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*Mr.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Mr.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,Me),0,0,a(this,Me).width,a(this,Me).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,Me))},hA=function(t){var l;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===s,o=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},G(Vc,"_type","stamp"),G(Vc,"_editorType",K.STAMP);let s0=Vc;var Yo,Vl,Fs,pr,vi,Dn,mr,ql,Ko,rs,wi,kt,xi,B,gr,Te,dA,vs,a0,l0,ef;const Vn=class Vn{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:h}){x(this,Te);x(this,Yo);x(this,Vl,!1);x(this,Fs,null);x(this,pr,null);x(this,vi,null);x(this,Dn,new Map);x(this,mr,!1);x(this,ql,!1);x(this,Ko,!1);x(this,rs,null);x(this,wi,null);x(this,kt,null);x(this,xi,null);x(this,B);const d=[...a(Vn,gr).values()];if(!Vn._initialized){Vn._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),m(this,B,e),this.pageIndex=t,this.div=s,m(this,Yo,r),m(this,Fs,o),this.viewport=u,m(this,kt,c),this.drawLayer=l,this._structTree=i,a(this,B).addLayer(this)}get isEmpty(){return a(this,Dn).size===0}get isInvisible(){return this.isEmpty&&a(this,B).getMode()===K.NONE}updateToolbar(e){a(this,B).updateToolbar(e)}updateMode(e=a(this,B).getMode()){switch(A(this,Te,ef).call(this),e){case K.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case K.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case K.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of a(Vn,gr).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=a(this,kt))==null?void 0:t.div)}setEditingState(e){a(this,B).setEditingState(e)}addCommands(e){a(this,B).addCommands(e)}cleanUndoStack(e){a(this,B).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=a(this,Fs))==null||t.div.classList.toggle("disabled",!e)}async enable(){m(this,Ko,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const s of a(this,Dn).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(a(this,B).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!a(this,Fs)){m(this,Ko,!1);return}const t=a(this,Fs).getEditableAnnotations();for(const s of t){if(s.hide(),a(this,B).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}m(this,Ko,!1)}disable(){var i;m(this,ql,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of a(this,Dn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(a(this,Fs)){const r=a(this,Fs).getEditableAnnotations();for(const o of r){const{id:l}=o.data;if(a(this,B).isDeletedAnnotationElement(l))continue;let c=t.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=e.get(l),c&&(a(this,B).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}A(this,Te,ef).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of a(Vn,gr).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),m(this,ql,!1)}getEditableAnnotation(e){var t;return((t=a(this,Fs))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){a(this,B).getActive()!==e&&a(this,B).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=a(this,kt))!=null&&e.div&&!a(this,xi)){m(this,xi,new AbortController);const t=a(this,B).combinedSignal(a(this,xi));a(this,kt).div.addEventListener("pointerdown",A(this,Te,dA).bind(this),{signal:t}),a(this,kt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=a(this,kt))!=null&&e.div&&a(this,xi)&&(a(this,xi).abort(),m(this,xi,null),a(this,kt).div.classList.remove("highlighting"))}enableClick(){if(a(this,pr))return;m(this,pr,new AbortController);const e=a(this,B).combinedSignal(a(this,pr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=a(this,pr))==null||e.abort(),m(this,pr,null)}attach(e){a(this,Dn).set(e.id,e);const{annotationElementId:t}=e;t&&a(this,B).isDeletedAnnotationElement(t)&&a(this,B).removeDeletedAnnotationElement(e)}detach(e){var t;a(this,Dn).delete(e.id),(t=a(this,Yo))==null||t.removePointerInTextLayer(e.contentDiv),!a(this,ql)&&e.annotationElementId&&a(this,B).addDeletedAnnotationElement(e)}remove(e){this.detach(e),a(this,B).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(a(this,B).addDeletedAnnotationElement(e.annotationElementId),Le.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),a(this,B).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!a(this,Ko)),a(this,B).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!a(this,vi)&&(e._focusEventsAllowed=!1,m(this,vi,setTimeout(()=>{m(this,vi,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:a(this,B)._signal}),t.focus())},0))),e._structTreeParentId=(s=a(this,Yo))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return a(this,B).getId()}combinedSignal(e){return a(this,B).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=a(this,Te,vs))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){a(this,B).updateToolbar(e),a(this,B).updateMode(e);const{offsetX:s,offsetY:i}=A(this,Te,l0).call(this),r=this.getNextId(),o=A(this,Te,a0).call(this,{parent:this,id:r,x:s,y:i,uiManager:a(this,B),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=a(Vn,gr).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,a(this,B)))||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),r=A(this,Te,a0).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:a(this,B),isCentered:t,...s});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(A(this,Te,l0).call(this),!0)}setSelected(e){a(this,B).setSelected(e)}toggleSelected(e){a(this,B).toggleSelected(e)}unselect(e){a(this,B).unselect(e)}pointerup(e){var s;const{isMac:t}=Bt.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&a(this,mr)&&(m(this,mr,!1),!((s=a(this,Te,vs))!=null&&s.isDrawer&&a(this,Te,vs).supportMultipleDrawings))){if(!a(this,Vl)){m(this,Vl,!0);return}if(a(this,B).getMode()===K.STAMP){a(this,B).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var i;if(a(this,B).getMode()===K.HIGHLIGHT&&this.enableTextSelection(),a(this,mr)){m(this,mr,!1);return}const{isMac:t}=Bt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(m(this,mr,!0),(i=a(this,Te,vs))!=null&&i.isDrawer){this.startDrawingSession(e);return}const s=a(this,B).getActive();m(this,Vl,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus(),a(this,rs)){a(this,Te,vs).startDrawing(this,a(this,B),!1,e);return}a(this,B).setCurrentDrawingSession(this),m(this,rs,new AbortController);const t=a(this,B).combinedSignal(a(this,rs));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(m(this,wi,null),this.commitOrRemove())},{signal:t}),a(this,Te,vs).startDrawing(this,a(this,B),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&m(this,wi,t);return}a(this,wi)&&setTimeout(()=>{var t;(t=a(this,wi))==null||t.focus(),m(this,wi,null)},0)}endDrawingSession(e=!1){return a(this,rs)?(a(this,B).setCurrentDrawingSession(null),a(this,rs).abort(),m(this,rs,null),m(this,wi,null),a(this,Te,vs).endDrawing(e)):null}findNewParent(e,t,s){const i=a(this,B).findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return a(this,rs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,rs)&&a(this,Te,vs).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=a(this,B).getActive())==null?void 0:e.parent)===this&&(a(this,B).commitOrRemove(),a(this,B).setActiveEditor(null)),a(this,vi)&&(clearTimeout(a(this,vi)),m(this,vi,null));for(const s of a(this,Dn).values())(t=a(this,Yo))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,a(this,Dn).clear(),a(this,B).removeLayer(this)}render({viewport:e}){this.viewport=e,ra(this.div,e);for(const t of a(this,B).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){a(this,B).commitOrRemove(),A(this,Te,ef).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,ra(this.div,{rotation:s}),t!==s)for(const i of a(this,Dn).values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return a(this,B).viewParameters.realScale}};Yo=new WeakMap,Vl=new WeakMap,Fs=new WeakMap,pr=new WeakMap,vi=new WeakMap,Dn=new WeakMap,mr=new WeakMap,ql=new WeakMap,Ko=new WeakMap,rs=new WeakMap,wi=new WeakMap,kt=new WeakMap,xi=new WeakMap,B=new WeakMap,gr=new WeakMap,Te=new WeakSet,dA=function(e){a(this,B).unselectAll();const{target:t}=e;if(t===a(this,kt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&a(this,kt).div.contains(t)){const{isMac:s}=Bt.platform;if(e.button!==0||e.ctrlKey&&s)return;a(this,B).showAllEditors("highlight",!0,!0),a(this,kt).div.classList.add("free"),this.toggleDrawing(),Rf.startHighlighting(this,a(this,B).direction==="ltr",{target:a(this,kt).div,x:e.x,y:e.y}),a(this,kt).div.addEventListener("pointerup",()=>{a(this,kt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,B)._signal}),e.preventDefault()}},vs=function(){return a(Vn,gr).get(a(this,B).getMode())},a0=function(e){const t=a(this,Te,vs);return t?new t.prototype.constructor(e):null},l0=function(){const{x:e,y:t,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,e),o=Math.max(0,t),l=Math.min(window.innerWidth,e+s),c=Math.min(window.innerHeight,t+i),u=(r+l)/2-e,h=(o+c)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},ef=function(){for(const e of a(this,Dn).values())e.isEmpty()&&e.remove()},G(Vn,"_initialized",!1),x(Vn,gr,new Map([Bg,n0,s0,Rf].map(e=>[e._editorType,e])));let o0=Vn;var os,Oh,jt,Qo,Zf,fA,zs,u0,pA,h0;const St=class St{constructor({pageIndex:e}){x(this,zs);x(this,os,null);x(this,Oh,0);x(this,jt,new Map);x(this,Qo,new Map);this.pageIndex=e}setParent(e){if(!a(this,os)){m(this,os,e);return}if(a(this,os)!==e){if(a(this,jt).size>0)for(const t of a(this,jt).values())t.remove(),e.append(t);m(this,os,e)}}static get _svgFactory(){return ee(this,"_svgFactory",new my)}draw(e,t=!1,s=!1){const i=Rt(this,Oh)._++,r=A(this,zs,u0).call(this),o=St._svgFactory.createElement("defs");r.append(o);const l=St._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),t&&a(this,Qo).set(i,l);const u=s?A(this,zs,pA).call(this,o,c):null,h=St._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,e),a(this,jt).set(i,r),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,t){const s=Rt(this,Oh)._++,i=A(this,zs,u0).call(this),r=St._svgFactory.createElement("defs");i.append(r);const o=St._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const d=St._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${s}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=St._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=St._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${l}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=St._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return i.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,e),a(this,jt).set(s,i),s}finalizeDraw(e,t){a(this,Qo).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:s,bbox:i,rootClass:r,path:o}=t,l=typeof e=="number"?a(this,jt).get(e):e;if(l){if(s&&A(this,zs,h0).call(this,l,s),i&&A(c=St,Zf,fA).call(c,l,i),r){const{classList:u}=l;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(o){const h=l.firstChild.firstChild;A(this,zs,h0).call(this,h,o)}}}updateParent(e,t){if(t===this)return;const s=a(this,jt).get(e);s&&(a(t,os).append(s),a(this,jt).delete(e),a(t,jt).set(e,s))}remove(e){a(this,Qo).delete(e),a(this,os)!==null&&(a(this,jt).get(e).remove(),a(this,jt).delete(e))}destroy(){m(this,os,null);for(const e of a(this,jt).values())e.remove();a(this,jt).clear(),a(this,Qo).clear()}};os=new WeakMap,Oh=new WeakMap,jt=new WeakMap,Qo=new WeakMap,Zf=new WeakSet,fA=function(e,[t,s,i,r]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*r}%`},zs=new WeakSet,u0=function(){const e=St._svgFactory.create(1,1,!0);return a(this,os).append(e),e.setAttribute("aria-hidden",!0),e},pA=function(e,t){const s=St._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=St._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),i},h0=function(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)},x(St,Zf);let c0=St;globalThis.pdfjsTestingUtils={HighlightOutliner:Wg};X.AbortException;X.AnnotationEditorLayer;X.AnnotationEditorParamsType;X.AnnotationEditorType;X.AnnotationEditorUIManager;X.AnnotationLayer;X.AnnotationMode;X.ColorPicker;X.DOMSVGFactory;X.DrawLayer;X.FeatureTest;var sk=X.GlobalWorkerOptions;X.ImageKind;X.InvalidPDFException;X.MissingPDFException;X.OPS;X.OutputScale;X.PDFDataRangeTransport;X.PDFDateString;X.PDFWorker;X.PasswordResponses;X.PermissionFlag;X.PixelsPerInch;X.RenderingCancelledException;X.TextLayer;X.TouchManager;X.UnexpectedResponseException;X.Util;X.VerbosityLevel;X.XfaLayer;X.build;X.createValidAbsoluteUrl;X.fetchData;var ik=X.getDocument;X.getFilenameFromUrl;X.getPdfFilenameFromUrl;X.getXfaPageViewport;X.isDataScheme;X.isPdfFile;X.noContextMenu;X.normalizeUnicode;X.setLayerDimensions;X.shadow;X.stopEvent;X.version;sk.workerSrc="https://unpkg.com/pdfjs-dist@4.10.38/build/pdf.worker.min.mjs";const rk=async n=>{try{if(n.type!=="application/pdf")throw new Error("Please select a valid PDF file");const e=await n.arrayBuffer(),s=await ik({data:e,cMapUrl:"https://unpkg.com/pdfjs-dist@4.10.38/cmaps/",cMapPacked:!0}).promise;if(s.numPages===0)throw new Error("PDF appears to be empty");let i="";for(let o=1;o<=s.numPages;o++)try{const u=(await(await s.getPage(o)).getTextContent()).items.filter(h=>h.str&&typeof h.str=="string").map(h=>h.str.trim()).filter(h=>h.length>0).join(" ");u&&(i+=u+`

`)}catch(l){console.warn(`Failed to extract text from page ${o}:`,l)}const r=i.trim();if(!r||r.length<50)throw new Error("PDF contains insufficient text content for quiz generation");return r}catch(e){throw console.error("PDF parsing error:",e),e instanceof Error?e:new Error("Failed to extract text from PDF. Please ensure the PDF contains readable text.")}},ok="AIzaSyBtqlg9xaXoebKb6vFarVEgrjDHZCVJ12Q",ak="https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent";async function lk(n,e){var o,l,c,u,h;const t=Math.floor(Math.random()*1e4),i={Easy:{wordLength:"4-7 letters",complexity:"basic concepts, common academic terms, fundamental principles",examples:"atom, cell, force, light, sound, plant, water",count:15,format:"single words only (no spaces, hyphens, apostrophes)"},Medium:{wordLength:"8-12 letters",complexity:"intermediate concepts, technical terms, processes and systems",examples:"molecule, organism, velocity, reaction, equation, function",count:15,format:"single words only (no spaces, hyphens, apostrophes)"},Hard:{wordLength:"13+ letters OR multi-word phrases (2-4 words)",complexity:"advanced concepts, specialized terminology, complex processes, scientific phrases",examples:"photosynthesis, mitochondria, electromagnetic, thermodynamics, cellular respiration, quantum mechanics, natural selection",count:15,format:"single long words (13+ letters) OR multi-word phrases (2-4 words with spaces between them)"}}[e],r=`You are an educational game designer creating ${e} level Hangman questions from academic content.

RANDOMIZATION SEED: ${t} (use this to vary your selection approach and question styles)

DIFFICULTY LEVEL: ${e}
- Word/Phrase Length: ${i.wordLength}
- Complexity: ${i.complexity}
- Examples: ${i.examples}
- Format: ${i.format}

From the following educational text, create exactly ${i.count} unique academic terms suitable for ${e} level Hangman gameplay.

WORD/PHRASE REQUIREMENTS FOR ${e} LEVEL:
- Length: ${i.wordLength}
- Complexity: ${i.complexity}
- Format: ${i.format}
${e==="Hard"?`
- For Hard level specifically:
  * Can be single long words (13+ letters) like "photosynthesis", "electromagnetic"
  * OR multi-word phrases (2-4 words) like "cellular respiration", "natural selection", "quantum mechanics"
  * Multi-word phrases should have spaces between words
  * Only use alphabetic characters and spaces (no hyphens, apostrophes, numbers, punctuation)
  * No proper nouns or brand names`:`
- Only alphabetic characters (a-z, A-Z)
- No proper nouns or brand names`}
- Educationally valuable terms from the provided text

QUESTION CREATION STRATEGY:
- Vary your selection approach each time using the randomization seed
- Mix question types: definitions, functions, examples, relationships, processes
- Use different question starters: "What is...", "Which process...", "What term describes...", "What concept explains..."
- Make questions engaging and educational
- Ensure questions clearly point to the target word/phrase
- Match question complexity to ${e} level

HINT GUIDELINES:
- Provide complementary information that doesn't repeat the question
- Include context, examples, or related concepts appropriate for ${e} level
- Help students learn while playing
- Add educational value beyond the main question

For each term, create a JSON object:
{
  "word": "${e==="Hard"?"single long word (13+ letters) OR multi-word phrase with spaces":"single word only, "+i.wordLength+", letters only"}",
  "question": "engaging ${e}-level question testing understanding",
  "hint": "additional educational clue for ${e} level",
  "level": "${e}"
}

IMPORTANT: All words/phrases must be exactly ${e} level difficulty. ${e==="Hard"?'For Hard level, ensure proper spacing in multi-word phrases (e.g., "cellular respiration" not "cellularrespiration").':`Focus only on terms that match the ${i.wordLength} requirement and ${i.complexity} complexity.`}

Text to analyze: ${n.substring(0,4e3)}

Respond with a valid JSON array only (no additional text):`;try{const d=await fetch(`${ak}?key=${ok}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:r}]}],generationConfig:{temperature:.8,topK:50,topP:.9,maxOutputTokens:4e3}})});if(!d.ok)throw new Error(`Gemini API error: ${d.status} - ${d.statusText}`);const p=(h=(u=(c=(l=(o=(await d.json()).candidates)==null?void 0:o[0])==null?void 0:l.content)==null?void 0:c.parts)==null?void 0:u[0])==null?void 0:h.text;if(!p)throw new Error("No content generated from API");const g=p.match(/\[[\s\S]*\]/);if(!g)throw new Error("No valid JSON array found in API response");const b=JSON.parse(g[0]);if(!Array.isArray(b)||b.length===0)throw new Error("Invalid response format from API");const E=b.filter(v=>{if(!v.word||!v.question||!v.hint||!v.level||v.level!==e)return!1;if(e==="Hard"){if(!/^[a-zA-Z\s]+$/.test(v.word))return!1;v.word=v.word.trim().replace(/\s+/g," ");const S=v.word.split(" ");return S.length===1?v.word.length>=13:S.length>=2&&S.length<=4?S.every(_=>_.length>=2):!1}else{if(!/^[a-zA-Z]+$/.test(v.word))return!1;const S=v.word.length;switch(e){case"Easy":return S>=4&&S<=7;case"Medium":return S>=8&&S<=12;default:return!1}}});if(E.length===0)throw new Error(`No valid ${e} level words could be generated from the provided text. Please try a different PDF or check that it contains appropriate ${e.toLowerCase()} level academic content.`);return E.sort(()=>Math.random()-.5)}catch(d){throw console.error("Error generating hangman words:",d),d instanceof Error?new Error(`Failed to generate ${e} level questions: ${d.message}`):new Error(`Failed to generate ${e} level questions from the provided text.`)}}const Lt={python:{title:"Python Programming",description:"Learn Python concepts through interactive gameplay",emoji:"🐍",text:`Python is a high-level, interpreted programming language known for its simplicity and readability. It supports multiple programming paradigms including procedural, object-oriented, and functional programming.

Variables in Python are dynamically typed, meaning you don't need to declare their type explicitly. Python uses indentation to define code blocks instead of curly braces. Functions are defined using the def keyword, and classes use the class keyword.

Python has extensive built-in data structures including lists, tuples, dictionaries, and sets. List comprehensions provide a concise way to create lists. The language includes powerful libraries like NumPy for numerical computing, Pandas for data analysis, and Django for web development.

Exception handling in Python uses try-except blocks. Python supports inheritance, polymorphism, and encapsulation as core object-oriented principles. The language includes decorators for modifying function behavior and generators for memory-efficient iteration.

Python's standard library is comprehensive, including modules for regular expressions, file handling, networking, and database connectivity. The language supports lambda functions for creating anonymous functions and includes powerful debugging tools.`,words:{Easy:[{word:"LIST",question:"What data structure stores multiple items in a single variable?",hint:"It's ordered, changeable, and allows duplicate values",level:"Easy"},{word:"LOOP",question:"What programming construct repeats a block of code?",hint:"Common types include 'for' and 'while'",level:"Easy"},{word:"PRINT",question:"What function displays output to the console?",hint:"It's one of the first functions beginners learn",level:"Easy"},{word:"CLASS",question:"What keyword defines a blueprint for creating objects?",hint:"It's fundamental to object-oriented programming",level:"Easy"},{word:"TUPLE",question:"What immutable data structure stores ordered items?",hint:"Unlike lists, you cannot change its contents after creation",level:"Easy"},{word:"DICT",question:"What data structure stores key-value pairs?",hint:"Short for dictionary, uses curly braces",level:"Easy"},{word:"RANGE",question:"What function generates a sequence of numbers?",hint:"Commonly used with for loops",level:"Easy"},{word:"INPUT",question:"What function gets user input from the keyboard?",hint:"It always returns a string value",level:"Easy"},{word:"BREAK",question:"What keyword exits a loop prematurely?",hint:"Often used with conditional statements inside loops",level:"Easy"},{word:"IMPORT",question:"What keyword brings external modules into your program?",hint:"Essential for using libraries and packages",level:"Easy"},{word:"STRING",question:"What data type represents text in Python?",hint:"Enclosed in quotes, can be single or double",level:"Easy"},{word:"RETURN",question:"What keyword sends a value back from a function?",hint:"Functions without this keyword return None by default",level:"Easy"},{word:"INDENT",question:"What defines code blocks in Python instead of braces?",hint:"Python's unique way of structuring code",level:"Easy"},{word:"LAMBDA",question:"What keyword creates anonymous functions?",hint:"Used for short, simple functions in one line",level:"Easy"},{word:"GLOBAL",question:"What keyword accesses variables outside function scope?",hint:"Allows modification of variables defined outside functions",level:"Easy"}],Medium:[{word:"EXCEPTION",question:"What occurs when Python encounters an error during execution?",hint:"Handled using try-except blocks",level:"Medium"},{word:"DECORATOR",question:"What modifies the behavior of functions or classes?",hint:"Uses the @ symbol before function definitions",level:"Medium"},{word:"GENERATOR",question:"What creates iterators using yield instead of return?",hint:"Memory-efficient way to create sequences",level:"Medium"},{word:"ITERATOR",question:"What object implements __iter__ and __next__ methods?",hint:"Can be used in for loops and with next() function",level:"Medium"},{word:"RECURSION",question:"What technique involves a function calling itself?",hint:"Useful for problems that can be broken into smaller subproblems",level:"Medium"},{word:"NAMESPACE",question:"What system maps names to objects in Python?",hint:"Prevents naming conflicts between different parts of code",level:"Medium"},{word:"PROPERTY",question:"What allows methods to be accessed like attributes?",hint:"Uses @property decorator for getter methods",level:"Medium"},{word:"CLOSURE",question:"What captures variables from an enclosing scope?",hint:"Inner functions that remember outer function variables",level:"Medium"},{word:"METACLASS",question:"What is a class whose instances are classes?",hint:"Controls how classes are created in Python",level:"Medium"},{word:"THREADING",question:"What allows concurrent execution of multiple tasks?",hint:"Python's approach to parallel processing",level:"Medium"},{word:"PICKLING",question:"What process serializes Python objects to binary format?",hint:"Used to save objects to files or send over networks",level:"Medium"},{word:"SLICING",question:"What technique extracts portions of sequences?",hint:"Uses colon notation like [start:end:step]",level:"Medium"},{word:"CONTEXT",question:"What manager handles resource allocation and cleanup?",hint:"Used with 'with' statements for file handling",level:"Medium"},{word:"MULTIPLE",question:"What type of inheritance allows a class to inherit from multiple parents?",hint:"Can lead to the diamond problem in inheritance hierarchies",level:"Medium"},{word:"ABSTRACT",question:"What type of class cannot be instantiated directly?",hint:"Serves as a blueprint for other classes to inherit from",level:"Medium"}],Hard:[{word:"LIST COMPREHENSION",question:"What concise way creates lists using a single line of code?",hint:"Combines loops and conditionals in square brackets",level:"Hard"},{word:"MULTIPLE INHERITANCE",question:"What OOP feature allows a class to inherit from multiple parent classes?",hint:"Can create complex hierarchies and method resolution order issues",level:"Hard"},{word:"GARBAGE COLLECTION",question:"What automatic process frees up memory from unused objects?",hint:"Python uses reference counting and cycle detection",level:"Hard"},{word:"DUCK TYPING",question:"What principle focuses on object behavior rather than type?",hint:"If it walks like a duck and quacks like a duck, it's a duck",level:"Hard"},{word:"METHOD RESOLUTION ORDER",question:"What determines which method is called in multiple inheritance?",hint:"Python uses C3 linearization algorithm for this",level:"Hard"},{word:"GLOBAL INTERPRETER LOCK",question:"What prevents multiple threads from executing Python code simultaneously?",hint:"Often abbreviated as GIL, affects multithreading performance",level:"Hard"},{word:"CONTEXT MANAGER",question:"What protocol defines runtime context for executing code blocks?",hint:"Implements __enter__ and __exit__ methods",level:"Hard"},{word:"METACLASS PROGRAMMING",question:"What advanced technique involves classes that create other classes?",hint:"Classes are instances of metaclasses in Python",level:"Hard"},{word:"ASYNCHRONOUS PROGRAMMING",question:"What paradigm allows non-blocking execution of code?",hint:"Uses async/await keywords for concurrent operations",level:"Hard"},{word:"DESCRIPTOR PROTOCOL",question:"What mechanism controls attribute access in Python objects?",hint:"Implements __get__, __set__, and __delete__ methods",level:"Hard"},{word:"MONKEY PATCHING",question:"What technique dynamically modifies classes or modules at runtime?",hint:"Can change behavior of existing code without modifying source",level:"Hard"},{word:"WEAK REFERENCE",question:"What type of reference doesn't prevent garbage collection?",hint:"Useful for avoiding circular references and memory leaks",level:"Hard"},{word:"COROUTINE FUNCTION",question:"What special function can be paused and resumed during execution?",hint:"Defined with async def and called with await",level:"Hard"},{word:"ABSTRACT BASE CLASS",question:"What provides a way to define interfaces in Python?",hint:"Uses ABC module to enforce method implementation in subclasses",level:"Hard"},{word:"MEMORY VIEW OBJECT",question:"What provides access to internal data of objects without copying?",hint:"Efficient way to work with large binary data structures",level:"Hard"}]}},electronics:{title:"Electronics Engineering",description:"Master electronics concepts through engaging puzzles",emoji:"⚡",text:`Electronics is the branch of physics and engineering dealing with the behavior and effects of electrons and electronic devices. It encompasses the design and application of circuits using active components like transistors, diodes, and integrated circuits.

Basic electronic components include resistors, capacitors, inductors, and semiconductors. Ohm's law describes the relationship between voltage, current, and resistance. Kirchhoff's laws govern current and voltage in electrical circuits.

Semiconductors are materials with electrical conductivity between conductors and insulators. Diodes allow current flow in one direction, while transistors can amplify signals or act as switches. Integrated circuits combine multiple components on a single chip.

Digital electronics uses binary logic with high and low voltage levels representing 1 and 0. Logic gates perform Boolean operations, and flip-flops store binary information. Microprocessors execute instructions to process data.

Analog electronics deals with continuous signals, using operational amplifiers for signal processing. Filters remove unwanted frequencies, and oscillators generate periodic waveforms. Power electronics manages electrical energy conversion and control.`,words:{Easy:[{word:"DIODE",question:"What component allows current to flow in only one direction?",hint:"Has an anode and cathode, commonly used for rectification",level:"Easy"},{word:"OHMS",question:"What is the unit of electrical resistance?",hint:"Named after a German physicist, symbol is Ω",level:"Easy"},{word:"VOLT",question:"What is the unit of electrical potential difference?",hint:"Named after Alessandro Volta, symbol is V",level:"Easy"},{word:"AMPERE",question:"What is the unit of electrical current?",hint:"Often shortened to 'amp', symbol is A",level:"Easy"},{word:"GROUND",question:"What is the reference point for voltage measurements?",hint:"Usually connected to earth or chassis",level:"Easy"},{word:"SWITCH",question:"What component controls the flow of current in a circuit?",hint:"Can be open or closed to break or complete a circuit",level:"Easy"},{word:"FUSE",question:"What safety device protects circuits from overcurrent?",hint:"Burns out when current exceeds its rating",level:"Easy"},{word:"WIRE",question:"What conducts electricity between components?",hint:"Usually made of copper and covered with insulation",level:"Easy"},{word:"POWER",question:"What is the rate of energy consumption measured in watts?",hint:"Calculated as voltage times current",level:"Easy"},{word:"SERIES",question:"What type of circuit has components connected end-to-end?",hint:"Current is the same through all components",level:"Easy"},{word:"CHARGE",question:"What fundamental property of matter creates electric fields?",hint:"Can be positive or negative, measured in coulombs",level:"Easy"},{word:"SIGNAL",question:"What carries information in electronic systems?",hint:"Can be analog or digital, varies with time",level:"Easy"},{word:"GROUND",question:"What provides a return path for current?",hint:"Common reference point in circuits",level:"Easy"},{word:"LOAD",question:"What component consumes power in a circuit?",hint:"Examples include motors, lights, and speakers",level:"Easy"},{word:"SHORT",question:"What unwanted low-resistance path can damage circuits?",hint:"Causes excessive current flow and can blow fuses",level:"Easy"}],Medium:[{word:"RESISTOR",question:"What component opposes the flow of electric current?",hint:"Color bands indicate its value in ohms",level:"Medium"},{word:"CAPACITOR",question:"What component stores electrical energy in an electric field?",hint:"Blocks DC but allows AC to pass through",level:"Medium"},{word:"INDUCTOR",question:"What component stores energy in a magnetic field?",hint:"Opposes changes in current flow",level:"Medium"},{word:"TRANSISTOR",question:"What three-terminal device can amplify or switch signals?",hint:"Types include BJT and MOSFET",level:"Medium"},{word:"FREQUENCY",question:"What measures how many cycles occur per second?",hint:"Measured in Hertz, important for AC circuits",level:"Medium"},{word:"IMPEDANCE",question:"What is the total opposition to AC current flow?",hint:"Combines resistance and reactance",level:"Medium"},{word:"RECTIFIER",question:"What circuit converts AC to DC?",hint:"Uses diodes to allow current flow in one direction",level:"Medium"},{word:"AMPLIFIER",question:"What circuit increases the amplitude of signals?",hint:"Common types include operational amplifiers",level:"Medium"},{word:"OSCILLATOR",question:"What circuit generates periodic waveforms?",hint:"Creates sine waves, square waves, or other patterns",level:"Medium"},{word:"FEEDBACK",question:"What technique returns output signal to the input?",hint:"Can be positive or negative, affects stability",level:"Medium"},{word:"BANDWIDTH",question:"What range of frequencies can a system handle?",hint:"Difference between upper and lower frequency limits",level:"Medium"},{word:"RESONANCE",question:"What occurs when reactive components cancel each other?",hint:"Happens at a specific frequency in LC circuits",level:"Medium"},{word:"MODULATION",question:"What process varies a carrier signal with information?",hint:"Types include AM, FM, and digital modulation",level:"Medium"},{word:"THRESHOLD",question:"What minimum input level triggers a digital response?",hint:"Important for logic gates and comparators",level:"Medium"},{word:"SATURATION",question:"What state occurs when a transistor is fully turned on?",hint:"Collector-emitter voltage is at minimum",level:"Medium"}],Hard:[{word:"OPERATIONAL AMPLIFIER",question:"What high-gain differential amplifier is fundamental to analog circuits?",hint:"Often called op-amp, has inverting and non-inverting inputs",level:"Hard"},{word:"PHASE LOCKED LOOP",question:"What control system locks output phase to input reference?",hint:"Commonly abbreviated as PLL, used in frequency synthesis",level:"Hard"},{word:"FIELD EFFECT TRANSISTOR",question:"What voltage-controlled device uses electric field to control current?",hint:"Types include JFET and MOSFET, high input impedance",level:"Hard"},{word:"ANALOG TO DIGITAL",question:"What conversion process transforms continuous signals to discrete values?",hint:"Essential for digital signal processing systems",level:"Hard"},{word:"ELECTROMAGNETIC INTERFERENCE",question:"What unwanted disturbance affects electronic equipment operation?",hint:"Often abbreviated as EMI, requires shielding and filtering",level:"Hard"},{word:"SWITCHING POWER SUPPLY",question:"What efficient power converter uses high-frequency switching?",hint:"More efficient than linear regulators, generates less heat",level:"Hard"},{word:"DIGITAL SIGNAL PROCESSOR",question:"What specialized microprocessor optimizes digital signal processing?",hint:"Abbreviated as DSP, used in audio and communication systems",level:"Hard"},{word:"COMPLEMENTARY METAL OXIDE",question:"What semiconductor technology uses both NMOS and PMOS transistors?",hint:"CMOS technology, low power consumption when static",level:"Hard"},{word:"VOLTAGE CONTROLLED OSCILLATOR",question:"What circuit generates frequency proportional to input voltage?",hint:"Abbreviated as VCO, key component in PLLs",level:"Hard"},{word:"SURFACE MOUNT TECHNOLOGY",question:"What assembly method mounts components directly on PCB surface?",hint:"SMT allows smaller, denser circuit boards",level:"Hard"},{word:"PRINTED CIRCUIT BOARD",question:"What substrate mechanically supports and electrically connects components?",hint:"PCB uses conductive tracks etched from copper sheets",level:"Hard"},{word:"ELECTROSTATIC DISCHARGE",question:"What sudden flow of electricity can damage sensitive components?",hint:"ESD protection is crucial in semiconductor handling",level:"Hard"},{word:"RADIO FREQUENCY IDENTIFICATION",question:"What wireless technology uses electromagnetic fields for identification?",hint:"RFID systems consist of tags and readers",level:"Hard"},{word:"PULSE WIDTH MODULATION",question:"What technique varies duty cycle to control average power?",hint:"PWM is efficient for motor control and power regulation",level:"Hard"},{word:"INTEGRATED CIRCUIT DESIGN",question:"What process creates complex electronic systems on semiconductor chips?",hint:"Involves layout, fabrication, and testing of microchips",level:"Hard"}]}}},ck=({onFileUpload:n,isProcessing:e})=>{const[t,s]=Se.useState(!1),i=Se.useCallback(l=>{l.preventDefault(),l.stopPropagation(),l.type==="dragenter"||l.type==="dragover"?s(!0):l.type==="dragleave"&&s(!1)},[]),r=Se.useCallback(l=>{if(l.preventDefault(),l.stopPropagation(),s(!1),l.dataTransfer.files&&l.dataTransfer.files[0]){const c=l.dataTransfer.files[0];c.type==="application/pdf"?n(c):alert("Please upload a PDF file")}},[n]);Se.useCallback(l=>{l.preventDefault(),l.target.files&&l.target.files[0]&&n(l.target.files[0])},[n]);const o=Se.useCallback(()=>{if(!e){const l=document.createElement("input");l.type="file",l.accept=".pdf",l.onchange=c=>{const u=c.target;u.files&&u.files[0]&&n(u.files[0])},l.click()}},[n,e]);return w.jsx("div",{className:"w-full max-w-lg mx-auto",children:w.jsxs("div",{className:`
          relative border-4 border-dashed rounded-3xl p-4 sm:p-6 lg:p-8 text-center transition-all duration-300 transform cursor-pointer
          ${t?"border-yellow-400 bg-yellow-100/20 scale-105 shadow-2xl":"border-white/50 bg-white/10 hover:bg-white/20 hover:border-white/70 hover:scale-102"}
          ${e?"pointer-events-none opacity-70":"hover:shadow-xl"}
          backdrop-blur-sm
        `,onDragEnter:i,onDragLeave:i,onDragOver:i,onDrop:r,onClick:o,children:[w.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e?w.jsxs("div",{className:"relative",children:[w.jsx(QE,{className:"w-10 h-10 sm:w-12 sm:h-12 text-yellow-300 mx-auto animate-spin"}),w.jsx("div",{className:"absolute -top-1 -right-1 text-base sm:text-lg animate-bounce",children:"⚡"})]}):w.jsxs("div",{className:"relative",children:[w.jsxs("div",{className:"relative inline-block",children:[w.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-2 sm:mb-3 shadow-lg",children:w.jsx(Qm,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})}),w.jsx("div",{className:"absolute -top-1 -right-1 bg-orange-400 rounded-full p-1 sm:p-1.5 shadow-lg",children:w.jsx(XE,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})})]}),w.jsx("div",{className:"absolute top-0 left-1/4 text-yellow-300 text-sm sm:text-base animate-pulse",children:"✨"}),w.jsx("div",{className:"absolute top-2 right-1/4 text-yellow-300 text-xs sm:text-sm animate-pulse",style:{animationDelay:"0.5s"},children:"⭐"}),w.jsx("div",{className:"absolute bottom-2 left-1/3 text-yellow-300 text-xs animate-pulse",style:{animationDelay:"1s"},children:"💫"})]}),w.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[w.jsx("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-white drop-shadow-lg",children:e?"Processing PDF...":"Drop Your PDF Here!"}),w.jsx("p",{className:"text-white/90 text-xs sm:text-sm lg:text-base leading-relaxed max-w-lg mx-auto px-1",children:e?"Extracting text and generating questions...":"Drag and drop your PDF file here, or click to browse"}),!e&&w.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-2 sm:p-3 mt-2 sm:mt-3",children:w.jsx("p",{className:"text-white/80 text-xs",children:"📄 Supports educational PDFs with readable text content"})})]})]}),t&&w.jsx("div",{className:"absolute inset-0 rounded-3xl border-4 border-yellow-400 animate-pulse"})]})})},uk=({onSelectDifficulty:n,wordCounts:e})=>{const t=[{level:"Easy",icon:JE,color:"green",description:"Perfect for getting started",gradient:"from-green-400 to-emerald-500",emoji:"🌟",borderColor:"border-green-300"},{level:"Medium",icon:g1,color:"yellow",description:"Challenge your knowledge",gradient:"from-yellow-400 to-orange-500",emoji:"⚡",borderColor:"border-yellow-300"},{level:"Hard",icon:YE,color:"red",description:"For the brave and bold",gradient:"from-red-400 to-pink-500",emoji:"🔥",borderColor:"border-red-300"}];return w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 lg:gap-6 max-w-5xl mx-auto",children:t.map(({level:s,icon:i,color:r,description:o,gradient:l,emoji:c,borderColor:u})=>w.jsxs("button",{onClick:()=>n(s),className:`
            group relative p-3 sm:p-4 lg:p-6 rounded-3xl transition-all duration-300 transform
            hover:scale-105 hover:shadow-2xl focus:outline-none focus:ring-4 focus:ring-white/50
            bg-gradient-to-br ${l} text-white border-4 ${u}
            shadow-xl hover:shadow-3xl
          `,children:[w.jsx("div",{className:"absolute -top-2 -right-2 lg:-top-3 lg:-right-3 text-xl sm:text-2xl lg:text-3xl animate-bounce group-hover:animate-spin",children:c}),w.jsxs("div",{className:"text-center space-y-2 sm:space-y-3 lg:space-y-4",children:[w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"bg-white/30 backdrop-blur-sm w-10 h-10 sm:w-12 sm:h-12 lg:w-16 lg:h-16 rounded-full flex items-center justify-center mx-auto group-hover:bg-white/40 transition-all duration-300 shadow-lg",children:w.jsx(i,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-8 lg:h-8"})}),w.jsx("div",{className:"absolute -top-0.5 -left-0.5 lg:-top-1 lg:-left-1 text-yellow-200 text-xs lg:text-sm animate-pulse",children:"✨"}),w.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 lg:-bottom-1 lg:-right-1 text-yellow-200 text-xs animate-pulse",style:{animationDelay:"0.5s"},children:"⭐"})]}),w.jsxs("div",{className:"space-y-1 sm:space-y-2 lg:space-y-3",children:[w.jsx("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold drop-shadow-lg",children:s}),w.jsx("p",{className:"text-white/90 text-xs sm:text-sm lg:text-base font-medium",children:o}),w.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-2xl px-2 py-1.5 sm:px-3 sm:py-2 lg:px-4 lg:py-2.5 shadow-lg",children:[w.jsx("div",{className:"text-base sm:text-lg lg:text-xl font-bold mb-0.5",children:e[s]}),w.jsx("div",{className:"text-white/80 text-xs font-medium",children:"questions available"})]})]})]}),w.jsx("div",{className:"absolute inset-0 rounded-3xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 blur-xl"})]},s))})},hk=({wrongGuesses:n})=>w.jsx("div",{className:"flex justify-center items-center",children:w.jsxs("svg",{width:"120",height:"140",viewBox:"0 0 200 250",className:"transition-all duration-500 ease-in-out w-20 h-28 sm:w-24 sm:h-32 md:w-28 md:h-36",children:[w.jsx("line",{x1:"20",y1:"230",x2:"100",y2:"230",stroke:"#374151",strokeWidth:"4",className:`transition-all duration-500 ${n>=1?"opacity-100":"opacity-0"}`}),w.jsx("line",{x1:"30",y1:"230",x2:"30",y2:"20",stroke:"#374151",strokeWidth:"4",className:`transition-all duration-500 ${n>=2?"opacity-100":"opacity-0"}`}),w.jsx("line",{x1:"30",y1:"20",x2:"120",y2:"20",stroke:"#374151",strokeWidth:"4",className:`transition-all duration-500 ${n>=3?"opacity-100":"opacity-0"}`}),w.jsx("line",{x1:"120",y1:"20",x2:"120",y2:"50",stroke:"#374151",strokeWidth:"4",className:`transition-all duration-500 ${n>=4?"opacity-100":"opacity-0"}`}),w.jsx("circle",{cx:"120",cy:"70",r:"20",stroke:"#DC2626",strokeWidth:"4",fill:"none",className:`transition-all duration-500 ${n>=5?"opacity-100":"opacity-0"}`}),w.jsx("line",{x1:"120",y1:"90",x2:"120",y2:"170",stroke:"#DC2626",strokeWidth:"4",className:`transition-all duration-500 ${n>=6?"opacity-100":"opacity-0"}`}),w.jsx("line",{x1:"120",y1:"110",x2:"90",y2:"140",stroke:"#DC2626",strokeWidth:"4",className:`transition-all duration-500 ${n>=7?"opacity-100":"opacity-0"}`}),w.jsx("line",{x1:"120",y1:"110",x2:"150",y2:"140",stroke:"#DC2626",strokeWidth:"4",className:`transition-all duration-500 ${n>=8?"opacity-100":"opacity-0"}`}),w.jsx("line",{x1:"120",y1:"170",x2:"90",y2:"200",stroke:"#DC2626",strokeWidth:"4",className:`transition-all duration-500 ${n>=9?"opacity-100":"opacity-0"}`}),w.jsx("line",{x1:"120",y1:"170",x2:"150",y2:"200",stroke:"#DC2626",strokeWidth:"4",className:`transition-all duration-500 ${n>=10?"opacity-100":"opacity-0"}`})]})}),dk=({word:n,guessedLetters:e})=>w.jsx("div",{className:"flex justify-center items-center flex-wrap gap-1 sm:gap-2 px-2",children:n.toUpperCase().split("").map((t,s)=>{if(t===" ")return w.jsx("div",{className:"w-3 sm:w-4 md:w-5 h-8 sm:h-10 md:h-12 flex items-center justify-center"},s);const i=e.includes(t);return w.jsxs("div",{className:`
              w-6 h-8 sm:w-8 sm:h-10 md:w-10 md:h-12 border-b-2 sm:border-b-4 flex items-center justify-center
              text-lg sm:text-xl md:text-2xl font-bold transition-all duration-500 relative
              ${i?"text-white border-yellow-400 animate-pulse":"text-transparent border-white/50"}
            `,children:[i&&w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"relative z-10",children:t}),w.jsx("div",{className:"absolute inset-0 bg-yellow-400/20 rounded-lg blur-sm"})]}),i&&w.jsx("div",{className:"absolute -top-1 -right-0.5 text-yellow-300 text-xs animate-bounce",children:"✨"})]},s)})}),fk=({guessedLetters:n,onLetterClick:e,disabled:t})=>{const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=r=>n.includes(r)?"guessed":"available";return w.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-8 md:grid-cols-10 gap-1 sm:gap-2 max-w-3xl mx-auto px-1 sm:px-2",children:s.map(r=>{const l=i(r)==="guessed";return w.jsx("button",{onClick:()=>!t&&!l&&e(r),disabled:t||l,className:`
              aspect-square rounded-lg font-bold text-sm sm:text-base md:text-lg transition-all duration-200 transform border
              ${l?"bg-gray-300/50 text-gray-500 cursor-not-allowed border-gray-400/50 backdrop-blur-sm":t?"bg-gray-200/50 text-gray-400 cursor-not-allowed border-gray-300/50 backdrop-blur-sm":"bg-white/90 text-blue-600 shadow-lg hover:bg-white hover:scale-110 active:scale-95 cursor-pointer border-blue-200 hover:border-blue-400 backdrop-blur-sm hover:shadow-xl"}
            `,children:r},r)})})},pk=({wordsCompleted:n,totalWords:e,correctGuesses:t,wrongGuesses:s,hintsUsed:i})=>{const r=t+s>0?Math.round(t/(t+s)*100):0;return w.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-6",children:[w.jsxs("div",{className:"bg-green-100/90 backdrop-blur-sm p-3 sm:p-6 rounded-2xl text-center border-2 border-green-200 relative overflow-hidden",children:[w.jsx("div",{className:"absolute top-1 right-1 text-lg animate-pulse",children:"🏆"}),w.jsx(t_,{className:"w-6 h-6 sm:w-8 sm:h-8 text-green-600 mx-auto mb-2 sm:mb-3"}),w.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-700",children:n}),w.jsx("div",{className:"text-xs sm:text-sm text-green-600 font-medium",children:"Completed"})]}),w.jsxs("div",{className:"bg-blue-100/90 backdrop-blur-sm p-3 sm:p-6 rounded-2xl text-center border-2 border-blue-200 relative overflow-hidden",children:[w.jsx("div",{className:"absolute top-1 right-1 text-lg animate-pulse",children:"🎯"}),w.jsx(e_,{className:"w-6 h-6 sm:w-8 sm:h-8 text-blue-600 mx-auto mb-2 sm:mb-3"}),w.jsxs("div",{className:"text-2xl sm:text-3xl font-bold text-blue-700",children:[r,"%"]}),w.jsx("div",{className:"text-xs sm:text-sm text-blue-600 font-medium",children:"Accuracy"})]}),w.jsxs("div",{className:"bg-yellow-100/90 backdrop-blur-sm p-3 sm:p-6 rounded-2xl text-center border-2 border-yellow-200 relative overflow-hidden",children:[w.jsx("div",{className:"absolute top-1 right-1 text-lg animate-pulse",children:"💡"}),w.jsx(KE,{className:"w-6 h-6 sm:w-8 sm:h-8 text-yellow-600 mx-auto mb-2 sm:mb-3"}),w.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-yellow-700",children:i}),w.jsx("div",{className:"text-xs sm:text-sm text-yellow-600 font-medium",children:"Hints Used"})]}),w.jsxs("div",{className:"bg-red-100/90 backdrop-blur-sm p-3 sm:p-6 rounded-2xl text-center border-2 border-red-200 relative overflow-hidden",children:[w.jsx("div",{className:"absolute top-1 right-1 text-lg animate-pulse",children:"❌"}),w.jsx(Km,{className:"w-6 h-6 sm:w-8 sm:h-8 text-red-600 mx-auto mb-2 sm:mb-3"}),w.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-red-700",children:s}),w.jsx("div",{className:"text-xs sm:text-sm text-red-600 font-medium",children:"Wrong Guesses"})]})]})},d0=({className:n="w-6 h-6"})=>w.jsx("img",{src:"/bolt_new_logo copy.png",alt:"Bolt.new Logo",className:n});class mk{constructor(){this.correctSound=null,this.errorSound=null,this.backgroundMusic=null,this.isEnabled=!0,this.isMusicEnabled=!0,this.musicVolume=.3,this.initializeSounds()}initializeSounds(){try{this.correctSound=new Audio("/correct.mp3"),this.correctSound.preload="auto",this.correctSound.volume=.7,this.errorSound=new Audio("/error.mp3"),this.errorSound.preload="auto",this.errorSound.volume=.7,this.backgroundMusic=new Audio("/background.mp3"),this.backgroundMusic.preload="auto",this.backgroundMusic.volume=this.musicVolume,this.backgroundMusic.loop=!0,this.correctSound.addEventListener("error",()=>{console.warn("Could not load correct.mp3 sound file"),this.correctSound=null}),this.errorSound.addEventListener("error",()=>{console.warn("Could not load error.mp3 sound file"),this.errorSound=null}),this.backgroundMusic.addEventListener("error",()=>{console.warn("Could not load background.mp3 music file"),this.backgroundMusic=null}),this.backgroundMusic.addEventListener("ended",()=>{this.isMusicEnabled&&this.playBackgroundMusic()})}catch(e){console.warn("Sound initialization failed:",e),this.correctSound=null,this.errorSound=null,this.backgroundMusic=null}}playCorrect(){if(this.isEnabled&&this.correctSound)try{this.correctSound.currentTime=0,this.correctSound.play().catch(e=>{console.warn("Could not play correct sound:",e)})}catch(e){console.warn("Error playing correct sound:",e)}}playError(){if(this.isEnabled&&this.errorSound)try{this.errorSound.currentTime=0,this.errorSound.play().catch(e=>{console.warn("Could not play error sound:",e)})}catch(e){console.warn("Error playing error sound:",e)}}playBackgroundMusic(){if(this.isMusicEnabled&&this.backgroundMusic)try{this.backgroundMusic.play().catch(e=>{console.warn("Could not play background music:",e)})}catch(e){console.warn("Error playing background music:",e)}}pauseBackgroundMusic(){if(this.backgroundMusic)try{this.backgroundMusic.pause()}catch(e){console.warn("Error pausing background music:",e)}}stopBackgroundMusic(){if(this.backgroundMusic)try{this.backgroundMusic.pause(),this.backgroundMusic.currentTime=0}catch(e){console.warn("Error stopping background music:",e)}}toggleSound(){return this.isEnabled=!this.isEnabled,this.isEnabled}toggleMusic(){return this.isMusicEnabled=!this.isMusicEnabled,this.isMusicEnabled?this.playBackgroundMusic():this.pauseBackgroundMusic(),this.isMusicEnabled}setSoundEnabled(e){this.isEnabled=e}setMusicEnabled(e){this.isMusicEnabled=e,e?this.playBackgroundMusic():this.pauseBackgroundMusic()}isSoundEnabled(){return this.isEnabled}isMusicEnabled(){return this.isMusicEnabled}setVolume(e){const t=Math.max(0,Math.min(1,e));this.correctSound&&(this.correctSound.volume=t),this.errorSound&&(this.errorSound.volume=t)}setMusicVolume(e){this.musicVolume=Math.max(0,Math.min(1,e)),this.backgroundMusic&&(this.backgroundMusic.volume=this.musicVolume)}getMusicVolume(){return this.musicVolume}}const $s=new mk,gk=({words:n,difficulty:e,onBackToMenu:t,onBackToDifficulty:s})=>{const[i,r]=Se.useState({currentWordIndex:0,guessedLetters:[],wrongGuesses:0,gameStatus:"playing",showHint:!1,score:0,totalWords:n.length}),[o,l]=Se.useState({wordsCompleted:0,totalWords:n.length,correctGuesses:0,wrongGuesses:0,hintsUsed:0}),[c,u]=Se.useState(!1),[h,d]=Se.useState(!0),[f,p]=Se.useState(!0),g=n[i.currentWordIndex],b=10;Se.useEffect(()=>($s.playBackgroundMusic(),()=>{$s.stopBackgroundMusic()}),[]),Se.useEffect(()=>{i.wrongGuesses>=3&&!i.showHint&&(r(P=>({...P,showHint:!0})),l(P=>({...P,hintsUsed:P.hintsUsed+1})))},[i.wrongGuesses,i.showHint]);const E=P=>{if(i.gameStatus!=="playing"||i.guessedLetters.includes(P))return;const L=[...i.guessedLetters,P],z=g.word.toUpperCase().replace(/\s/g,"").includes(P);z?($s.playCorrect(),l(R=>({...R,correctGuesses:R.correctGuesses+1}))):($s.playError(),l(R=>({...R,wrongGuesses:R.wrongGuesses+1})));const oe=z?i.wrongGuesses:i.wrongGuesses+1,ne=g.word.toUpperCase().replace(/\s/g,"").split("").every(R=>L.includes(R));let He="playing";ne?(He="won",l(R=>({...R,wordsCompleted:R.wordsCompleted+1}))):oe>=b&&(He="lost"),r(R=>({...R,guessedLetters:L,wrongGuesses:oe,gameStatus:He,score:R.score+(z?10:0)}))},y=()=>{u(!1),i.currentWordIndex<n.length-1?r(P=>({...P,currentWordIndex:P.currentWordIndex+1,guessedLetters:[],wrongGuesses:0,gameStatus:"playing",showHint:!1})):($s.stopBackgroundMusic(),s())},v=()=>{u(!0)},S=()=>{r({currentWordIndex:0,guessedLetters:[],wrongGuesses:0,gameStatus:"playing",showHint:!1,score:0,totalWords:n.length}),l({wordsCompleted:0,totalWords:n.length,correctGuesses:0,wrongGuesses:0,hintsUsed:0}),u(!1),$s.playBackgroundMusic()},_=()=>{i.showHint||(r(P=>({...P,showHint:!0})),l(P=>({...P,hintsUsed:P.hintsUsed+1})))},C=()=>{const P=$s.toggleSound();d(P)},T=()=>{const P=$s.toggleMusic();p(P)},k=()=>{$s.stopBackgroundMusic(),t()},N=()=>w.jsx("div",{className:"absolute top-2 left-2 sm:top-4 sm:left-4 z-50",children:w.jsxs("a",{href:"https://bolt.new",target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-1 sm:gap-2 px-2 py-1 sm:px-3 sm:py-2 bg-white/20 backdrop-blur-sm rounded-xl shadow-lg hover:bg-white/30 transition-all duration-200 border border-white/30",children:[w.jsx(d0,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 group-hover:scale-110 transition-transform duration-200"}),w.jsx("span",{className:"text-white text-xs sm:text-sm font-bold hidden sm:inline",children:"Bolt.new"})]})});return c?w.jsxs("div",{className:"h-screen bg-gradient-to-br from-green-400 via-blue-500 to-purple-600 relative overflow-hidden",children:[w.jsx(N,{}),w.jsxs("div",{className:"absolute inset-0",children:[w.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white/10 rounded-full blur-2xl animate-pulse"}),w.jsx("div",{className:"absolute bottom-32 right-32 w-40 h-40 bg-yellow-300/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),w.jsx("div",{className:"absolute top-1/2 left-10 w-24 h-24 bg-pink-300/20 rounded-full blur-2xl animate-pulse",style:{animationDelay:"2s"}})]}),w.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto px-2 sm:px-4 py-2 sm:py-4 h-full flex flex-col justify-center",children:[w.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[w.jsxs("div",{className:"relative inline-block",children:[w.jsx("div",{className:"text-4xl sm:text-5xl lg:text-6xl mb-2 sm:mb-4 animate-bounce",children:"📊"}),w.jsx("div",{className:"absolute -top-1 -right-1 text-lg sm:text-2xl animate-pulse",children:"⭐"}),w.jsx("div",{className:"absolute -bottom-1 -left-1 text-base sm:text-xl animate-pulse",style:{animationDelay:"0.5s"},children:"✨"})]}),w.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-2 sm:mb-4 drop-shadow-lg",children:"Question Complete!"}),w.jsx("p",{className:"text-white/90 text-sm sm:text-base lg:text-lg",children:"Here's how you're doing so far"})]}),w.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-3xl shadow-2xl p-3 sm:p-4 lg:p-6 mb-4 sm:mb-6 border-2 border-white/30 flex-1 flex flex-col justify-center",children:[w.jsx(pk,{...o}),w.jsxs("div",{className:"mt-4 sm:mt-6",children:[w.jsxs("div",{className:"flex justify-between text-xs sm:text-sm text-white/80 mb-2",children:[w.jsx("span",{className:"font-medium",children:"Progress"}),w.jsxs("span",{className:"font-medium",children:[o.wordsCompleted," of ",o.totalWords," completed"]})]}),w.jsx("div",{className:"w-full bg-white/30 rounded-full h-2.5 sm:h-3 overflow-hidden",children:w.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 h-full rounded-full transition-all duration-500 shadow-lg",style:{width:`${o.wordsCompleted/o.totalWords*100}%`}})})]}),w.jsxs("div",{className:"mt-4 sm:mt-6 grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:[w.jsxs("div",{className:"bg-blue-100/90 backdrop-blur-sm p-2 sm:p-3 rounded-2xl border-2 border-blue-200",children:[w.jsxs("h3",{className:"font-bold text-blue-800 mb-1 flex items-center gap-1 text-xs sm:text-sm",children:[w.jsx("span",{className:"text-sm sm:text-base",children:"🎯"})," Accuracy"]}),w.jsx("p",{className:"text-blue-700 text-xs font-medium",children:o.correctGuesses+o.wrongGuesses>0?`${Math.round(o.correctGuesses/(o.correctGuesses+o.wrongGuesses)*100)}% of your guesses were correct`:"No guesses made yet"})]}),w.jsxs("div",{className:"bg-yellow-100/90 backdrop-blur-sm p-2 sm:p-3 rounded-2xl border-2 border-yellow-200",children:[w.jsxs("h3",{className:"font-bold text-yellow-800 mb-1 flex items-center gap-1 text-xs sm:text-sm",children:[w.jsx("span",{className:"text-sm sm:text-base",children:"💡"})," Hints"]}),w.jsx("p",{className:"text-yellow-700 text-xs font-medium",children:o.hintsUsed===0?"Great job! No hints needed so far":`You've used ${o.hintsUsed} hint${o.hintsUsed>1?"s":""} to help you`})]})]})]}),w.jsxs("div",{className:"text-center space-y-3 sm:space-y-4",children:[i.currentWordIndex<n.length-1?w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:y,className:"w-full sm:w-auto px-6 py-3 sm:px-8 sm:py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-2xl font-bold text-sm sm:text-base lg:text-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 transform hover:scale-105 shadow-2xl border-2 border-white/30",children:"Continue to Next Word ✨"}),w.jsxs("p",{className:"text-white/80 text-sm sm:text-base font-medium",children:[n.length-i.currentWordIndex-1," words remaining"]})]}):w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"text-3xl sm:text-4xl lg:text-5xl mb-2 sm:mb-4 animate-bounce",children:"🎊"}),w.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white mb-3 sm:mb-6 drop-shadow-lg",children:["Congratulations! You completed all ",e," level words!"]}),w.jsx("button",{onClick:y,className:"w-full sm:w-auto px-6 py-3 sm:px-8 sm:py-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-2xl font-bold text-sm sm:text-base lg:text-lg hover:from-green-600 hover:to-emerald-700 transition-all duration-200 transform hover:scale-105 shadow-2xl border-2 border-white/30",children:"Choose Another Difficulty 🎯"})]}),w.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 justify-center",children:[w.jsx("button",{onClick:S,className:"px-4 py-2 sm:px-6 sm:py-2.5 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-medium border-2 border-white/30 text-xs sm:text-sm",children:"🔄 Restart Level"}),w.jsx("button",{onClick:k,className:"px-4 py-2 sm:px-6 sm:py-2.5 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-medium border-2 border-white/30 text-xs sm:text-sm",children:"🏠 Back to Menu"})]})]})]})]}):w.jsxs("div",{className:"h-screen bg-gradient-to-br from-blue-400 via-purple-500 to-indigo-600 relative overflow-hidden flex flex-col",children:[w.jsx(N,{}),w.jsxs("div",{className:"absolute inset-0",children:[w.jsx("div",{className:"absolute top-10 right-10 w-20 h-20 bg-white/10 rounded-full blur-xl animate-pulse"}),w.jsx("div",{className:"absolute bottom-20 left-10 w-32 h-32 bg-yellow-300/20 rounded-full blur-2xl animate-pulse",style:{animationDelay:"1s"}}),w.jsx("div",{className:"absolute top-1/3 right-1/4 w-16 h-16 bg-pink-300/20 rounded-full blur-xl animate-pulse",style:{animationDelay:"2s"}})]}),w.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto px-2 sm:px-4 py-1 sm:py-2 h-full flex flex-col",children:[w.jsxs("div",{className:"flex items-center justify-between mb-1 sm:mb-2 flex-shrink-0 pt-12 sm:pt-16",children:[w.jsxs("button",{onClick:k,className:"flex items-center gap-1 sm:gap-2 px-2 py-1.5 sm:px-3 sm:py-2 bg-white/20 backdrop-blur-sm rounded-xl shadow-lg hover:bg-white/30 transition-all duration-200 text-white font-medium border-2 border-white/30 text-xs sm:text-sm",children:[w.jsx(VE,{className:"w-3 h-3 sm:w-4 sm:h-4"}),w.jsx("span",{className:"hidden sm:inline",children:"Menu"})]}),w.jsx("div",{className:"text-center flex-1 mx-2 sm:mx-4",children:w.jsxs("h1",{className:"text-sm sm:text-lg lg:text-2xl font-bold text-white drop-shadow-lg",children:[e," • ",i.currentWordIndex+1,"/",n.length]})}),w.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[w.jsx("button",{onClick:T,className:"flex items-center gap-1 px-2 py-1.5 sm:px-3 sm:py-2 bg-white/20 backdrop-blur-sm rounded-xl shadow-lg hover:bg-white/30 transition-all duration-200 text-white font-medium border-2 border-white/30",title:f?"Disable Music":"Enable Music",children:f?w.jsx(Fv,{className:"w-3 h-3 sm:w-4 sm:h-4"}):w.jsx(Fv,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),w.jsx("button",{onClick:C,className:"flex items-center gap-1 px-2 py-1.5 sm:px-3 sm:py-2 bg-white/20 backdrop-blur-sm rounded-xl shadow-lg hover:bg-white/30 transition-all duration-200 text-white font-medium border-2 border-white/30",title:h?"Disable Sound":"Enable Sound",children:h?w.jsx(n_,{className:"w-3 h-3 sm:w-4 sm:h-4"}):w.jsx(s_,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),w.jsx("button",{onClick:S,className:"flex items-center gap-1 px-2 py-1.5 sm:px-3 sm:py-2 bg-white/20 backdrop-blur-sm rounded-xl shadow-lg hover:bg-white/30 transition-all duration-200 text-white font-medium border-2 border-white/30",children:w.jsx(ZE,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),w.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-3xl shadow-2xl overflow-hidden border-2 border-white/30 flex-1 flex flex-col min-h-0",children:[i.gameStatus==="playing"&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-2 sm:p-3 lg:p-4 relative overflow-hidden flex-shrink-0",children:[w.jsx("div",{className:"absolute top-1 right-2 text-base sm:text-lg animate-pulse",children:"💭"}),w.jsx("div",{className:"absolute bottom-1 left-2 text-sm sm:text-base animate-pulse",style:{animationDelay:"0.5s"},children:"✨"}),w.jsx("h2",{className:"text-xs sm:text-sm lg:text-base font-bold text-center leading-tight mb-1 sm:mb-2 drop-shadow-lg",children:g.question}),i.showHint&&w.jsx("div",{className:"mt-1 sm:mt-2 bg-white/20 backdrop-blur-sm rounded-xl p-1.5 sm:p-2 border border-white/30",children:w.jsxs("div",{className:"flex items-start gap-1 sm:gap-2 text-yellow-100",children:[w.jsx("div",{className:"bg-yellow-400/30 rounded-full p-0.5 sm:p-1",children:w.jsx(Dv,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 flex-shrink-0"})}),w.jsxs("div",{className:"min-w-0 flex-1",children:[w.jsx("strong",{className:"text-xs sm:text-sm font-bold",children:"Hint:"}),w.jsx("p",{className:"text-xs sm:text-sm mt-0.5 font-medium leading-tight",children:g.hint})]})]})}),!i.showHint&&i.wrongGuesses<3&&w.jsx("div",{className:"mt-1 sm:mt-2 text-center",children:w.jsxs("button",{onClick:_,className:"inline-flex items-center gap-1 px-2 py-1 sm:px-3 sm:py-1.5 bg-white/20 backdrop-blur-sm text-white rounded-lg hover:bg-white/30 transition-all duration-200 font-medium border border-white/30 text-xs sm:text-sm",children:[w.jsx(Dv,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3"}),"Get Hint 💡"]})})]}),w.jsxs("div",{className:"p-1 sm:p-2 lg:p-3 space-y-1 sm:space-y-2 flex-1 flex flex-col justify-between min-h-0",children:[w.jsxs("div",{className:"flex-shrink-0 space-y-1 sm:space-y-2",children:[w.jsx("div",{className:"flex justify-center",children:w.jsx(hk,{wrongGuesses:i.wrongGuesses})}),w.jsx(dk,{word:g.word,guessedLetters:i.guessedLetters}),w.jsx("div",{className:"text-center",children:w.jsxs("div",{className:"inline-flex items-center gap-1 sm:gap-2 px-2 py-1 sm:px-3 sm:py-1.5 bg-white/30 backdrop-blur-sm rounded-xl text-white font-bold text-xs sm:text-sm border border-white/30",children:[w.jsx("span",{className:"text-sm sm:text-base",children:"💀"}),w.jsxs("span",{children:["Wrong: ",i.wrongGuesses,"/",b]})]})})]}),w.jsx("div",{className:"flex-shrink-0",children:w.jsx(fk,{guessedLetters:i.guessedLetters,onLetterClick:E,disabled:i.gameStatus!=="playing"})})]})]}),i.gameStatus!=="playing"&&w.jsxs("div",{className:"p-3 sm:p-4 lg:p-6 text-center space-y-3 sm:space-y-4 flex-1 flex flex-col justify-center",children:[w.jsx("div",{className:`text-4xl sm:text-5xl lg:text-6xl mb-3 sm:mb-4 animate-bounce ${i.gameStatus==="won"?"text-green-400":"text-red-400"}`,children:i.gameStatus==="won"?"🎉":"💀"}),w.jsx("h2",{className:`text-xl sm:text-2xl lg:text-3xl font-bold mb-3 sm:mb-4 drop-shadow-lg ${i.gameStatus==="won"?"text-green-100":"text-red-100"}`,children:i.gameStatus==="won"?"Correct! 🎊":"Game Over! 😵"}),w.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-3 sm:p-4 mb-3 sm:mb-4 border-2 border-white/30",children:[w.jsxs("p",{className:"text-base sm:text-lg lg:text-xl mb-2 text-white font-bold",children:["The ",g.word.includes(" ")?"phrase":"word"," was: ",w.jsx("span",{className:"text-yellow-300",children:g.word.toUpperCase()})]}),w.jsx("p",{className:"text-white/80 text-sm sm:text-base font-medium",children:g.question})]}),w.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[w.jsx("button",{onClick:v,className:"w-full sm:w-auto px-4 py-2 sm:px-6 sm:py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-2xl font-bold text-sm sm:text-base lg:text-lg hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 transform hover:scale-105 shadow-xl border-2 border-white/30",children:i.gameStatus==="won"?"Continue ✨":"Next Word 🚀"}),w.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[w.jsx("button",{onClick:S,className:"px-3 py-1.5 sm:px-4 sm:py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-medium border-2 border-white/30 text-xs sm:text-sm",children:"🔄 Restart"}),w.jsx("button",{onClick:k,className:"px-3 py-1.5 sm:px-4 sm:py-2 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-medium border-2 border-white/30 text-xs sm:text-sm",children:"🏠 Menu"})]})]})]})]})]})]})};function yk(){const[n,e]=Se.useState("menu"),[t,s]=Se.useState([]),[i,r]=Se.useState("Easy"),[o,l]=Se.useState(""),[c,u]=Se.useState(!1),[h,d]=Se.useState(""),[f,p]=Se.useState(null),g=async _=>{u(!0),l(""),e("processing"),p(null);try{const C=await rk(_);d(C),e("difficulty")}catch(C){console.error("Error processing file:",C),l(C instanceof Error?C.message:"Failed to process PDF file"),e("upload")}finally{u(!1)}},b=_=>{p(_),d(Lt[_].text),e("difficulty")},E=async _=>{r(_),u(!0),l(""),e("processing");try{let C;f?C=Lt[f].words[_]:C=await lk(h,_),s(C),e("game")}catch(C){console.error("Error generating questions:",C),l(C instanceof Error?C.message:"Failed to generate questions"),e("difficulty")}finally{u(!1)}},y=()=>f?{Easy:Lt[f].words.Easy.length,Medium:Lt[f].words.Medium.length,Hard:Lt[f].words.Hard.length}:{Easy:h?15:0,Medium:h?15:0,Hard:h?15:0},v=()=>{e("menu"),s([]),d(""),p(null),l(""),u(!1)},S=()=>w.jsx("div",{className:"absolute top-2 left-2 sm:top-4 sm:left-4 z-50",children:w.jsxs("a",{href:"https://bolt.new",target:"_blank",rel:"noopener noreferrer",className:"group flex items-center gap-1 sm:gap-2 px-2 py-1 sm:px-3 sm:py-2 bg-white/20 backdrop-blur-sm rounded-xl shadow-lg hover:bg-white/30 transition-all duration-200 border border-white/30",children:[w.jsx(d0,{className:"w-4 h-4 sm:w-5 sm:h-5 md:w-6 md:h-6 group-hover:scale-110 transition-transform duration-200"}),w.jsx("span",{className:"text-white text-xs sm:text-sm font-bold hidden sm:inline",children:"Bolt.new"})]})});return w.jsxs("div",{className:"h-screen overflow-hidden",children:[n==="menu"&&w.jsxs("div",{className:"h-screen bg-gradient-to-br from-purple-500 via-blue-500 to-indigo-600 overflow-hidden relative",children:[w.jsx(S,{}),w.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[w.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-white/10 rounded-full blur-3xl"}),w.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-white/10 rounded-full blur-3xl"})]}),w.jsx("div",{className:"relative z-10 h-full flex items-center justify-center p-2 sm:p-4",children:w.jsx("div",{className:"w-full max-w-7xl mx-auto h-full flex items-center",children:w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 lg:gap-8 items-center w-full",children:[w.jsx("div",{className:"flex justify-center items-center order-2 lg:order-1",children:w.jsx("div",{className:"relative w-full max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg",children:w.jsxs("div",{className:"relative transform hover:scale-105 transition-transform duration-300",children:[w.jsx("img",{src:"banner.png",alt:"Hangman Game Illustration",className:"w-full h-auto max-h-40 sm:max-h-48 md:max-h-56 lg:max-h-72 object-contain drop-shadow-2xl rounded-2xl"}),w.jsx("div",{className:"absolute -top-2 -left-2 sm:-top-3 sm:-left-3 lg:-top-4 lg:-left-4 bg-white/90 backdrop-blur-sm rounded-full p-1 sm:p-1.5 lg:p-2 shadow-lg animate-bounce",children:w.jsx(Iv,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 lg:w-4 lg:h-4 text-purple-600"})}),w.jsx("div",{className:"absolute -top-1 -right-3 sm:-top-2 sm:-right-4 lg:-top-3 lg:-right-6 bg-white/90 backdrop-blur-sm rounded-full p-1 sm:p-1.5 lg:p-2 shadow-lg animate-pulse",children:w.jsx(Kp,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 lg:w-4 lg:h-4 text-blue-600"})}),w.jsx("div",{className:"absolute -bottom-2 -right-2 sm:-bottom-3 sm:-right-3 lg:-bottom-4 lg:-right-4 bg-white/90 backdrop-blur-sm rounded-full p-1 sm:p-1.5 lg:p-2 shadow-lg animate-bounce",style:{animationDelay:"0.5s"},children:w.jsx(Qm,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 lg:w-4 lg:h-4 text-green-600"})}),w.jsx("div",{className:"absolute top-1 left-1 sm:top-2 sm:left-2 text-yellow-300 text-sm sm:text-base lg:text-lg animate-pulse",children:"✨"}),w.jsx("div",{className:"absolute bottom-4 left-2 sm:bottom-6 sm:left-3 lg:bottom-8 lg:left-4 text-yellow-300 text-xs sm:text-sm lg:text-base animate-pulse",style:{animationDelay:"1s"},children:"⭐"}),w.jsx("div",{className:"absolute top-2 right-1 sm:top-3 sm:right-2 lg:top-4 lg:right-2 text-yellow-300 text-xs sm:text-sm animate-pulse",style:{animationDelay:"1.5s"},children:"💫"})]})})}),w.jsxs("div",{className:"text-center lg:text-left space-y-2 sm:space-y-3 order-1 lg:order-2",children:[w.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[w.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-white leading-tight",children:"PDF Hangman"}),w.jsx("p",{className:"text-xs sm:text-sm md:text-base lg:text-lg text-blue-100 leading-relaxed max-w-2xl mx-auto lg:mx-0",children:"Turn study notes into fun, animated Hangman games using AI. Upload a PDF or try our sample content—no login needed!"}),w.jsx("div",{className:"flex items-center justify-center lg:justify-start gap-2 mt-1 sm:mt-2",children:w.jsxs("a",{href:"https://bolt.new",target:"_blank",rel:"noopener noreferrer",className:"bg-white/20 backdrop-blur-sm rounded-full px-2 py-1 sm:px-3 sm:py-1.5 flex items-center gap-1.5 sm:gap-2 border border-white/30 shadow-lg hover:bg-white/30 transition-all duration-200",children:[w.jsx(d0,{className:"w-3 h-3 sm:w-4 sm:h-4"}),w.jsxs("span",{className:"text-white text-xs sm:text-sm font-medium",children:["Powered by ",w.jsx("span",{className:"font-bold",children:"Bolt.new"})]})]})})]}),w.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[w.jsxs("button",{onClick:()=>e("upload"),className:"group relative inline-flex items-center justify-center gap-2 px-4 py-2 sm:px-6 sm:py-3 bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-2xl font-bold text-sm sm:text-base shadow-2xl hover:shadow-3xl transition-all duration-300 transform hover:scale-105 hover:from-yellow-500 hover:to-orange-600 w-full sm:w-auto",children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-300 to-orange-400 rounded-2xl blur opacity-75 group-hover:opacity-100 transition-opacity"}),w.jsxs("div",{className:"relative flex items-center gap-2",children:[w.jsx(Qm,{className:"w-4 h-4 sm:w-5 sm:h-5"}),w.jsx("span",{children:"Upload PDF Notes"})]})]}),w.jsxs("button",{onClick:()=>e("sample-select"),className:"group relative inline-flex items-center justify-center gap-2 px-4 py-2 sm:px-6 sm:py-3 bg-gradient-to-r from-green-400 to-blue-500 text-white rounded-2xl font-bold text-sm sm:text-base shadow-2xl hover:shadow-3xl transition-all duration-300 transform hover:scale-105 hover:from-green-500 hover:to-blue-600 w-full sm:w-auto",children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-300 to-blue-400 rounded-2xl blur opacity-75 group-hover:opacity-100 transition-opacity"}),w.jsxs("div",{className:"relative flex items-center gap-2",children:[w.jsx(Kp,{className:"w-4 h-4 sm:w-5 sm:h-5"}),w.jsx("span",{children:"Try Sample Content"})]})]}),w.jsx("p",{className:"text-blue-200 text-xs sm:text-sm",children:"Upload your own PDFs or explore our curated samples"})]}),w.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 pt-2",children:[w.jsxs("div",{className:"text-center lg:text-left space-y-1",children:[w.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-white/20 rounded-full flex items-center justify-center mx-auto lg:mx-0",children:w.jsx(Iv,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-200"})}),w.jsx("h3",{className:"font-semibold text-white text-xs sm:text-sm",children:"Smart Extraction"}),w.jsx("p",{className:"text-blue-200 text-xs",children:"AI reads your PDFs"})]}),w.jsxs("div",{className:"text-center lg:text-left space-y-1",children:[w.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-white/20 rounded-full flex items-center justify-center mx-auto lg:mx-0",children:w.jsx(Kp,{className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-200"})}),w.jsx("h3",{className:"font-semibold text-white text-xs sm:text-sm",children:"Adaptive Difficulty"}),w.jsx("p",{className:"text-blue-200 text-xs",children:"Easy to Hard levels"})]}),w.jsxs("div",{className:"text-center lg:text-left space-y-1",children:[w.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-white/20 rounded-full flex items-center justify-center mx-auto lg:mx-0",children:w.jsx("div",{className:"text-sm",children:"🎯"})}),w.jsx("h3",{className:"font-semibold text-white text-xs sm:text-sm",children:"Engaging Gameplay"}),w.jsx("p",{className:"text-blue-200 text-xs",children:"Interactive hangman"})]})]})]})]})})})]}),n==="sample-select"&&w.jsxs("div",{className:"h-screen bg-gradient-to-br from-green-400 via-teal-500 to-blue-600 flex items-center justify-center p-2 sm:p-4 relative overflow-hidden",children:[w.jsx(S,{}),w.jsxs("div",{className:"absolute inset-0",children:[w.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white/10 rounded-full blur-2xl animate-pulse"}),w.jsx("div",{className:"absolute bottom-32 right-32 w-40 h-40 bg-yellow-300/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),w.jsx("div",{className:"absolute top-1/2 left-10 w-24 h-24 bg-pink-300/20 rounded-full blur-2xl animate-pulse",style:{animationDelay:"2s"}})]}),w.jsxs("div",{className:"relative z-10 w-full max-w-4xl mx-auto text-center space-y-4 lg:space-y-6",children:[w.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[w.jsxs("div",{className:"relative inline-block",children:[w.jsx("div",{className:"text-4xl sm:text-5xl lg:text-6xl mb-2 lg:mb-4 animate-bounce",children:"🎮"}),w.jsx("div",{className:"absolute -top-1 -right-1 text-lg lg:text-2xl animate-pulse",children:"✨"}),w.jsx("div",{className:"absolute -bottom-1 -left-1 text-base lg:text-xl animate-pulse",style:{animationDelay:"0.5s"},children:"⭐"})]}),w.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-2 lg:mb-4 drop-shadow-lg",children:"Choose Sample Content"}),w.jsx("p",{className:"text-white/90 text-sm sm:text-base lg:text-lg leading-relaxed max-w-2xl mx-auto px-2",children:"Try our curated educational content to experience the game before uploading your own PDFs"})]}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-6 max-w-3xl mx-auto",children:[w.jsxs("button",{onClick:()=>b("python"),className:"group relative p-4 sm:p-6 lg:p-8 rounded-3xl transition-all duration-300 transform hover:scale-105 hover:shadow-2xl focus:outline-none focus:ring-4 focus:ring-white/50 bg-gradient-to-br from-blue-500 to-purple-600 text-white border-4 border-blue-300 shadow-xl hover:shadow-3xl",children:[w.jsx("div",{className:"absolute -top-2 -right-2 lg:-top-3 lg:-right-3 text-2xl sm:text-3xl lg:text-4xl animate-bounce group-hover:animate-spin",children:"🐍"}),w.jsxs("div",{className:"text-center space-y-2 sm:space-y-3 lg:space-y-4",children:[w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"bg-white/30 backdrop-blur-sm w-12 h-12 sm:w-16 sm:h-16 lg:w-20 lg:h-20 rounded-full flex items-center justify-center mx-auto group-hover:bg-white/40 transition-all duration-300 shadow-lg",children:w.jsx(qE,{className:"w-6 h-6 sm:w-8 sm:h-8 lg:w-10 lg:h-10"})}),w.jsx("div",{className:"absolute -top-1 -left-1 text-yellow-200 text-sm animate-pulse",children:"✨"}),w.jsx("div",{className:"absolute -bottom-1 -right-1 text-yellow-200 text-sm animate-pulse",style:{animationDelay:"0.5s"},children:"⭐"})]}),w.jsxs("div",{className:"space-y-1 sm:space-y-2 lg:space-y-3",children:[w.jsx("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold drop-shadow-lg",children:"Python Programming"}),w.jsx("p",{className:"text-white/90 text-xs sm:text-sm lg:text-base font-medium",children:"Learn Python concepts through interactive gameplay"}),w.jsxs("div",{className:"flex justify-center gap-1 sm:gap-2 mt-2 sm:mt-3",children:[w.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-lg px-2 py-1 text-xs font-bold",children:["Easy: ",Lt.python.words.Easy.length]}),w.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-lg px-2 py-1 text-xs font-bold",children:["Medium: ",Lt.python.words.Medium.length]}),w.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-lg px-2 py-1 text-xs font-bold",children:["Hard: ",Lt.python.words.Hard.length]})]})]})]}),w.jsx("div",{className:"absolute inset-0 rounded-3xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 blur-xl"})]}),w.jsxs("button",{onClick:()=>b("electronics"),className:"group relative p-4 sm:p-6 lg:p-8 rounded-3xl transition-all duration-300 transform hover:scale-105 hover:shadow-2xl focus:outline-none focus:ring-4 focus:ring-white/50 bg-gradient-to-br from-yellow-500 to-red-600 text-white border-4 border-yellow-300 shadow-xl hover:shadow-3xl",children:[w.jsx("div",{className:"absolute -top-2 -right-2 lg:-top-3 lg:-right-3 text-2xl sm:text-3xl lg:text-4xl animate-bounce group-hover:animate-spin",children:"⚡"}),w.jsxs("div",{className:"text-center space-y-2 sm:space-y-3 lg:space-y-4",children:[w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"bg-white/30 backdrop-blur-sm w-12 h-12 sm:w-16 sm:h-16 lg:w-20 lg:h-20 rounded-full flex items-center justify-center mx-auto group-hover:bg-white/40 transition-all duration-300 shadow-lg",children:w.jsx(g1,{className:"w-6 h-6 sm:w-8 sm:h-8 lg:w-10 lg:h-10"})}),w.jsx("div",{className:"absolute -top-1 -left-1 text-yellow-200 text-sm animate-pulse",children:"✨"}),w.jsx("div",{className:"absolute -bottom-1 -right-1 text-yellow-200 text-sm animate-pulse",style:{animationDelay:"0.5s"},children:"⭐"})]}),w.jsxs("div",{className:"space-y-1 sm:space-y-2 lg:space-y-3",children:[w.jsx("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold drop-shadow-lg",children:"Electronics Engineering"}),w.jsx("p",{className:"text-white/90 text-xs sm:text-sm lg:text-base font-medium",children:"Master electronics concepts through engaging puzzles"}),w.jsxs("div",{className:"flex justify-center gap-1 sm:gap-2 mt-2 sm:mt-3",children:[w.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-lg px-2 py-1 text-xs font-bold",children:["Easy: ",Lt.electronics.words.Easy.length]}),w.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-lg px-2 py-1 text-xs font-bold",children:["Medium: ",Lt.electronics.words.Medium.length]}),w.jsxs("div",{className:"bg-white/30 backdrop-blur-sm rounded-lg px-2 py-1 text-xs font-bold",children:["Hard: ",Lt.electronics.words.Hard.length]})]})]})]}),w.jsx("div",{className:"absolute inset-0 rounded-3xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 blur-xl"})]})]}),w.jsxs("button",{onClick:v,className:"inline-flex items-center gap-2 px-4 py-2 lg:px-5 lg:py-2.5 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-medium text-sm lg:text-base border-2 border-white/30",children:[w.jsx("span",{children:"←"})," Back to Menu"]})]})]}),n==="upload"&&w.jsxs("div",{className:"h-screen bg-gradient-to-br from-blue-400 via-purple-500 to-indigo-600 flex items-center justify-center p-2 sm:p-4 relative overflow-hidden",children:[w.jsx(S,{}),w.jsxs("div",{className:"absolute inset-0",children:[w.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-white/10 rounded-full blur-2xl animate-pulse"}),w.jsx("div",{className:"absolute bottom-32 right-32 w-40 h-40 bg-yellow-300/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),w.jsx("div",{className:"absolute top-1/2 left-10 w-24 h-24 bg-pink-300/20 rounded-full blur-2xl animate-pulse",style:{animationDelay:"2s"}})]}),w.jsxs("div",{className:"relative z-10 w-full max-w-2xl mx-auto text-center space-y-4 lg:space-y-6",children:[w.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[w.jsxs("div",{className:"relative inline-block",children:[w.jsx("div",{className:"text-4xl sm:text-5xl lg:text-6xl mb-2 lg:mb-4 animate-bounce",children:"📚"}),w.jsx("div",{className:"absolute -top-1 -right-1 text-lg lg:text-2xl animate-spin",children:"✨"})]}),w.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-2 lg:mb-4 drop-shadow-lg",children:"Upload Your Study Notes"}),w.jsx("p",{className:"text-white/90 text-sm sm:text-base lg:text-lg leading-relaxed max-w-lg mx-auto px-2",children:"Choose a PDF file containing your educational materials. We'll extract the content and create personalized Hangman games!"})]}),w.jsx(ck,{onFileUpload:g,isProcessing:c}),o&&w.jsxs("div",{className:"bg-red-100/90 backdrop-blur-sm border-2 border-red-300 rounded-2xl p-3 lg:p-4 flex items-center gap-2 lg:gap-3 text-red-700 shadow-xl mx-2",children:[w.jsx("div",{className:"bg-red-200 rounded-full p-1.5",children:w.jsx(Km,{className:"w-4 h-4 lg:w-5 lg:h-5 flex-shrink-0"})}),w.jsx("p",{className:"text-sm lg:text-base font-medium",children:o})]}),w.jsxs("button",{onClick:v,className:"inline-flex items-center gap-2 px-4 py-2 lg:px-5 lg:py-2.5 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-medium text-sm lg:text-base",children:[w.jsx("span",{children:"←"})," Back to Menu"]})]})]}),n==="processing"&&w.jsxs("div",{className:"h-screen bg-gradient-to-br from-green-400 via-blue-500 to-purple-600 flex items-center justify-center p-2 sm:p-4 relative overflow-hidden",children:[w.jsx(S,{}),w.jsxs("div",{className:"absolute inset-0",children:[w.jsx("div",{className:"absolute top-1/4 left-1/4 w-20 h-20 bg-white/20 rounded-full animate-ping"}),w.jsx("div",{className:"absolute bottom-1/3 right-1/4 w-16 h-16 bg-yellow-300/30 rounded-full animate-ping",style:{animationDelay:"0.5s"}}),w.jsx("div",{className:"absolute top-1/2 right-1/3 w-12 h-12 bg-pink-300/30 rounded-full animate-ping",style:{animationDelay:"1s"}})]}),w.jsxs("div",{className:"relative z-10 text-center space-y-4 lg:space-y-6 max-w-lg mx-auto",children:[w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"text-4xl sm:text-5xl lg:text-6xl animate-spin mb-3 lg:mb-6",children:"⚙️"}),w.jsx("div",{className:"absolute -top-2 -right-2 text-lg lg:text-2xl animate-bounce",children:"🤖"}),w.jsx("div",{className:"absolute -bottom-1 -left-2 text-base lg:text-xl animate-pulse",children:"💭"})]}),w.jsx("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-3 lg:mb-6 drop-shadow-lg",children:f?`Preparing ${Lt[f].title} - ${i} Level`:h?`Generating ${i} Questions`:"Processing Your PDF"}),w.jsx("div",{className:"space-y-2 lg:space-y-3 text-white/90",children:h?f?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-2.5 lg:p-3 flex items-center gap-2 lg:gap-3",children:[w.jsx("div",{className:"text-xl lg:text-2xl",children:Lt[f].emoji}),w.jsxs("p",{className:"text-sm lg:text-base font-medium",children:["Loading ",Lt[f].title," content..."]})]}),w.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-2.5 lg:p-3 flex items-center gap-2 lg:gap-3",children:[w.jsx("div",{className:"text-xl lg:text-2xl",children:"🎮"}),w.jsxs("p",{className:"text-sm lg:text-base font-medium",children:["Preparing your ",i," level Hangman game..."]})]})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-2.5 lg:p-3 flex items-center gap-2 lg:gap-3",children:[w.jsx("div",{className:"text-xl lg:text-2xl",children:"🤖"}),w.jsxs("p",{className:"text-sm lg:text-base font-medium",children:["AI is generating ",i," level questions..."]})]}),w.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-2.5 lg:p-3 flex items-center gap-2 lg:gap-3",children:[w.jsx("div",{className:"text-xl lg:text-2xl",children:"🎮"}),w.jsx("p",{className:"text-sm lg:text-base font-medium",children:"Preparing your personalized Hangman game..."})]})]}):w.jsx(w.Fragment,{children:w.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-2.5 lg:p-3 flex items-center gap-2 lg:gap-3",children:[w.jsx("div",{className:"text-xl lg:text-2xl",children:"📖"}),w.jsx("p",{className:"text-sm lg:text-base font-medium",children:"Extracting text from your document..."})]})})}),w.jsx("div",{className:"w-full max-w-md mx-auto",children:w.jsx("div",{className:"bg-white/30 rounded-full h-2.5 lg:h-3 overflow-hidden",children:w.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 h-full rounded-full animate-pulse shadow-lg",style:{width:h?"80%":"40%"}})})})]})]}),n==="difficulty"&&w.jsxs("div",{className:"h-screen bg-gradient-to-br from-indigo-400 via-purple-500 to-pink-500 flex items-center justify-center p-2 sm:p-4 relative overflow-hidden",children:[w.jsx(S,{}),w.jsxs("div",{className:"absolute inset-0",children:[w.jsx("div",{className:"absolute top-20 right-20 w-32 h-32 bg-white/10 rounded-full blur-2xl animate-pulse"}),w.jsx("div",{className:"absolute bottom-20 left-20 w-40 h-40 bg-yellow-300/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),w.jsx("div",{className:"absolute top-1/3 left-1/2 w-24 h-24 bg-green-300/20 rounded-full blur-2xl animate-pulse",style:{animationDelay:"2s"}})]}),w.jsxs("div",{className:"relative z-10 w-full max-w-6xl mx-auto text-center space-y-4 lg:space-y-6 h-full flex flex-col justify-center",children:[w.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[w.jsxs("div",{className:"relative inline-block",children:[w.jsx("div",{className:"text-4xl sm:text-5xl lg:text-6xl mb-2 lg:mb-4 animate-bounce",children:"🎯"}),w.jsx("div",{className:"absolute -top-1 -right-1 text-lg lg:text-2xl animate-pulse",children:"⭐"}),w.jsx("div",{className:"absolute -bottom-1 -left-1 text-base lg:text-xl animate-pulse",style:{animationDelay:"0.5s"},children:"💫"})]}),w.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-white mb-2 lg:mb-4 drop-shadow-lg",children:"Choose Your Challenge Level"}),w.jsx("p",{className:"text-white/90 text-sm sm:text-base lg:text-lg leading-relaxed max-w-2xl mx-auto px-2",children:f?`${Lt[f].title} content is ready! Select your preferred difficulty level.`:"Your PDF has been processed successfully! Select your preferred difficulty to generate personalized questions."})]}),w.jsx(uk,{onSelectDifficulty:E,wordCounts:y()}),o&&w.jsxs("div",{className:"bg-red-100/90 backdrop-blur-sm border-2 border-red-300 rounded-2xl p-3 lg:p-4 flex items-center gap-2 lg:gap-3 text-red-700 shadow-xl max-w-2xl mx-auto",children:[w.jsx("div",{className:"bg-red-200 rounded-full p-1.5",children:w.jsx(Km,{className:"w-4 h-4 lg:w-5 lg:h-5 flex-shrink-0"})}),w.jsx("p",{className:"text-sm lg:text-base font-medium",children:o})]}),w.jsxs("button",{onClick:v,className:"inline-flex items-center gap-2 px-4 py-2 lg:px-5 lg:py-2.5 bg-white/20 backdrop-blur-sm text-white rounded-xl hover:bg-white/30 transition-all duration-200 font-medium text-sm lg:text-base",children:[w.jsx("span",{children:"←"})," ",f?"Back to Menu":"Upload Different PDF"]})]})]}),n==="game"&&w.jsx(gk,{words:t,difficulty:i,onBackToMenu:v,onBackToDifficulty:()=>e("difficulty")})]})}m1(document.getElementById("root")).render(w.jsx(Se.StrictMode,{children:w.jsx(yk,{})}));
